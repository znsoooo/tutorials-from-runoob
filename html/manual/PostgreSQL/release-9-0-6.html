<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.125. 版本 9.0.6</title><link rel="stylesheet" type="text/css" href="../../0/stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-9-0-7.html" title="E.124. 版本 9.0.7" /><link rel="next" href="release-9-0-5.html" title="E.126. 版本 9.0.5" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.125. 版本 9.0.6</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-9-0-7.html" title="E.124. 版本 9.0.7">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="附录 E. 版本说明">上一级</a></td><th width="60%" align="center">附录 E. 版本说明</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.1 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="release-9-0-5.html" title="E.126. 版本 9.0.5">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-9-0-6"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.125. 版本 9.0.6</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-9-0-6.html#idp75239248">E.125.1. 迁移到版本 9.0.6</a></span></dt><dt><span class="sect2"><a href="release-9-0-6.html#idp75242592">E.125.2. 修改列表</a></span></dt></dl></div><p><strong>发布日期：. </strong>2011-12-05</p><p>这个版本包含各种自9.0.5以来的修复。想要获得关于9.0主版本的新特性信息，
请参阅<a class="xref" href="release-9-0.html" title="E.131. 版本 9.0">第 E.131 节</a>。</p><div class="sect2" id="idp75239248"><div class="titlepage"><div><div><h3 class="title">E.125.1. 迁移到版本 9.0.6</h3></div></div></div><p>运行9.0.X的系统不需要转储/恢复。</p><p>然而，在<code class="literal">information_schema.referential_constraints</code>
视图的定义中发现了一个长期存在的错误。如果你依赖于该视图的正确结果，
那么你应该如下第一条变更日志条目解释的那样替换它的定义。</p><p>另外，如果你是从一个早于9.0.4的版本升级而来，那么请参阅<a class="xref" href="release-9-0-4.html" title="E.127. 版本 9.0.4">第 E.127 节</a>。</p></div><div class="sect2" id="idp75242592"><div class="titlepage"><div><div><h3 class="title">E.125.2. 修改列表</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>修复了<code class="literal">information_schema.referential_constraints</code>视图中的bug (Tom Lane)</p><p>这个视图关于匹配外键约束和依赖的主键或唯一键约束不够仔细。
这会导致无法显示外键约束，或显示多次外键约束，
或宣称它依赖于与它实际依赖的约束不同的约束。</p><p>由于该视图的定义是通过<span class="application">initdb</span>安装的，只是升级将不能修复这个问题。
如果你需要在一个现有安装上修复，你可以（作为超级用户）删除<code class="literal">information_schema</code>
模式然后通过寻源<code class="filename"><em class="replaceable"><code>SHAREDIR</code></em>/information_schema.sql</code>重新创建它。
（如果不确定<em class="replaceable"><code>SHAREDIR</code></em>在哪，运行<code class="literal">pg_config --sharedir</code>。）
必须在每个要修复的数据库充重复这个操作。</p></li><li class="listitem"><p>修复加入标量返回函数的输出的<code class="command">UPDATE</code>或<code class="command">DELETE</code>期间可能的损坏 (Tom Lane)</p><p>只有在同时更新同一个目标行时会发生损坏，所以这个问题只是间歇性的出现。</p></li><li class="listitem"><p>修复WAL记录为GIN索引更新不正确的重放 (Tom Lane)</p><p>这会导致崩溃后或在一个热备服务器上有一个瞬间不能找到索引条目。
不过，该问题可以通过对索引的下一个<code class="command">VACUUM</code>修复。</p></li><li class="listitem"><p>修复<code class="literal">CREATE TABLE dest AS SELECT * FROM src</code>或<code class="literal">INSERT INTO dest SELECT * FROM src</code>
期间TOAST相关的数据损坏 (Tom Lane)</p><p>如果一个表已经通过 <code class="command">ALTER TABLE ADD COLUMN</code>修改，
那么逐字的拷贝它的数据到另一个表在某些极端情况下会产生损坏的结果。
该问题只会在8.4和以后的版本中的确定形式下出现，
但是我们也在更早的版本中打了补丁，以防有其他代码路径会触发相同的bug。</p></li><li class="listitem"><p>修复热备启动期间可能的失败 (Simon Riggs)</p></li><li class="listitem"><p>当最初的快照不完整时更快的启动热备份 (Simon Riggs)</p></li><li class="listitem"><p>修复toast表访问陈旧的syscache条目期间的竞态条件 (Tom Lane)</p><p>典型症状是类似<span class="quote">“<span class="quote">missing chunk number 0 for toast value NNNNN in pg_toast_2619</span>”</span>
这样的瞬态错误，这里被引用的toast表总是属于系统目录。</p></li><li class="listitem"><p>追踪用于参数缺省表达式中的条目上的函数的依赖性 (Tom Lane)</p><p>以前，可以在没有删除或修改函数之前删除引用对象，导致使用该函数时的错误行为。
请注意，仅仅安装这个更新将不能修复丢失的依赖条目；要想修复，你需要在每一个这样的函数之后
<code class="command">CREATE OR REPLACE</code>。如果你有缺省依赖于非内建对象的函数，建议这样做。</p></li><li class="listitem"><p>允许设置-返回SQL函数内联多个OUT参数 (Tom Lane)</p></li><li class="listitem"><p>对于加入删除来说不要依赖延迟的唯一索引 (Tom Lane and Marti Raudsepp)</p><p>延迟的唯一约束可能不支持内部事务，所以假定它会给出不正确的查询结果。</p></li><li class="listitem"><p>使<code class="function">DatumGetInetP()</code>取出有1字节开头的inet资料，并且添加一个新的宏
<code class="function">DatumGetInetPP()</code> (Heikki Linnakangas)</p><p>这个改变不会影响核心代码，但是可以阻止期望<code class="function">DatumGetInetP()</code>
按照通常的惯例产生非压缩的数据的扩展代码中的崩溃。</p></li><li class="listitem"><p>改善<code class="type">money</code>类型的输入和输出的语言环境支持 (Tom Lane)</p><p>除了不支持所有的标准<a class="link" href="runtime-config-client.html#GUC-LC-MONETARY"><code class="varname">lc_monetary</code></a>
格式化选项之外，输入和输出函数也是不一致的，这意味着转储的<code class="type">money</code>
值中的语言环境不可以被重新读取。</p></li><li class="listitem"><p>不让<a class="link" href="runtime-config-compatible.html#GUC-TRANSFORM-NULL-EQUALS"><code class="varname">transform_null_equals</code></a>
影响<code class="literal">CASE foo WHEN NULL ...</code>构造 (Heikki Linnakangas)</p><p><code class="varname">transform_null_equals</code>只应该影响直接由用户编写的<code class="literal">foo = NULL</code>表达式，
不是这种形式的<code class="literal">CASE</code>内部产生的平等检查。</p></li><li class="listitem"><p>更改外键触发创建以便更好的支持自我参考的外键 (Tom Lane)</p><p>对于参考它自己的表的级联外键，一个行更新将作为一个事件触发<code class="literal">ON UPDATE</code>触发器和
<code class="literal">CHECK</code>触发器。必须先执行<code class="literal">ON UPDATE</code>触发器，否则<code class="literal">CHECK</code>
将检查行的一个非最终状态，并且可能抛出一个不恰当的错误。不过，触发这些触发器的顺序则取决于它们的名字，
它们通常以创建的顺序排序，因为触发器自动生成的名字遵循惯例<span class="quote">“<span class="quote">RI_ConstraintTrigger_NNNN</span>”</span>。
适当的修复需要修改该惯例，我们将在9.2中做这块，不过在现存的版本中改变它看起来是有风险的。
所以这个修复只是改变触发器的创建顺序。用户遇到这个类型的错误时应该删除并重建外键约束，
以使它的触发器获得正确的顺序。</p></li><li class="listitem"><p>当跟踪缓冲区分配率时避免浮点型下溢 (Greg Matthews)</p><p>当它本身无害时，在特定平台上这将导致恼人的内核日志信息。</p></li><li class="listitem"><p>当在Windows下启动子进程时，保护配置文件名和行号值 (Tom Lane)</p><p>以前，这些在<code class="structname">pg_settings</code>视图中显示的不正确。</p></li><li class="listitem"><p>修复<span class="application">ecpg</span>的SQLDA区域中不正确的字段排列 (Zoltan Boszormenyi)</p></li><li class="listitem"><p>保持空行在<span class="application">psql</span>的命令历史的命令里面 (Robert Haas)</p><p>前者的行为可能导致问题，例如，如果一个空行从一个字符串中删除。</p></li><li class="listitem"><p>修复<span class="application">pg_dump</span>以转储用户定义和自动生成类型之间的转换，比如表的行类型 (Tom Lane)</p></li><li class="listitem"><p><span class="application">pg_upgrade</span>的各种修复 (Bruce Momjian)</p><p>正确的处理排他约束，避免在Windows上的失败，不要抱怨8.4数据库中错误匹配的toast表名。</p></li><li class="listitem"><p>使用<span class="application">xsubpp</span>的首选版本建立PL/Perl，不一定要操作系统的主要副本 (David Wheeler and Alex Hunsaker)</p></li><li class="listitem"><p>修复<code class="filename">contrib/dict_int</code>和<code class="filename">contrib/dict_xsyn</code>中不正确的编码 (Tom Lane)</p><p>某些函数不正确的假设由<code class="function">palloc()</code>返回的内存保证调到零位。</p></li><li class="listitem"><p>修复<code class="filename">contrib/unaccent</code>的配置文件解析中的各种错误 (Tom Lane)</p></li><li class="listitem"><p>查询取消<code class="function">pgstatindex()</code>中的立即中断 (Robert Haas)</p></li><li class="listitem"><p>修复macOS启动脚本中日志文件名的错误引用 (Sidar Lopez)</p></li><li class="listitem"><p>确保VPATH建立适当的安装所有的服务器头文件 (Peter Eisentraut)</p></li><li class="listitem"><p>缩短在冗长的错误消息中报告的文件名 (Peter Eisentraut)</p><p>正规的建立总是只是报告包含错误消息调用的C文件的名字，但是VPATH建立以前报告一个绝对路径名。</p></li><li class="listitem"><p>修复Windows时区名称中美洲（Central America）的说明 (Tom Lane)</p><p>映射<span class="quote">“<span class="quote">Central America Standard Time</span>”</span>到<code class="literal">CST6</code>，而不是<code class="literal">CST6CDT</code>，
因为DST在中美洲通常不是随处可见的。</p></li><li class="listitem"><p>更新时区数据文件为<span class="application">tzdata</span>版本2011n，因为DST规律在
Brazil, Cuba, Fiji, Palestine, Russia, 和 Samoa改变了；
还有Alaska 和 British East Africa的历史的修正。</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-9-0-7.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="release-9-0-5.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">E.124. 版本 9.0.7 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> E.126. 版本 9.0.5</td></tr></table></div></body></html>
