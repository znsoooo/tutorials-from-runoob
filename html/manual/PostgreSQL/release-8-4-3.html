<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.151. 版本8.4.3</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-8-4-4.html" title="E.150. 版本8.4.4" /><link rel="next" href="release-8-4-2.html" title="E.152. 版本8.4.2" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.151. 版本8.4.3</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-8-4-4.html" title="E.150. 版本8.4.4">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="附录 E. 版本说明">上一级</a></td><th width="60%" align="center">附录 E. 版本说明</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.1 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="release-8-4-2.html" title="E.152. 版本8.4.2">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-8-4-3"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.151. 版本8.4.3</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-8-4-3.html#idp77102224">E.151.1. 迁移到版本8.4.3</a></span></dt><dt><span class="sect2"><a href="release-8-4-3.html#idp77103776">E.151.2. 变化</a></span></dt></dl></div><p><strong>发布日期：. </strong>2010-03-15</p><p>     该发布包含了来自8.4.2的各种修复。关于8.4主要版本的新功能信息，参阅
 <a class="xref" href="release-8-4.html" title="E.154. 版本8.4">第 E.154 节</a>。</p><div class="sect2" id="idp77102224"><div class="titlepage"><div><div><h3 class="title">E.151.1. 迁移到版本8.4.3</h3></div></div></div><p>    运行8.4.X不需要备份/恢复。然而，如果你从8.4.2更早版本更新，
    参阅<a class="xref" href="release-8-4-2.html" title="E.152. 版本8.4.2">第 E.152 节</a>。</p></div><div class="sect2" id="idp77103776"><div class="titlepage"><div><div><h3 class="title">E.151.2. 变化</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    添加新的配置参数<code class="varname">ssl_renegotiation_limit</code>用来控制
我们多久一次执行会话秘钥重新协商SSL连接(Magnus)</p><p>     这可以被设置为零以完全禁用重新协商，如果使用一个已破碎的SSL库。这可能被要求。
 特别是，一些供应商为导致重新协商尝试失败的CVE-2009-3555打补丁。</p></li><li class="listitem"><p>    修复后台启动过程中可能的死锁(Tom)</p></li><li class="listitem"><p>    由于在relcache明确重载中没有处理错误，修复可能的崩溃(Tom)</p></li><li class="listitem"><p>    由于使用悬空指针到缓存计划，修复可能崩溃(Tatsuo)</p></li><li class="listitem"><p>    由于缓存计划<code class="command">ROLLBACK</code>的严重失效，修复可能崩溃(Tom)</p></li><li class="listitem"><p>     当试图从子事务启动故障恢复时，修复可能的崩溃(Tom)</p></li><li class="listitem"><p>    修复与使用保存点和来自服务器编码不同的客户端编码有关的服务器内存泄漏(Tom)</p></li><li class="listitem"><p>     修正GIST索引页拆分中结束恢复清理期间发出的不正确WAL数据(Yoichi Hirai)</p><p>    如果在结束恢复清理中已经完成了一个不完整的GIST插入后我们运气不好而发生崩溃。
这将导致索引损坏，甚至在WAL回放期间更有可能发生错误。
</p></li><li class="listitem"><p>     为GIN索引修复WAL重做清理方法中的错误(Heikki)</p></li><li class="listitem"><p>    修复GIN索引搜索中扫描键的不正确比较(Teodor)</p></li><li class="listitem"><p>    使得为<code class="type">bit</code>类型的<code class="function">substring()</code>将任何负的长度看作
<span class="quote">“<span class="quote">所有剩余字符串</span>”</span>(Tom)</p><p>    先前代码只处理-1，并且可能为其他负值产生无效结果值，可能导致崩溃(CVE-2010-0442)。</p></li><li class="listitem"><p>    
    当输出比特宽度大于不同于8位倍数的给定整数的时候，修复整数到比特串转换用来正确地处理第一个分数字节(Tom)</p></li><li class="listitem"><p>    修复病理上阻碍正则表达式匹配的一些情况(Tom)</p></li><li class="listitem"><p>       当尝试内联返回一组包含已删除列的复合类型的SQL函数的时候，修复产生的错误(Tom) </p></li><li class="listitem"><p>     修复试图更新复合类型数组列元素字段中的错误(Tom) </p></li><li class="listitem"><p>    当<code class="command">EXPLAIN</code>必须打印FieldStore或者分配ArrayRef表达式的时候，
避免错误(Tom)</p><p>   这种情况已经出现<code class="command">EXPLAIN VERBOSE</code>试图输出计划节点目标列。</p></li><li class="listitem"><p>     在未修饰字符串出现在<code class="command">UNION</code>/<code class="command">INTERSECT</code>/<code class="command">EXCEPT</code>子查询中的情况中，
 避免不必要强制错误(Tom)   
 </p><p>    修复8.4之前执行情况中的回归分析。</p></li><li class="listitem"><p>    在整行Var中有包含已删除列的rowtype的地方，避免不符合要求的rowtype兼容检查错误(Tom)</p></li><li class="listitem"><p>    当最后位置正好在一段边界时，修复备份历史文件中的<code class="literal">STOP WAL LOCATION</code>项以
报告下一个WAL段的名称(Itagaki Takahiro)</p></li><li class="listitem"><p>    总是将系统目录ID传递给<code class="command">CREATE FOREIGN DATA WRAPPER</code>中指定的选项
验证函数(Martin Pihlak)</p></li><li class="listitem"><p>    修复临时文件泄露的一些情况(Heikki)</p><p>    这纠正了以前次要版本引入的问题。
一种失败情况是：当在另一个函数的异常处理程序中调用plpgsql函数返回集。
</p></li><li class="listitem"><p>   添加支持执行<code class="literal">FULL JOIN ON FALSE</code> (Tom)</p><p>     这可以防止来自8.4之前发布的一些查询的回归，该查询现在可以简化为一个恒定的错误连接条件。</p></li><li class="listitem"><p>
优化布尔变量情况下约束排除处理，
特别是有可能排除一个有<span class="quote">“<span class="quote">bool_column = false</span>”</span>约束的分区(Tom)
</p></li><li class="listitem"><p>   防止将<code class="literal">INOUT</code>映射看作表示二进制兼容(Heikki)</p></li><li class="listitem"><p>   当警告不能授权或者撤销列级别权限的时候，包含该消息的字段名(Stephen Frost)</p><p>    当<code class="command">REVOKE</code>产生多条消息时，这个原先似乎是复制品，这比起以前来是非常有用的，
并且避免混淆。</p></li><li class="listitem"><p>    当读取<code class="filename">pg_hba.conf</code>和相关文件的时候，如果<code class="literal">@</code>似乎出现在引号内，
不要将<code class="literal">@something</code>看作文件包含请求，另外，也不要将<code class="literal">@</code>自身看作文件包含请求(Tom)</p><p>如果角色或数据库的名字以<code class="literal">@</code>开头，这可以防止不稳定操作。
如果你需要包含路径名含有空格的文件，那么你仍然可以这样做，但是你必须写
<code class="literal">@"/path to/file"</code>而不是把引号放入整个构造中。</p></li><li class="listitem"><p>     如果目录被命名为<code class="filename">pg_hba.conf</code>中和相关文件的包含目标，则
 防止在一些平台上的无限循环(Tom)</p></li><li class="listitem"><p>   如果没有设置<code class="varname">errno</code>时<code class="function">SSL_read</code>或者<code class="function">SSL_write</code>失败，
   修复可能无限循环(Tom)</p><p>    据说这个可能使用<span class="application">openssl</span>的一些Windows版本。</p></li><li class="listitem"><p>     不允许本地连接中<acronym class="acronym">GSSAPI</acronym>认证，因为它需要hostname以正常工作(Magnus)</p></li><li class="listitem"><p>     保护<span class="application">ecpg</span>应用意外地释放字符串(Michael)</p></li><li class="listitem"><p>    如果连接断开，使得<span class="application">ecpg</span>报告合适SQLSTATE(Michael)</p></li><li class="listitem"><p>    修复<span class="application">psql</span> <code class="literal">\d</code>输出中单元格内容的翻译(Heikki)</p></li><li class="listitem"><p>    修复<span class="application">psql</span>的<code class="literal">numericlocale</code>选项而不能格式化字符串，
它不属于latex和troff输出格式(Heikki)</p></li><li class="listitem"><p>   修复<span class="application">psql</span>中小的每个查询内存泄露(Tom)</p></li><li class="listitem"><p>    当指定<code class="literal">ON_ERROR_STOP</code>和<code class="literal">--single-transaction</code>的时候，并且
在隐含<code class="command">COMMIT</code>期间发生错误时，使得<span class="application">psql</span>返回正确退出状态(3)(Bruce)</p></li><li class="listitem"><p>    修复外部服务器权限的<span class="application">pg_dump</span>的输出(Heikki)</p></li><li class="listitem"><p>     由于溢出依赖性ID，在平行<span class="application">pg_restore</span>中修复可能崩溃(Tom)</p></li><li class="listitem"><p>     在复合列设置为空的情况下，修复plpgsql错误(Tom)</p></li><li class="listitem"><p>     当从PL/PerlU中调用PL/Perl函数的时候，修复可能失败，反之亦然(Tim Bunce)</p></li><li class="listitem"><p>     在PL/Python中添加<code class="literal">volatile</code>标记以避免可能具体编译器操作不当(Zdenek Kotala)</p></li><li class="listitem"><p>      确保PL/Tcl完全初始化Tcl解释器(Tom)</p><p>     这种监督的唯一已知现象是如果使用Tcl 8.5或者更高版本，则Tcl <code class="literal">clock</code>命令行为不当。</p></li><li class="listitem"><p>    避免在失败事务或者子事务中创建入口运行<code class="function">ExecutorEnd</code>(Tom)</p><p>    当使用<code class="filename">contrib/auto_explain</code>的时候，这是已知错误。</p></li><li class="listitem"><p>     当许多关键列被指定为<code class="function">dblink_build_sql_*</code>函数时，阻止<code class="filename">contrib/dblink</code>崩溃(Rushabh Lathia, Joe Conway)</p></li><li class="listitem"><p>     允许<code class="filename">contrib/ltree</code>操作中零维数组(Tom)</p><p>这种情况曾经被认为一个错误，但它更方便
将它看作零元素数组。当<code class="type">ltree</code>操作应用于<code class="literal">ARRAY(SELECT ...)</code>结果和没有返回
行的子查询的时候，特别是这可以避免不必要的故障。</p></li><li class="listitem"><p>    修复通过内存管理造成的<code class="filename">contrib/xml2</code>中各种崩溃(Tom)</p></li><li class="listitem"><p>    使得<code class="filename">contrib/xml2</code>编译在Windows上更加具有鲁棒性(Andrew)</p></li><li class="listitem"><p>     修复Windows上信号处理竞争条件(Radu Ilie)</p><p>    这个错误已知现象是在<code class="structname">pg_listener</code>中的行可以在重负载下被删除。</p></li><li class="listitem"><p>   如果C编译器不提供64位整数数据类型，使得配置脚本报告错误(Tom)</p><p>     这种情况一段时间已经被打断，不再值得支持，因此在配置时间拒绝它。</p></li><li class="listitem"><p>       为了Bangladesh，Chile，Fiji， Mexico，Paraguay，Samoa中DST变化规律更新
   时区数据文件到<span class="application">tzdata</span>发布2010e。</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-8-4-4.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="release-8-4-2.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">E.150. 版本8.4.4 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> E.152. 版本8.4.2</td></tr></table></div></body></html>
