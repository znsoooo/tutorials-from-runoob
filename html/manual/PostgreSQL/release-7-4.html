<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.284. 版本 7.4</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-7-4-1.html" title="E.283. 版本 7.4.1" /><link rel="next" href="release-7-3-21.html" title="E.285. 版本 7.3.21" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.284. 版本 7.4</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-7-4-1.html" title="E.283. 版本 7.4.1">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="附录 E. 版本说明">上一级</a></td><th width="60%" align="center">附录 E. 版本说明</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.1 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="release-7-3-21.html" title="E.285. 版本 7.3.21">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-7-4"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.284. 版本 7.4</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-7-4.html#idp83159920">E.284.1. 概述</a></span></dt><dt><span class="sect2"><a href="release-7-4.html#idp83195712">E.284.2. 迁移到版本 7.4</a></span></dt><dt><span class="sect2"><a href="release-7-4.html#idp83228016">E.284.3. 修改列表</a></span></dt></dl></div><p><strong>发布日期：. </strong>2003-11-17</p><div class="sect2" id="idp83159920"><div class="titlepage"><div><div><h3 class="title">E.284.1. 概述</h3></div></div></div><p>这个版本中的主要变更：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"> <code class="literal">IN</code> / <code class="literal">NOT IN</code>子查询现在更有效率
    </span></dt><dd><p>在以前的版本中，<code class="literal">IN</code> / <code class="literal">NOT IN</code>
子查询连接到上面的查询，顺序的扫描子查询需找一个匹配。
7.4代码使用普通连接使用的相同的先进的技术，因此更加快速。
<code class="literal">IN</code>现在通常比一个等价的<code class="literal">EXISTS</code>子查询相同速度或者更快；
这颠倒了应用于以前版本的传统观点。</p></dd><dt><span class="term"> 通过使用哈希桶提高<code class="literal">GROUP BY</code>的处理
    </span></dt><dd><p>在以前的版本中，被分组的行必须先排序。7.4代码可以不用排序就执行<code class="literal">GROUP BY</code>，
通过累加结果到一个哈希表，每个分组都有一个入口。不过，
如果该哈希表被估计为太大而不适合<code class="varname">sort_mem</code>，那么将仍然使用排序技术。</p></dd><dt><span class="term"> 新增多键的哈希连接能力
    </span></dt><dd><p>在以前的版本中，哈希连接只在单键上发生。这个版本允许多键的哈希连接。</p></dd><dt><span class="term"> 使用明确的<code class="literal">JOIN</code>语法的查询现在更好的最优化了
    </span></dt><dd><p>以前的版本估算使用明确的<code class="literal">JOIN</code>语法的查询只以该语法暗示的顺序。
7.4允许全面优化这些查询，意味着优化考虑所有可能的连接顺序，
并且选择最有效的顺序。不过，外连接必须仍然遵循声明的顺序。</p></dd><dt><span class="term"> 更快、更强大的正则表达式编码
    </span></dt><dd><p>整个正则表达式模块已经被Henry Spencer用一个新的版本替代，最初是为Tcl写的。
该代码大大的提高了性能，并且支持几种正则表达式。</p></dd><dt><span class="term"> 为简单的SQL函数嵌入函数
    </span></dt><dd><p>简单的SQL函数现在可以通过在主查询中包含他们的SQL内联。
这通过消除每个调用的开销提升了性能。这意味着简单的SQL函数现在的行为就像宏。</p></dd><dt><span class="term"> 全面支持IPv6连接和IPv6地址数据类型
    </span></dt><dd><p>以前的版本只允许IPv4连接，IP数据类型也只支持IPv4地址。
这个版本在这些区域添加了完全的IPv6支持。</p></dd><dt><span class="term"> 主要改进SSL性能和可靠性
    </span></dt><dd><p>几个人非常了解SSL API已经彻底检查了我们的SSL代码以改善SSL键谈判和错误恢复。</p></dd><dt><span class="term"> 使得自由空间映射有效的再利用空的索引页，其他自由空间管理的改善
    </span></dt><dd><p>在以前的版本中，因为删除的行只能被索引值类似于该行以前在该页上的索引的行再次利用，
所以B-tree索引页都保留空白。在7.4中，<code class="command">VACUUM</code>
记录空的索引页，并且允许它们被任意未来的索引行重新利用。</p></dd><dt><span class="term"> SQL标准信息模式
    </span></dt><dd><p>该信息模式提供一个标准且稳定的方式访问关于在一个数据库中定义的模式对象的信息。</p></dd><dt><span class="term"> 游标更接近的符合SQL标准
    </span></dt><dd><p>命令<code class="command">FETCH</code>和<code class="command">MOVE</code>已经被彻底检查，更加符合SQL标准。</p></dd><dt><span class="term"> 游标可以在事务之外退出
    </span></dt><dd><p>这些游标也叫做可抓住的游标。</p></dd><dt><span class="term"> 新增客户端到服务器的协议
    </span></dt><dd><p>新的协议添加了错误代码，更多的状态信息，更快的启动，更好的支持二进制数据传输，
参数值从SQL命令中分离，预备语句在协议级别中有效，更干净的从<code class="command">COPY</code>
失败中恢复。服务器和客户端仍然支持老的协议。</p></dd><dt><span class="term"> <span class="application">libpq</span>和<span class="application">ECPG</span>
 应用现在是完全线程安全的
    </span></dt><dd><p>以前的<span class="application">libpq</span>版本就已经支持了线程，
这个版本通过修复一些在数据库连接启动期间使用的非线程安全的代码提高了线程安全。
<code class="command">configure</code>选项<code class="option">--enable-thread-safety</code>
必须用于启用这个特性。</p></dd><dt><span class="term"> 新增全文本索引的版本
    </span></dt><dd><p>一个新的全文本索引套件在<code class="filename">contrib/tsearch2</code>中可用。</p></dd><dt><span class="term"> 新增自动清理工具
    </span></dt><dd><p><code class="filename">contrib/autovacuum</code>中新增的自动清理工具见识数据库状态表的
<code class="command">INSERT</code>/<code class="command">UPDATE</code>/<code class="command">DELETE</code>
活动并在需要时自动清理表。</p></dd><dt><span class="term"> 改进了数组处理并嵌入服务器内核
    </span></dt><dd><p>移除了许多数组限制，并且数组表现的更加全面支持数据类型。</p></dd></dl></div></div><div class="sect2" id="idp83195712"><div class="titlepage"><div><div><h3 class="title">E.284.2. 迁移到版本 7.4</h3></div></div></div><p>想要从以前的版本迁移数据的用户需要使用<span class="application">pg_dump</span>转储/恢复。</p><p>观察下面的不兼容性：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>删除了服务器端的自动提交设置，并且在客户端应用和语言中重新实现。
服务器端的自动提交导致许多想要控制他们自己的自动提交行为的语言和应用出现问题，
所以从服务器删除自动提交并适当的添加到单独的客户端API中。</p></li><li class="listitem"><p>错误消息的表达在这个版本中已经大幅度的改变了。花费了巨大的努力使得消息更加一致和面向用户。
如果您的应用程序尝试通过分析错误消息检测不同的错误条件，
强烈建议您使用新的错误代码功能。</p></li><li class="listitem"><p>使用明确的<code class="literal">JOIN</code>语法的内连接可能表现的不一致，
因为它们现在更好的优化了。</p></li><li class="listitem"><p>一些服务器配置参数已经重命名的更加清晰了，主要是那些与记录相关的参数。</p></li><li class="listitem"><p><code class="literal">FETCH 0</code>或<code class="literal">MOVE 0</code>现在什么也不做。
在以前的版本中，<code class="literal">FETCH 0</code>将抓取所有剩余的行，
<code class="literal">MOVE 0</code>将移动到游标的最后。</p></li><li class="listitem"><p><code class="command">FETCH</code>和<code class="command">MOVE</code>现在返回实际抓取/移动的行数，
或者如果在游标的开始或结尾返回零。以前的版本将返回传递给命令的行计数，
不是实际抓取或移动的行数。</p></li><li class="listitem"><p><code class="command">COPY</code>现在可以处理使用回车键或回车键/换行符行尾序列的文件。
字面的回车键和换行不再被数据值接受；使用<code class="literal">\r</code>和<code class="literal">\n</code>替代。</p></li><li class="listitem"><p>当从类型<code class="type">char(<em class="replaceable"><code>n</code></em>)</code>到<code class="type">varchar(<em class="replaceable"><code>n</code></em>)</code>
或<code class="type">text</code>转换时，现在会去除结尾的空白。这是大多数人们一直想要实现的。</p></li><li class="listitem"><p>数据类型<code class="type">float(<em class="replaceable"><code>p</code></em>)</code>现在以二进制位数测量<em class="replaceable"><code>p</code></em>，
不是十进制位数。新的行为遵从SQL标准。</p></li><li class="listitem"><p>模糊的日期值现在必须匹配<code class="varname">datestyle</code>设置指定的顺序。
在以前的版本中，一个<code class="literal">10/20/03</code>的日期声明理解为十月中的一个日期，
即使<code class="varname">datestyle</code>声明了天在前面。如果对于当前的<code class="varname">datestyle</code>
设置来说，日期声明是无效的时7.4将抛出一个错误。</p></li><li class="listitem"><p>函数<code class="function">oidrand</code>、<code class="function">oidsrand</code>
和<code class="function">userfntest</code>已经移除了。这些函数不再有用了。</p></li><li class="listitem"><p>字符串字面值声明随时变化的日期/时间值，如<code class="literal">'now'</code>或
<code class="literal">'today'</code>在字段缺省表达式中将不再像预期的那样工作；
它们现在缺省是表创建的时间，而不是插入的时间。
应该使用像<code class="function">now()</code>、<code class="function">current_timestamp</code>或
<code class="function">current_date</code>这样的函数。</p><p>在以前的版本中，有特殊的代码，所以像<code class="literal">'now'</code>
这样的代码被解释为<code class="command">INSERT</code>时间，而不是表创建的时间，
但是这个变通并不涵盖所有的情况。版本7.4现在要求该缺省使用像
<code class="function">now()</code>或<code class="function">current_timestamp</code>这样的函数正确的定义。
这将适用于所有的情况。</p></li><li class="listitem"><p>美元符号(<code class="literal">$</code>)不再允许用于操作员名字。它反而可以成为标识符中的非首位字符。
这样做是为了提高和其他数据库系统的兼容性，和避免参数占位符
(<code class="literal">$<em class="replaceable"><code>n</code></em></code>)和操作符写的很近时的语法问题。</p></li></ul></div></div><div class="sect2" id="idp83228016"><div class="titlepage"><div><div><h3 class="title">E.284.3. 修改列表</h3></div></div></div><p>在下面你将发现版本7.4和前面的主要版本之间的详细的变化。</p><div class="sect3" id="idp83228784"><div class="titlepage"><div><div><h4 class="title">E.284.3.1. 服务器操作变化</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>允许IPv6服务器连接(Nigel Kukard, Johan Jordaan, Bruce, Tom, Kurt Roeckx, Andrew Dunstan)</p></li><li class="listitem"><p>修复SSL以干净利落的处理错误 (Nathan Mueller)</p><p>在以前的版本中，某些SSL API错误报告处理的不正确。这个版本修复了那些问题。</p></li><li class="listitem"><p>SSL协议安全和性能改善 (Sean Chittenden)</p><p>SSL键重新谈判非常频繁的发生，导致SSL性能低下。另外，改善了最初的键的处理。</p></li><li class="listitem"><p>当检测到死锁时打印锁信息 (Tom)</p><p>这允许更容易的调试死锁状况。</p></li><li class="listitem"><p>更新<code class="filename">/tmp</code>套接字修改时间，定期的避免他们的移除 (Tom)</p><p>这应该有助于防止<code class="filename">/tmp</code>目录清理管理脚本移除服务器套接字文件。</p></li><li class="listitem"><p>为macOS启用PAM (Aaron Hillegass)</p></li><li class="listitem"><p>使得B-tree索引完全的WAL安全 (Tom)</p><p>在以前的版本中，在某些稀有情况下，服务器崩溃会导致B-tree索引损坏。
这个版本删除了最后的几个稀有情况。</p></li><li class="listitem"><p>允许B-tree索引压缩和空页面重新利用 (Tom)</p></li><li class="listitem"><p>在第一个根页面分裂期间修复不一致的索引查找 (Tom)</p><p>在以前的版本中，当一个页面索引分裂为两个页面时，另一个数据库会话会在短期内看不到索引项。
这个版本修复了这个稀有的失败情况。</p></li><li class="listitem"><p>改善自由空间映射分配逻辑 (Tom)</p></li><li class="listitem"><p>在服务器重启时保留自由空间信息 (Tom)</p><p>在以前的版本中，当主进程停止时，自由空间映射是不保存的，
所以新启动的服务器没有自由空间信息。这个版本保存了自由空间映射，
并且当服务器重新启动时重新加载它。</p></li><li class="listitem"><p>添加开始时间到<code class="literal">pg_stat_activity</code> (Neil)</p></li><li class="listitem"><p>新增代码检测损坏的磁盘页；删除<code class="varname">zero_damaged_pages</code> (Tom)</p></li><li class="listitem"><p>新增客户端/服务器协议：更快、没有用户名长度限制、允许从<code class="command">COPY</code>中干净的退出 (Tom)</p></li><li class="listitem"><p>添加事务状态、表ID、字段ID到客户端/服务器协议 (Tom)</p></li><li class="listitem"><p>添加二进制I/O到客户端/服务器协议 (Tom)</p></li><li class="listitem"><p>删除自动提交服务器设置；移动到客户端应用 (Tom)</p></li><li class="listitem"><p>新的错误消息用词、错误代码和三个层次的错误详情 (Tom, Joe, Peter)</p></li></ul></div></div><div class="sect3" id="idp83243872"><div class="titlepage"><div><div><h4 class="title">E.284.3.2. 性能改进</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>为<code class="literal">GROUP BY</code>聚合添加散列 (Tom)</p></li><li class="listitem"><p>使得嵌套循环连接关于多字段索引更加智能 (Tom)</p></li><li class="listitem"><p>允许多键的哈希连接 (Tom)</p></li><li class="listitem"><p>提高常量折叠 (Tom)</p></li><li class="listitem"><p>添加内联简单的SQL函数的能力 (Tom)</p></li><li class="listitem"><p>减少使用复杂函数的查询的内存使用 (Tom)</p><p>在以前的版本中，返回存储器配置的函数将直到查询完成之后才释放。
这个版本允许调用完成之后就释放存储器配置函数，减少函数使用的总内存。</p></li><li class="listitem"><p>提高GEQO优化器性能 (Tom)</p><p>这个版本修复了几个GEQO优化器管理潜在查询路径的低效率。</p></li><li class="listitem"><p>允许通过哈希表处理<code class="literal">IN</code>/<code class="literal">NOT IN</code> (Tom)</p></li><li class="listitem"><p>提高<code class="literal">NOT IN (<em class="replaceable"><code>subquery</code></em>)</code>性能 (Tom)</p></li><li class="listitem"><p>允许大多数<code class="literal">IN</code>子查询作为连接处理 (Tom)</p></li><li class="listitem"><p>模式匹配操作可以使用索引，无视区域设置 (Peter)</p><p>非ASCII区域设置无法为<code class="literal">LIKE</code>比较使用标准的索引。
这个版本添加了为<code class="literal">LIKE</code>创建特殊索引的方法。</p></li><li class="listitem"><p>允许主进程使用<code class="varname">preload_libraries</code>预加载库 (Joe)</p><p>对于需要很长时间加载的共享库，这个选项是可用的，
这样库可以在主进程中预加载并被所有的数据库会话继承。</p></li><li class="listitem"><p>改善优化器成本计算，尤其是子查询 (Tom)</p></li><li class="listitem"><p>避免子查询<code class="literal">ORDER BY</code>匹配上一级查询时的排序 (Tom)</p></li><li class="listitem"><p>推断<code class="literal">WHERE a.x = b.y AND b.y = 42</code>的意思也为<code class="literal">a.x = 42</code> (Tom)</p></li><li class="listitem"><p>允许在复杂连接上哈希/合并连接 (Tom)</p></li><li class="listitem"><p>允许为更多数据类型哈希连接 (Tom)</p></li><li class="listitem"><p>允许明确的内连接最优化，禁用<code class="varname">join_collapse_limit</code> (Tom)</p></li><li class="listitem"><p>添加参数<code class="varname">from_collapse_limit</code>控制子查询到连接的转换 (Tom)</p></li><li class="listitem"><p>使用更快更强大的Tcl正则表达式代码 (Henry Spencer, Tom)</p></li><li class="listitem"><p>在优化器中使用位映射关系设置 (Tom)</p></li><li class="listitem"><p>改善连接启动时间 (Tom)</p><p>新的客户端/服务器协议需要较少的网络数据包开始一个数据库会话。</p></li><li class="listitem"><p>提高触发器/约束性能 (Stephan)</p></li><li class="listitem"><p>提高<code class="literal">col IN (const, const, const, ...)</code>的速度 (Tom)</p></li><li class="listitem"><p>修复在稀有情况下损坏的哈希索引 (Tom)</p></li><li class="listitem"><p>改善哈希索引并发性和速度 (Tom)</p><p>以前版本的哈希索引性能欠佳，尤其是高并发性的情况下。
这个版本修复了这个问题，并且开发组对于报告B-tree和哈希索引性能的比较是有兴趣的。</p></li><li class="listitem"><p>在32字节的边界上排列共享的缓冲区，改善拷贝速度 (Manfred Spraul)</p><p>当地址是32字节对齐的时，确定的CPU执行数据拷贝更快。</p></li><li class="listitem"><p>重新使用数据类型<code class="type">numeric</code>，以获取更好的性能 (Tom)</p><p><code class="type">numeric</code>过去是基于100存储。新的代码基于10000，大大的改善性能。</p></li></ul></div></div><div class="sect3" id="idp83270224"><div class="titlepage"><div><div><h4 class="title">E.284.3.3. 服务器配置变化</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>重命名服务器参数<code class="varname">server_min_messages</code>为<code class="varname">log_min_messages</code> (Bruce)</p><p>这样做了之后大部分控制服务器日志的参数以<code class="literal">log_</code>开始。</p></li><li class="listitem"><p>重命名<code class="varname">show_*_stats</code>为<code class="varname">log_*_stats</code> (Bruce)</p></li><li class="listitem"><p>重命名<code class="varname">show_source_port</code>为<code class="varname">log_source_port</code> (Bruce)</p></li><li class="listitem"><p>重命名<code class="varname">hostname_lookup</code>为<code class="varname">log_hostname</code> (Bruce)</p></li><li class="listitem"><p>添加<code class="varname">checkpoint_warning</code>警告过多的检查点 (Bruce)</p><p>在以前的版本中，很难判断检查点是否发生的太过频繁。
这个特性当过多的检查点发生时向服务器日志添加一个警告。</p></li><li class="listitem"><p>为本地化新增只读服务器参数 (Tom)</p></li><li class="listitem"><p>改变调试服务器日志消息使输出<code class="literal">DEBUG</code>而不是<code class="literal">LOG</code> (Bruce)</p></li><li class="listitem"><p>阻止服务器日志变量被非超级用户关闭 (Bruce)</p><p>这是一个安全特性，所以非超级用户不能禁用管理员启用的日志。</p></li><li class="listitem"><p><code class="varname">log_min_messages</code>/<code class="varname">client_min_messages</code>
现在控制<code class="varname">debug_*</code>输出 (Bruce)</p><p>这集中了客户端调试信息，所以所有的调试输出都可以发送到客户端和服务器日志。</p></li><li class="listitem"><p>添加macOS集合点服务器支持 (Chris Campbell)</p><p>这允许Mac OS X主机为可用的<span class="productname">PostgreSQL</span>服务器查询网络。</p></li><li class="listitem"><p>添加使用<code class="varname">log_min_duration_statement</code>只打印缓慢的语句的能力 (Christopher)</p><p>这是一个经常请求的调试特性，允许管理员在他们的服务器日志中只看到缓慢的查询。</p></li><li class="listitem"><p>允许<code class="filename">pg_hba.conf</code>在CIDR格式中接受子网掩码 (Andrew Dunstan)</p><p>这允许管理员在<code class="filename">pg_hba.conf</code>中合并主机IP地址和子网掩码字段为一个CIDR字段。</p></li><li class="listitem"><p>新增只读参数<code class="varname">is_superuser</code> (Tom)</p></li><li class="listitem"><p>新增参数<code class="varname">log_error_verbosity</code>控制错误详情 (Tom)</p><p>与新的错误报告特性一起工作，提供额外的错误消息，如提示、文件名和行号。</p></li><li class="listitem"><p><code class="literal">postgres --describe-config</code>现在转储服务器配置变量 (Aizaz Ahmed, Peter)</p><p>这个选项对于需要知道配置变量名和它们的最小、最大、缺省和描述的管理工具来说是有用的。</p></li><li class="listitem"><p>在<code class="literal">pg_settings</code>中添加新的字段：
<code class="literal">context</code>, <code class="literal">type</code>, <code class="literal">source</code>,
 <code class="literal">min_val</code>, <code class="literal">max_val</code> (Joe)</p></li><li class="listitem"><p>如果可能，使<code class="varname">shared_buffers</code>缺省为1000，<code class="varname">max_connections</code>缺省为100 (Tom)</p><p>以前的版本的共享缓冲区缺省为64，所以<span class="productname">PostgreSQL</span>
甚至在非常老的系统上也能启动。
这个版本测试平台允许的共享内存的数量并且如果可以的话选择更加合理的缺省值。
当然，仍然鼓励用户评估他们的资源负载，并且相应的设定<code class="varname">shared_buffers</code>的尺寸。</p></li><li class="listitem"><p>新增<code class="filename">pg_hba.conf</code>记录类型<code class="literal">hostnossl</code>
以阻止SSL连接 （Jon Jensen）</p><p>在以前的版本中，如果客户端和服务器都支持SSL，那么是没有办法阻止SSL连接的。
这个选项允许阻止SSL连接。</p></li><li class="listitem"><p>删除参数<code class="varname">geqo_random_seed</code> (Tom)</p></li><li class="listitem"><p>添加服务器参数<code class="varname">regex_flavor</code>，控制正则表达式处理 (Tom)</p></li><li class="listitem"><p>使<code class="command">pg_ctl</code>更好的处理非标准的端口 (Greg)</p></li></ul></div></div><div class="sect3" id="idp83305232"><div class="titlepage"><div><div><h4 class="title">E.284.3.4. 查询的变化</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>新增SQL标准信息模式 (Peter)</p></li><li class="listitem"><p>添加只读事务 (Peter)</p></li><li class="listitem"><p>在外键违反信息中输出键名和值 (Dmitry Tkach)</p></li><li class="listitem"><p>允许用户在<code class="literal">pg_stat_activity</code>中查看他们自己的查询 (Kevin Brown)</p><p>在以前的版本中，只有超级用户可以使用<code class="literal">pg_stat_activity</code>查看查询字符串。
现在普通用户也可以查看他们自己的查询字符串了。</p></li><li class="listitem"><p>修复子查询中的聚合以匹配SQL标准 (Tom)</p><p>SQL标准认为在一个嵌套的子查询中出现的聚合函数，如果它的参数只包含外部查询的变量，
那么它属于外部的查询。以前的<span class="productname">PostgreSQL</span>
版本没有正确的处理这点。</p></li><li class="listitem"><p>添加选项阻止查询中引用的表的自动添加 (Nigel J. Andrews)</p><p>缺省的，查询中提到的表如果没有在<code class="literal">FROM</code>子句中则自动添加进去。
这是和历史的<span class="productname">POSTGRES</span>行为兼容的，但是违反SQL标准。
这个选项允许选择标准兼容的行为。</p></li><li class="listitem"><p>允许<code class="literal">UPDATE ... SET col = DEFAULT</code> (Rod)</p><p>这允许<code class="command">UPDATE</code>设置一个字段为它声明的缺省值。</p></li><li class="listitem"><p>允许在<code class="literal">LIMIT</code>/<code class="literal">OFFSET</code>中使用表达式 (Tom)</p><p>在以前的版本中，<code class="literal">LIMIT</code>/<code class="literal">OFFSET</code>只能使用约束，不能使用表达式。</p></li><li class="listitem"><p>实现了<code class="literal">CREATE TABLE AS EXECUTE</code> (Neil, Peter)</p></li></ul></div></div><div class="sect3" id="idp83320480"><div class="titlepage"><div><div><h4 class="title">E.284.3.5. 对象操作的改变</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>使<code class="command">CREATE SEQUENCE</code>语法更加符合SQL:2003 (Neil)</p></li><li class="listitem"><p>添加语句级别的触发器 (Neil)</p><p>虽然这允许触发器在语句结束时触发，但是它不允许触发器访问语句修改的所有行。
这个能力是为未来的版本计划的。</p></li><li class="listitem"><p>为域添加检查约束 (Rod)</p><p>通过允许域使用检查约束，大大的增加了域的有用性。</p></li><li class="listitem"><p>新增<code class="command">ALTER DOMAIN</code> (Rod)</p><p>这允许操作现有的域。</p></li><li class="listitem"><p>修复几个零字段表错误 (Tom)</p><p><span class="productname">PostgreSQL</span>支持零字段表。这修复了各种使用这样的表时发生的错误。</p></li><li class="listitem"><p>让<code class="literal">ALTER TABLE ... ADD PRIMARY KEY</code>添加非空约束 (Rod)</p><p>在以前的版本中，<code class="literal">ALTER TABLE ... ADD PRIMARY KEY</code>
将添加一个唯一索引，但是不添加非空约束。这在这个版本中修复了。</p></li><li class="listitem"><p>添加了<code class="literal">ALTER TABLE ... WITHOUT OIDS</code> (Rod)</p><p>这允许控制无论新行还是更新的行都将有一个OID字段。这对于节省存储空间非常有用。</p></li><li class="listitem"><p>添加<code class="literal">ALTER SEQUENCE</code>修改最小、最大、增量、缓存、循环值 (Rod)</p></li><li class="listitem"><p>添加了<code class="literal">ALTER TABLE ... CLUSTER ON</code> (Alvaro Herrera)</p><p>这个命令被<code class="command">pg_dump</code>使用，为每个以前集群的表记录集群字段。
这个信息被数据库范围的集群使用以集群所有以前集群的表。</p></li><li class="listitem"><p>为域增加自动类型转换 (Rod, Tom)</p></li><li class="listitem"><p>允许美元符号出现在标识符中，除了作为第一个字符 (Tom)</p></li><li class="listitem"><p>不允许美元符号出现在操作符名中，所以<code class="literal">x=$1</code>工作 (Tom)</p></li><li class="listitem"><p>允许使用<code class="literal">LIKE <em class="replaceable"><code>subtable</code></em></code>拷贝表模式，
这也是SQL:2003的特性<code class="literal">INCLUDING DEFAULTS</code> (Rod)</p></li><li class="listitem"><p>添加<code class="literal">WITH GRANT OPTION</code>子句到<code class="command">GRANT</code> (Peter)</p><p>这启用了<code class="command">GRANT</code>，给予其他用户在对象上授予权限的能力。</p></li></ul></div></div><div class="sect3" id="idp83341184"><div class="titlepage"><div><div><h4 class="title">E.284.3.6. 实用命令的改变</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>为临时表添加<code class="literal">ON COMMIT</code>子句到<code class="command">CREATE TABLE</code> (Gavin)</p><p>这添加了在事务提交时表被删除或删除所有行的能力。</p></li><li class="listitem"><p>允许游标使用<code class="literal">WITH HOLD</code>在事务之外 (Neil)</p><p>在以前的版本中，游标在创建它们的事务的结束删除。
现在游标可以使用<code class="literal">WITH HOLD</code>选项创建，
这允许它们在创建它们的事务提交之后仍然可以被访问。</p></li><li class="listitem"><p><code class="literal">FETCH 0</code>和<code class="literal">MOVE 0 </code>现在什么也不做 (Bruce)</p><p>在以前的版本中，<code class="literal">FETCH 0</code>抓取所有现有的行，
<code class="literal">MOVE 0</code>移动到游标的最后。</p></li><li class="listitem"><p>使<code class="command">FETCH</code>和<code class="command">MOVE</code>
返回抓取/移动的行数，或者如果在游标的开始/结束则为零，按照SQL标准 (Bruce)</p><p>在以前的版本中，<code class="command">FETCH</code>和<code class="command">MOVE</code>
返回的行计数不能精确的反映处理的行数。</p></li><li class="listitem"><p>正确的处理带有游标的<code class="literal">SCROLL</code>，或者报告一个错误 (Neil)</p><p>允许到某种查询的随机访问（前向和后向滚动）不能不带有一些额外的工作完成。
如果<code class="literal">SCROLL</code>在游标创建时指定，这个额外的工作将被执行。
此外，如果游标带有<code class="literal">NO SCROLL</code>创建，那么不允许随机访问。</p></li><li class="listitem"><p>为<code class="command">FETCH</code>和<code class="command">MOVE</code>实现了SQL兼容的选项
<code class="literal">FIRST</code>、<code class="literal">LAST</code>、<code class="literal">ABSOLUTE <em class="replaceable"><code>n</code></em></code>、
<code class="literal">RELATIVE <em class="replaceable"><code>n</code></em></code> (Tom)</p></li><li class="listitem"><p>允许在<code class="command">DECLARE CURSOR</code>上<code class="command">EXPLAIN</code> (Tom)</p></li><li class="listitem"><p>缺省允许<code class="command">CLUSTER</code>使用标记为先于集群的索引 (Alvaro Herrera)</p></li><li class="listitem"><p>允许<code class="command">CLUSTER</code>集群所有的表 (Alvaro Herrera)</p><p>这允许一个数据库中所有以前集群的表用一个命令就能重新集群。</p></li><li class="listitem"><p>阻止在局部索引上<code class="command">CLUSTER</code> (Tom)</p></li><li class="listitem"><p>在<code class="command">COPY</code>文件中允许DOS和Mac行尾结束符 (Bruce)</p></li><li class="listitem"><p>不允许文字的回车作为一个数据值，仍然允许反斜杠回车和<code class="literal">\r</code> (Bruce)</p></li><li class="listitem"><p><code class="command">COPY</code>改变 (二进制, <code class="literal">\.</code>) (Tom)</p></li><li class="listitem"><p>干净的从<code class="command">COPY</code>失败中恢复 (Tom)</p></li><li class="listitem"><p>阻止<code class="command">COPY</code>中可能的内存泄露 (Tom)</p></li><li class="listitem"><p>使得<code class="command">TRUNCATE</code>事务安全 (Rod)</p><p><code class="command">TRUNCATE</code>现在可以在一个事务内部使用了。如果该事务退出，
<code class="command">TRUNCATE</code>所做的改变自动回滚。</p></li><li class="listitem"><p>允许像<code class="command">FETCH</code>和<code class="command">EXPLAIN</code>这样的实用命令预备/捆绑 (Tom)</p></li><li class="listitem"><p>添加了<code class="command">EXPLAIN EXECUTE</code> (Neil)</p></li><li class="listitem"><p>通过减少WAL流量提高索引上的<code class="command">VACUUM</code>性能 (Tom)</p></li><li class="listitem"><p>功能性索引已经泛化为表达式上的索引 (Tom)</p><p>在以前的版本中，功能性索引只支持一个简单的应用于一个或更多字段名的功能。
这个版本允许任意类型的标量表达式。</p></li><li class="listitem"><p>让<code class="command">SHOW TRANSACTION ISOLATION</code>匹配输入到
<code class="command">SET TRANSACTION ISOLATION</code> (Tom)</p></li><li class="listitem"><p>让<code class="command">COMMENT ON DATABASE</code>在非局部的数据库上生成一个警告，而不是一个错误 (Rod)</p><p>数据库注释存储于数据库本地表中，所以在数据库上的注释必须存储于每个数据库中。</p></li><li class="listitem"><p>提高<code class="command">LISTEN</code>/<code class="command">NOTIFY</code>的可靠性 (Tom)</p></li><li class="listitem"><p>允许<code class="command">REINDEX</code>可靠的重建非共享的系统目录索引 (Tom)</p><p>这允许系统表不用单独会话的要求就能重建索引，而这在以前的版本中是必须的。
现在需要单独会话重建索引的仅有的表是全局系统表<code class="literal">pg_database</code>、
<code class="literal">pg_shadow</code>和<code class="literal">pg_group</code>。</p></li></ul></div></div><div class="sect3" id="idp83390848"><div class="titlepage"><div><div><h4 class="title">E.284.3.7. 数据类型和函数的变化</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>新增服务器参数<code class="varname">extra_float_digits</code>，
控制浮点数的精度显示 (Pedro Ferreira, Tom)</p><p>控制引起回归测试问题的输出精度。</p></li><li class="listitem"><p>允许<code class="literal">+1300</code>作为一个数字时区说明符，FJST (Tom)</p></li><li class="listitem"><p>删除很少使用的功能<code class="function">oidrand</code>、<code class="function">oidsrand</code>和<code class="function">userfntest</code> (Neil)</p></li><li class="listitem"><p>添加<code class="function">md5()</code>函数到主服务器，已经存在于<code class="filename">contrib/pgcrypto</code>中 (Joe)</p><p>经常请求MD5函数。对于更复杂的加密要求，使用<code class="filename">contrib/pgcrypto</code>。</p></li><li class="listitem"><p>增加<code class="type">timestamp</code>的数据范围 (John Cochran)</p></li><li class="listitem"><p>更改<code class="literal">EXTRACT(EPOCH FROM timestamp)</code>，
这样<code class="type">timestamp without time zone</code>假设为本地时间，而不是GMT (Tom)</p></li><li class="listitem"><p>在操作系统不阻止除以零的情况下阻止被零除 (Tom)</p></li><li class="listitem"><p>改变<code class="type">numeric</code>数据类型内部基于10000 (Tom)</p></li><li class="listitem"><p>新增<code class="function">hostmask()</code>函数 (Greg Wickham)</p></li><li class="listitem"><p>修复<code class="function">to_char()</code>和<code class="function">to_timestamp()</code> (Karel)</p></li><li class="listitem"><p>允许函数接受任意参数数据类型并返回任意数据类型，使用<code class="type">anyelement</code>
和<code class="type">anyarray</code> (Joe)</p><p>这允许函数的创建可以与任意数据类型一起工作。</p></li><li class="listitem"><p>数组现在可以指定为<code class="literal">ARRAY[1,2,3]</code>、<code class="literal">ARRAY[['a','b'],['c','d']]</code>
或<code class="literal">ARRAY[ARRAY[ARRAY[2]]]</code> (Joe)</p></li><li class="listitem"><p>允许适当的比较数组，包括<code class="literal">ORDER BY</code>和<code class="literal">DISTINCT</code>
支持 (Joe)</p></li><li class="listitem"><p>允许在数组字段上索引 (Joe)</p></li><li class="listitem"><p>允许用<code class="literal">||</code>串联数组 (Joe)</p></li><li class="listitem"><p>允许<code class="literal">WHERE</code>限制<code class="literal"><em class="replaceable"><code>expr</code></em> 
<em class="replaceable"><code>op</code></em> ANY/SOME/ALL (<em class="replaceable"><code>array_expr</code></em>)</code> (Joe)</p><p>这允许数组表现的像值的列表，对于像
<code class="literal">SELECT * FROM tab WHERE col IN (array_val)</code>这样的目的。</p></li><li class="listitem"><p>新增数组函数<code class="function">array_append</code>,
     <code class="function">array_cat</code>, <code class="function">array_lower</code>,
     <code class="function">array_prepend</code>, <code class="function">array_to_string</code>,
     <code class="function">array_upper</code>, <code class="function">string_to_array</code> (Joe)</p></li><li class="listitem"><p>允许用户定义的聚合使用多态函数 (Joe)</p></li><li class="listitem"><p>允许分配给空数组 (Joe)</p></li><li class="listitem"><p>允许60在<code class="type">time</code>、<code class="type">timestamp</code>和<code class="type">interval</code>
输入值的秒字段 (Tom)</p><p>闰秒需要60秒。</p></li><li class="listitem"><p>允许<code class="type">cidr</code>数据类型被转换为<code class="type">text</code> (Tom)</p></li><li class="listitem"><p>不允许无效的时区名出现在SET TIMEZONE中</p></li><li class="listitem"><p>当<code class="type">char</code>转换为<code class="type">varchar</code>或<code class="type">text</code>时，去掉尾随的空白 (Tom)</p></li><li class="listitem"><p>使得<code class="type">float(<em class="replaceable"><code>p</code></em>)</code>以二进制数字测量精度<em class="replaceable"><code>p</code></em>，
而不是十进制数字 (Tom)</p></li><li class="listitem"><p>添加IPv6支持到<code class="type">inet</code>和<code class="type">cidr</code>数据类型 (Michael Graff)</p></li><li class="listitem"><p>添加<code class="function">family()</code>函数报告地址是IPv4还是IPv6 (Michael Graff)</p></li><li class="listitem"><p>让<code class="literal">SHOW datestyle</code>产生的输出类似于<code class="literal">SET datestyle</code>
使用的 (Tom)</p></li><li class="listitem"><p>让<code class="literal">EXTRACT(TIMEZONE)</code>和<code class="literal">SET/SHOW TIME ZONE</code>
遵从SQL时区偏移量符号的惯例，如正数为UTC的东边 (Tom)</p></li><li class="listitem"><p>修复<code class="literal">date_trunc('quarter', ...)</code> (Böjthe Zoltán)</p><p>以前的版本为这个函数调用返回不正确的值。</p></li><li class="listitem"><p>让<code class="function">initcap()</code>与Oracle更加兼容 (Mike Nolan)</p><p><code class="function">initcap()</code>现在大写任何出现在非字母数字字符后面的字母，
不只是在空白后面的字母。</p></li><li class="listitem"><p>日期值只允许<code class="varname">datestyle</code>字段顺序，不以ISO-8601格式 (Greg)</p></li><li class="listitem"><p>添加新的<code class="varname">datestyle</code>值<code class="literal">MDY</code>、<code class="literal">DMY</code>
和<code class="literal">YMD</code>来设置输入字段顺序；
遵从<code class="literal">US</code>和<code class="literal">European</code>的向后兼容性 (Tom)</p></li><li class="listitem"><p>像<code class="literal">'now'</code>和<code class="literal">'today'</code>
这样的字符串字面值不再作为一个字段的缺省。
使用<code class="function">now()</code>、<code class="function">current_timestamp</code>
这样的函数代替。（改变需要预备语句） (Tom)</p></li><li class="listitem"><p>在<code class="function">min()</code>/<code class="function">max()</code>中将NaN看做大于任意其他值 (Tom)</p><p>对于大多数目的，NaN早已排序在普通数值的后面，但是
<code class="function">min()</code>和<code class="function">max()</code>没有获得这个权利。</p></li><li class="listitem"><p>阻止间隔抑制<code class="literal">:00</code>秒的显示</p></li><li class="listitem"><p>新增函数<code class="function">pg_get_triggerdef(prettyprint)</code>
和<code class="function">pg_conversion_is_visible()</code> (Christopher)</p></li><li class="listitem"><p>允许指定时间为<code class="literal">040506</code>或<code class="literal">0405</code> (Tom)</p></li><li class="listitem"><p>输入日期顺序现在必须为<code class="literal">YYYY-MM-DD</code>（年为4位数）或匹配<code class="varname">datestyle</code></p></li><li class="listitem"><p>让<code class="function">pg_get_constraintdef</code>支持唯一、主键和检查约束 (Christopher)</p></li></ul></div></div><div class="sect3" id="idp83461504"><div class="titlepage"><div><div><h4 class="title">E.284.3.8. 服务器端语言的变化</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>当<code class="literal">RETURN NEXT</code>用在零行字段变量上时阻止PL/pgSQL崩溃 (Tom)</p></li><li class="listitem"><p>让PL/Python的<code class="function">spi_execute</code>接口正确的处理空值 (Andrew Bosma)</p></li><li class="listitem"><p>允许PL/pgSQL不用<code class="literal">%ROWTYPE</code>声明复合类型的变量 (Tom)</p></li><li class="listitem"><p>修复PL/Python的<code class="function">_quote()</code>函数，以处理大的整数</p></li><li class="listitem"><p>使PL/Python语言不可信，现在称为<code class="literal">plpythonu</code> (Kevin Jacobs, Tom)</p><p>Python语言不再支持受限制的执行环境，所以删除了受信任的PL/Python版本。
如果这个情况改变了，将阅读非超级用户可以使用的PL/Python的一个版本。</p></li><li class="listitem"><p>允许多态的PL/Python函数 (Joe, Tom)</p></li><li class="listitem"><p>允许多态的SQL函数 (Joe)</p></li><li class="listitem"><p>用对多态性的全面支持改进PL/pgSQL中编译的函数缓存机制 (Joe)</p></li><li class="listitem"><p>在PL/pgSQL中添加新的参数<code class="literal">$0</code>，表示该函数的实际返回类型 (Joe)</p></li><li class="listitem"><p>允许PL/Tcl和PL/Python在多重表上使用相同的触发器 (Tom)</p></li><li class="listitem"><p>修复PL/Tcl的<code class="function">spi_prepare</code>以在参数类型列表中接受完全限定的类型名 (Jan)</p></li></ul></div></div><div class="sect3" id="idp83472704"><div class="titlepage"><div><div><h4 class="title">E.284.3.9. psql的变化</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加<code class="literal">\pset pager always</code>以总是使用pager (Greg)</p><p>强制使用pager，即使行数少于屏幕高度也是一样。这个对于有几个屏幕的行有帮助。</p></li><li class="listitem"><p>改善tab补齐 (Rod, Ross Reedstrom, Ian Barwick)</p></li><li class="listitem"><p>重新排序<code class="literal">\?</code>帮助分组 (Harald Armin Massa, Bruce)</p></li><li class="listitem"><p>添加反斜杠命令列出模式、计算和转换 (Christopher)</p></li><li class="listitem"><p><code class="command">\encoding</code>现在根据服务器参数<code class="varname">client_encoding</code>变化 (Tom)</p><p>在以前的版本中，<code class="command">\encoding</code>不知道使用
<code class="literal">SET client_encoding</code>所做的编码改变。</p></li><li class="listitem"><p>将编辑器缓冲区保存到readline历史 (Ross)</p><p>当使用<code class="command">\e</code>编辑一个查询时，结果被保存到readline历史，以使用向上箭头键检索。</p></li><li class="listitem"><p>改善<code class="command">\d</code>的显示 (Christopher)</p></li><li class="listitem"><p>提高HTML模式，使其更加符合标准 (Greg)</p></li><li class="listitem"><p>新增<code class="command">\set AUTOCOMMIT off</code>能力 (Tom)</p><p>这取代了删除的服务器参数 <code class="varname">autocommit</code>。</p></li><li class="listitem"><p>新增<code class="command">\set VERBOSITY</code>控制错误详情 (Tom)</p><p>这个控制新的错误报告细节。</p></li><li class="listitem"><p>新增提示转义序列<code class="literal">%x</code>，显示事务状态 (Tom)</p></li><li class="listitem"><p><span class="application">psql</span>的长选项现在在所有平台上可用</p></li></ul></div></div><div class="sect3" id="idp83488592"><div class="titlepage"><div><div><h4 class="title">E.284.3.10. pg_dump的变化</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>多重pg_dump修复，包括tar格式和大对象</p></li><li class="listitem"><p>允许pg_dump转储指定的模式 (Neil)</p></li><li class="listitem"><p>让pg_dump保存字段存储特性 (Christopher)</p><p>这保存了<code class="literal">ALTER TABLE ... SET STORAGE</code>信息。</p></li><li class="listitem"><p>使pg_dump保存<code class="command">CLUSTER</code>特性 (Christopher)</p></li><li class="listitem"><p>让pg_dumpall使用<code class="command">GRANT</code>/<code class="command">REVOKE</code>转储数据库级别的权限 (Tom)</p></li><li class="listitem"><p>允许pg_dumpall支持pg_dump的选项<code class="option">-a</code>、<code class="option">-s</code>、<code class="option">-x</code> (Tom)</p></li><li class="listitem"><p>阻止pg_dump小写在命令行中指定的标识符 (Tom)</p></li><li class="listitem"><p>pg_dump选项<code class="option">--use-set-session-authorization</code>
和<code class="option">--no-reconnect</code>现在什么也不做，
所有转储使用<code class="command">SET SESSION AUTHORIZATION</code></p><p>pg_dump不再重新连接到切换的用户，但是反而总是使用<code class="command">SET SESSION AUTHORIZATION</code>。
这将减少在恢复时的口令提示。</p></li><li class="listitem"><p><span class="application">pg_dump</span>的长选项现在在所有平台上可用</p><p><span class="productname">PostgreSQL</span>现在包括它自己的长选项处理例程。</p></li></ul></div></div><div class="sect3" id="idp83501664"><div class="titlepage"><div><div><h4 class="title">E.284.3.11. libpq的变化</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加函数<code class="function">PQfreemem</code>在Windows上释放内存，
建议<code class="command">NOTIFY</code> (Bruce)</p><p>Windows要求在库中分配的内存通过在相同库中的一个函数释放，因此
<code class="function">free()</code>并不释放libpq分配的内存。
<code class="function">PQfreemem</code>是释放libpq内存的适当的方式，
尤其是在Windows上，也推荐在其他平台上使用。</p></li><li class="listitem"><p>文档服务能力，并且添加了样本文件 (Bruce)</p><p>这允许客户查看客户端机器上中心文件的连接信息。</p></li><li class="listitem"><p>让<code class="function">PQsetdbLogin</code>有和<code class="function">PQconnectdb</code>
相同的缺省 (Tom)</p></li><li class="listitem"><p>当结果集太大时，允许libpq彻底的失败 (Tom)</p></li><li class="listitem"><p>提高函数<code class="function">PQunescapeBytea</code>的性能 (Ben Lamb)</p></li><li class="listitem"><p>允许线程安全的libpq带有<code class="filename">configure</code>选项
<code class="option">--enable-thread-safety</code> (Lee Kindness, Philip Yarra)</p></li><li class="listitem"><p>允许函数<code class="function">pqInternalNotice</code>接受一个格式字符串和参数，
而不只是一个预定义格式的信息 (Tom, Sean Chittenden)</p></li><li class="listitem"><p>用<code class="literal">sslmode</code>值<code class="literal">disable</code>、<code class="literal">allow</code>、
<code class="literal">prefer</code>和<code class="literal">require</code>
控制SSL协商 (Jon Jensen)</p></li><li class="listitem"><p>允许新的错误代码和文本级别 (Tom)</p></li><li class="listitem"><p>允许访问基础表和查询结果的字段 (Tom)</p><p>这对于想要知道和指定结果集相关的基础表和字段的查询生成器应用是有用的。</p></li><li class="listitem"><p>允许访问当前事务状态 (Tom)</p></li><li class="listitem"><p>添加传递二进制数据直接到服务器的能力 (Tom)</p></li><li class="listitem"><p>添加函数<code class="function">PQexecPrepared</code>和<code class="function">PQsendQueryPrepared</code>，
执行以前预备语句的绑定/执行 (Tom)</p></li></ul></div></div><div class="sect3" id="idp83521344"><div class="titlepage"><div><div><h4 class="title">E.284.3.12. JDBC的变化</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>允许在可更新的结果集上<code class="function">setNull</code></p></li><li class="listitem"><p>允许在预备语句上<code class="function">executeBatch</code> (Barry)</p></li><li class="listitem"><p>支持SSL连接 (Barry)</p></li><li class="listitem"><p>在结果集中处理模式名 (Paul Sorenson)</p></li><li class="listitem"><p>添加refcursor支持 (Nic Ferrier)</p></li></ul></div></div><div class="sect3" id="idp83525344"><div class="titlepage"><div><div><h4 class="title">E.284.3.13. 其他接口的变化</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>在libpgtcl关闭期间阻止可能的内存泄露或内核转储 (Tom)</p></li><li class="listitem"><p>添加到ECPG的Informix兼容性 (Michael)</p><p>这允许ECPG处理用某些Informix扩展写的嵌入的C程序。</p></li><li class="listitem"><p>为Informix添加定长的类型<code class="type">decimal</code>到ECPG (Michael)</p></li><li class="listitem"><p>允许线程安全的嵌入式SQL程序带有<code class="filename">configure</code>选项
<code class="option">--enable-thread-safety</code> (Lee Kindness, Bruce)</p><p>这允许同一时间多线程访问数据库。</p></li><li class="listitem"><p>移动Python客户端PyGreSQL到<a class="ulink" href="http://www.pygresql.org" target="_top">http://www.pygresql.org</a> (Marc)</p></li></ul></div></div><div class="sect3" id="idp83530944"><div class="titlepage"><div><div><h4 class="title">E.284.3.14. 源代码的变化</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>阻止对单独平台几何回归结果文件的需要 (Tom)</p></li><li class="listitem"><p>改进PPC的锁定原语 (Reinhard Max)</p></li><li class="listitem"><p>新增函数<code class="function">palloc0</code>分配和清理内存 (Bruce)</p></li><li class="listitem"><p>为s390x CPU (64位)修复锁定代码 (Tom)</p></li><li class="listitem"><p>允许OpenBSD使用局部鉴别凭证 (William Ahern)</p></li><li class="listitem"><p>使查询规划树对于执行者是只读的 (Tom)</p></li><li class="listitem"><p>添加macOS启动脚本 (David Wheeler)</p></li><li class="listitem"><p>允许libpq用Borland C++编译器编译 (Lester Godwin, Karl Waclawek)</p></li><li class="listitem"><p>如果需要，使用我们自己的<code class="function">getopt_long()</code>版本 (Peter)</p></li><li class="listitem"><p>转换管理脚本为C (Peter)</p></li><li class="listitem"><p>如果从CVS编译，Bison &gt;= 1.85现在需要建立<span class="productname">PostgreSQL</span>语法</p></li><li class="listitem"><p>合并文档到一本书中 (Peter)</p></li><li class="listitem"><p>添加Windows兼容性函数 (Bruce)</p></li><li class="listitem"><p>允许客户端接口在MinGW下编译 (Bruce)</p></li><li class="listitem"><p>为错误报告新增<code class="function">ereport()</code>函数 (Tom)</p></li><li class="listitem"><p>在Linux上支持Intel编译器 (Peter)</p></li><li class="listitem"><p>改善Linux启动脚本 (Slawomir Sudnik, Darko Prenosil)</p></li><li class="listitem"><p>添加对AMD Opteron和Itanium的支持 (Jeffrey W. Baker, Bruce)</p></li><li class="listitem"><p>从<code class="command">configure</code>中删除<code class="option">--enable-recode</code>选项</p><p>不再需要这个了，我们有了<code class="command">CREATE CONVERSION</code>。</p></li><li class="listitem"><p>如果没有找到自旋锁代码，那么生成一个编译错误 (Bruce)</p><p>没有自旋锁代码的平台现在将不能编译，而不是默默的使用信号灯。
这个失败可以使用一个新的<code class="command">configure</code>选项禁用。</p></li></ul></div></div><div class="sect3" id="idp83546560"><div class="titlepage"><div><div><h4 class="title">E.284.3.15. 贡献包的变化</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>改变dbmirror许可为BSD</p></li><li class="listitem"><p>改善earthdistance (Bruno Wolff III)</p></li><li class="listitem"><p>提高pgcrypto的可移植性 (Marko Kreen)</p></li><li class="listitem"><p>阻止xml中的崩溃 (John Gray, Michael Richards)</p></li><li class="listitem"><p>更新oracle</p></li><li class="listitem"><p>更新mysql</p></li><li class="listitem"><p>更新cube (Bruno Wolff III)</p></li><li class="listitem"><p>更新earthdistance以使用cube (Bruno Wolff III)</p></li><li class="listitem"><p>更新btree_gist (Oleg)</p></li><li class="listitem"><p>新增tsearch2全文本搜索模块 (Oleg, Teodor)</p></li><li class="listitem"><p>添加基于散列的交叉表函数到tablefuncs (Joe)</p></li><li class="listitem"><p>添加连续的字段以排序tablefuncs中的<code class="function">connectby()</code>兄弟姐妹 (Nabil Sayegh,Joe)</p></li><li class="listitem"><p>添加命名的持久连接到dblink (Shridhar Daithanka)</p></li><li class="listitem"><p>新的pg_autovacuum允许自动<code class="command">VACUUM</code> (Matthew T. O'Connor)</p></li><li class="listitem"><p>让pgbench遵守环境变量<code class="envar">PGHOST</code>、<code class="envar">PGPORT</code>、<code class="envar">PGUSER</code> (Tatsuo)</p></li><li class="listitem"><p>改进intarray (Teodor Sigaev)</p></li><li class="listitem"><p>改进pgstattuple (Rod)</p></li><li class="listitem"><p>修复fuzzystrmatch中<code class="function">metaphone()</code>的错误</p></li><li class="listitem"><p>改进adddepend (Rod)</p></li><li class="listitem"><p>更新spi/timetravel (Böjthe Zoltán)</p></li><li class="listitem"><p>修复dbase <code class="option">-s</code>选项并改进非ASCII的处理 (Thomas Behr, Márcio Smiderle)</p></li><li class="listitem"><p>删除数组模块，因为现在默认情况下包括数组特性 (Joe)</p></li></ul></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-7-4-1.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="release-7-3-21.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">E.283. 版本 7.4.1 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> E.285. 版本 7.3.21</td></tr></table></div></body></html>
