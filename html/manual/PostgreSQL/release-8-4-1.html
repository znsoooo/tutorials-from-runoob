<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.153. 版本8.4.1</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-8-4-2.html" title="E.152. 版本8.4.2" /><link rel="next" href="release-8-4.html" title="E.154. 版本8.4" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.153. 版本8.4.1</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-8-4-2.html" title="E.152. 版本8.4.2">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="附录 E. 版本说明">上一级</a></td><th width="60%" align="center">附录 E. 版本说明</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.1 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="release-8-4.html" title="E.154. 版本8.4">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-8-4-1"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.153. 版本8.4.1</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-8-4-1.html#idp77265472">E.153.1. 迁移到版本8.4.1</a></span></dt><dt><span class="sect2"><a href="release-8-4-1.html#idp77266240">E.153.2. 变化</a></span></dt></dl></div><p><strong>发布日期：. </strong>2009-09-09</p><p>    该发布包含来自8.4中的各种修复。关于8.4主要发布中的新特性信息，
参阅<a class="xref" href="release-8-4.html" title="E.154. 版本8.4">第 E.154 节</a>。</p><div class="sect2" id="idp77265472"><div class="titlepage"><div><div><h3 class="title">E.153.1. 迁移到版本8.4.1</h3></div></div></div><p>     运行8.4.X不需要备份/恢复。</p></div><div class="sect2" id="idp77266240"><div class="titlepage"><div><div><h3 class="title">E.153.2. 变化</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    在归档恢复结尾修复WAL页面头部初始化(Heikki)</p><p>     这可能导致在后续归档恢复中处理WAL的错误。</p></li><li class="listitem"><p>    修复<span class="quote">“<span class="quote">归档中不能产生新的WAL项</span>”</span>错误(Tom)</p></li><li class="listitem"><p>    修复在崩溃后使得过期行可见的问题(Tom)</p><p>     涉及页面状态位的错误可能在服务器崩溃后不能正确设置。</p></li><li class="listitem"><p>     在安全定义函数中不允许<code class="command">RESET ROLE</code>和<code class="command">RESET SESSION AUTHORIZATION</code>(Tom, Heikki)</p><p>    这包含了在之前补丁中漏掉的一种情况，   
在安全定义函数中不允许<code class="command">SET ROLE</code>和<code class="command">SET SESSION AUTHORIZATION</code>(参阅CVE-2007-6600)</p></li><li class="listitem"><p>    使得已经加载模块的<code class="command">LOAD</code>成为非操作的(Tom)</p><p>    以前<code class="command">LOAD</code>尝试卸载并且重新加载该模块，但是这不安全而且没有用处。</p></li><li class="listitem"><p>    使得窗口函数<code class="literal">PARTITION BY</code>和<code class="literal">ORDER BY</code>项总是被解释为
简单表达式(Tom)</p><p>    在8.4.0中这些列表按照用于顶级<code class="literal">GROUP BY</code>和<code class="literal">ORDER BY</code>列表规则被解析。
但是每个SQL标准是不正确的，并且可能导致循环。</p></li><li class="listitem"><p>    修复半连接规划中若干错误(Tom)</p><p>    在<code class="literal">IN</code>或者<code class="literal">EXISTS</code>与另外一个连接一起使用的情况中导致错误查询结果。</p></li><li class="listitem"><p>     修复引用外连接中子查询的整行处理(Tom)</p><p>    例子为<code class="literal">SELECT COUNT(ss.*) FROM ... LEFT JOIN (SELECT ...) ss ON ...</code>。
这里，为空扩展连接行<code class="literal">ss.*</code>被看作为<code class="literal">ROW(NULL,NULL,...)</code>，
与简单空不一样，现在将它看作为简单空。</p></li><li class="listitem"><p>     修复Windows共享内存分配代码(Tsutomu Yamada, Magnus)</p><p>  
    该错误导致经常报道的<span class="quote">“<span class="quote">不能附加到共享内存</span>”</span>错误消息。</p></li><li class="listitem"><p>   修复本地处理plperl (Heikki)</p><p>    当调用plperl函数的时候，导致数据损坏，该错误可能导致服务器的本地设置改变。</p></li><li class="listitem"><p>    修复reloptions的处理以确保设置一个选项不强制为其它的缺省值(Itagaki Takahiro)</p></li><li class="listitem"><p>    确保<span class="quote">“<span class="quote">fast shutdown</span>”</span>请求强制终止打开会话，即使<span class="quote">“<span class="quote">smart shutdown</span>”</span>已经
在进行中(Fujii Masao)</p></li><li class="listitem"><p>    避免<code class="literal">GROUP BY</code>查询中<code class="function">array_agg()</code>的内存泄露(Tom)</p></li><li class="listitem"><p>   将<code class="function">to_char(..., 'TH')</code>看作带有<code class="literal">'HH'</code>/<code class="literal">'HH12'</code>后缀的大写字母序列(Heikki)</p><p>    它曾作为<code class="literal">'th'</code>(小写字母)被处理。</p></li><li class="listitem"><p>   包含<code class="type">time</code>和<code class="type">time with time zone</code>输出的<code class="function">EXTRACT(second)</code>和
   <code class="function">EXTRACT(milliseconds)</code>结果中的小数部分(Tom)</p><p>    一直为浮点datetime配置工作，但在整数datetime代码中被打断。</p></li><li class="listitem"><p>    当<em class="replaceable"><code>x</code></em>大于2百万并且整数datetime在使用中的时候，
修复<code class="literal">INTERVAL '<em class="replaceable"><code>x</code></em> ms'</code>溢出(Alex Hunsaker)</p></li><li class="listitem"><p>    当处理索引扫描中toasted值得时候，优化性能(Tom)</p><p>   这对<a class="ulink" href="http://postgis.net/" target="_top">PostGIS</a>是特别有用的。</p></li><li class="listitem"><p>    修复禁用<code class="varname">commit_delay</code>错误(Jeff Janes)</p></li><li class="listitem"><p>   如果以silent模式启用服务器，输出早期启用信息到<code class="filename">postmaster.log</code>中(Tom)</p><p>    以前丢弃这样的错误消息，导致调度困难。</p></li><li class="listitem"><p>    删除翻译常见问题(Peter)</p><p>   现在主要是在<a class="ulink" href="http://wiki.postgresql.org/wiki/FAQ" target="_top">wiki</a>上面。
   主要的问题前段时间已经移到了wiki上。</p></li><li class="listitem"><p>    如果<code class="filename">postgresql.conf</code>为空，那么修复<span class="application">pg_ctl</span>
不陷入无限循环中(Jeff Davis)</p></li><li class="listitem"><p>   修复<span class="application">pg_dump</span>的<code class="literal">--binary-upgrade</code>模式中的若干错误(Bruce, Tom)</p><p>    通过pg_migrator使用<code class="literal">pg_dump --binary-upgrade</code>。</p></li><li class="listitem"><p>    修复<code class="filename">contrib/xml2</code>的<code class="function">xslt_process()</code>以正确处理
最大数量参数(二十)(Tom)</p></li><li class="listitem"><p>    提高<span class="application">libpq</span>代码的鲁棒性以恢复<code class="command">COPY FROM STDIN</code>中错误(Tom)</p></li><li class="listitem"><p>   当安装两个库的时候，避免包含readline和editline头文件的冲突(Zdenek Kotala)</p></li><li class="listitem"><p>    解决gcc错误，它导致一些平台上<span class="quote">“<span class="quote">浮点异常</span>”</span>而不是<span class="quote">“<span class="quote">以零做除数</span>”</span>(Tom)</p></li><li class="listitem"><p>   为Bangladesh, Egypt, Mauritius中DST变化规律更新时区数据文件到<span class="application">tzdata</span>发布2009l。</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-8-4-2.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="release-8-4.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">E.152. 版本8.4.2 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> E.154. 版本8.4</td></tr></table></div></body></html>
