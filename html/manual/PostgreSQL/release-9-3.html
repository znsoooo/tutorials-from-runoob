<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.57. 版本 9.3</title><link rel="stylesheet" type="text/css" href="../../0/stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-9-3-1.html" title="E.56. 版本 9.3.1" /><link rel="next" href="release-9-2-24.html" title="E.58. 版本 9.2.24" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.57. 版本 9.3</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-9-3-1.html" title="E.56. 版本 9.3.1">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="附录 E. 版本说明">上一级</a></td><th width="60%" align="center">附录 E. 版本说明</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.1 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="release-9-2-24.html" title="E.58. 版本 9.2.24">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-9-3"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.57. 版本 9.3</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-9-3.html#idp69751888">E.57.1. 概述</a></span></dt><dt><span class="sect2"><a href="release-9-3.html#idp69769040">E.57.2. 迁移到版本 9.3</a></span></dt><dt><span class="sect2"><a href="release-9-3.html#idp69803232">E.57.3. 修改列表</a></span></dt></dl></div><p><strong>发布日期：. </strong>2013-09-09</p><div class="sect2" id="idp69751888"><div class="titlepage"><div><div><h3 class="title">E.57.1. 概述</h3></div></div></div><p><span class="productname">PostgreSQL</span> 9.3中主要的改进包括：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加<a class="link" href="sql-creatematerializedview.html" title="CREATE MATERIALIZED VIEW">物化视图</a></p></li><li class="listitem"><p>让简单的视图<a class="link" href="sql-createview.html#SQL-CREATEVIEW-UPDATABLE-VIEWS" title="可更新视图">可自动更新</a></p></li><li class="listitem"><p>为<code class="type">JSON</code>数据类型添加许多特性，包括<a class="link" href="functions-json.html" title="9.15. JSON 函数和操作符">操作符和函数</a>，
从<code class="type">JSON</code>值中提取元素</p></li><li class="listitem"><p>为<code class="literal">FROM</code>子句子查询和函数调用实现了<acronym class="acronym">SQL</acronym>标准的
<a class="link" href="queries-table-expressions.html#QUERIES-LATERAL" title="7.2.1.5. LATERAL子查询"><code class="literal">LATERAL</code></a>选项</p></li><li class="listitem"><p>允许<a class="link" href="sql-createforeigndatawrapper.html" title="CREATE FOREIGN DATA WRAPPER">外部数据封装器</a>
支持在外部表上书写（插入/更新/删除）</p></li><li class="listitem"><p>添加一个<a class="link" href="postgres-fdw.html" title="F.34. postgres_fdw"><span class="productname">Postgres</span>外部数据封装器</a>，
允许访问其他<span class="productname">Postgres</span>服务器</p></li><li class="listitem"><p>添加对<a class="link" href="event-triggers.html" title="第 39 章 事件触发器">事件触发器</a>的支持</p></li><li class="listitem"><p>添加选择能力到<a class="link" href="app-initdb.html#APP-INITDB-DATA-CHECKSUMS">checksum</a>
数据页和报告损坏</p></li><li class="listitem"><p>阻止非键字段行更新阻塞外键检查</p></li><li class="listitem"><p>大大的减少System V <a class="link" href="kernel-resources.html#SYSVIPC" title="18.4.1. 共享内存和信号量">共享内存</a>的需求</p></li></ul></div><p>下面的章节是对以上条例更加详细的解释。</p></div><div class="sect2" id="idp69769040"><div class="titlepage"><div><div><h3 class="title">E.57.2. 迁移到版本 9.3</h3></div></div></div><p>对于那些想要从任何以前的版本中迁移数据的人来说，需要使用
<a class="link" href="app-pg-dumpall.html" title="pg_dumpall"><span class="application">pg_dumpall</span></a>或
<a class="link" href="pgupgrade.html" title="pg_upgrade"><span class="application">pg_upgrade</span></a>转储/恢复。</p><p>版本9.3包含一些可能影响与以前版本兼容性的修改。观察下列的不兼容性：</p><div class="sect3" id="idp69772640"><div class="titlepage"><div><div><h4 class="title">E.57.2.1. 服务器设置</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>重命名<code class="varname">replication_timeout</code>为
<a class="link" href="runtime-config-replication.html#GUC-WAL-SENDER-TIMEOUT"><code class="varname">wal_sender_timeout</code></a> (Amit Kapila)</p><p>这些设置控制<a class="link" href="wal.html" title="第 30 章 可靠性和预写式日志"><acronym class="acronym">WAL</acronym></a>发送超时。</p></li><li class="listitem"><p>要求超级用户权限设置<a class="link" href="runtime-config-wal.html#GUC-COMMIT-DELAY"><code class="varname">commit_delay</code></a>，
因为它现在可以潜在的延迟其他会话 (Simon Riggs)</p></li><li class="listitem"><p>允许内存中排序使用它们分配的所有内存 (Jeff Janes)</p><p>基于以前的行为设置<a class="link" href="runtime-config-resource.html#GUC-WORK-MEM"><code class="varname">work_mem</code></a>
的用户可能需要重新访问该设置。</p></li></ul></div></div><div class="sect3" id="idp69779440"><div class="titlepage"><div><div><h4 class="title">E.57.2.2. 其他</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>如果一个元组在被更新或删除之前早已被一个<code class="literal">BEFORE</code>触发器更新或删除了，
则抛出一个错误 (Kevin Grittner)</p><p>以前，最初的更新默默的跳过了，导致逻辑上的不一致性，因为触发器可能基于计划更新传播数据到其他地方。
现在抛出了一个错误，阻止不一致的结果被提交。如果这个改变影响了你的应用，
那么最好的解决方法通常是移动数据传播动作到一个<code class="literal">AFTER</code>触发器。</p><p>如果一个查询中调用了一个不稳定的函数修改了稍后该查询本身修改的行，也会抛出这个错误。
这样的情况以前导致默默的跳过更新。</p></li><li class="listitem"><p>修改多行字段<a class="link" href="sql-createtable.html" title="CREATE TABLE"><code class="literal">ON UPDATE SET NULL/SET DEFAULT</code></a>
外键动作，影响该约束的所有字段，不只是那些在<code class="command">UPDATE</code>中修改了的字段 (Tom Lane)</p><p>以前，我们将只设置这些对应于<code class="command">UPDATE</code>修改过的被引用字段的引用字段。
这是SQL-92要求的，但是最近的SQL标准版本指定了新的行为。</p></li><li class="listitem"><p>如果<a class="link" href="runtime-config-client.html#GUC-SEARCH-PATH"><code class="varname">search_path</code></a>改变了，
则强制缓存的计划重新规划 (Tom Lane)</p><p>以前，如果查询用一个新的<code class="varname">search_path</code>设置重新执行，
那么早已在当前的会话中生成的缓存的计划是不会重做的，导致意外的行为。</p></li><li class="listitem"><p>修复<a class="link" href="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE" title="表 9.23. 格式化函数"><code class="function">to_number()</code></a>，
正确的处理一个句点用作分隔符 (Tom Lane)</p><p>以前，一个句点被看做是一个小数点，即使本地说它不是并且使用<code class="literal">D</code>
格式代码声明本地特定的小数点的使用。如果也使用了<code class="literal">FM</code>格式，
那么这会导致错误的答案。</p></li><li class="listitem"><p>修复<code class="literal">STRICT</code>非设置返回函数，让在它们的参数中的设置返回函数正确的返回空行 (Tom Lane)</p><p>传递到严格函数的空值应该导致一个空的输出，但是相反的，输出行彻底被压制。</p></li><li class="listitem"><p>在一个连续的流中存储<a class="link" href="wal.html" title="第 30 章 可靠性和预写式日志"><acronym class="acronym">WAL</acronym></a>，
而不是每4GB就跳过最后16MB段 (Heikki Linnakangas)</p><p>以前，由于这个跳过，以<code class="literal">FF</code>结束名字的<acronym class="acronym">WAL</acronym>文件是不使用的。
如果你有<acronym class="acronym">WAL</acronym>备份或恢复脚本考虑到这种行为，将需要调整它们。</p></li><li class="listitem"><p>在<a class="link" href="catalog-pg-constraint.html" title="51.13. pg_constraint"><code class="structname">pg_constraint.confmatchtype</code></a>中，
存储缺省的外键匹配类型(non-<code class="literal">FULL</code>, non-<code class="literal">PARTIAL</code>)
为<code class="literal">s</code>，代表<span class="quote">“<span class="quote">简单的</span>”</span> (Tom Lane)</p><p>以前这种情况通过<code class="literal">u</code>表示，代表<span class="quote">“<span class="quote">未指定</span>”</span>。</p></li></ul></div></div></div><div class="sect2" id="idp69803232"><div class="titlepage"><div><div><h3 class="title">E.57.3. 修改列表</h3></div></div></div><p>下面你将找到<span class="productname">PostgreSQL</span> 9.3和以前的主版本之间详细的变化。</p><div class="sect3" id="idp69804736"><div class="titlepage"><div><div><h4 class="title">E.57.3.1. 服务器</h4></div></div></div><div class="sect4" id="idp69805152"><div class="titlepage"><div><div><h5 class="title">E.57.3.1.1. 锁定</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>阻止非键字段行更新阻塞外键检查 (Álvaro Herrera, Noah Misch, Andres Freund, Alexander
        Shulgin, Marti Raudsepp, Alexander Shulgin)</p><p>这个修改提高了并发性，并减少了更新的表包含在外键约束中时死锁的可能性。
<code class="command">UPDATE</code>并不改变任何现在在行上采用新的<code class="literal">NO KEY UPDATE</code>
锁模式的外键中引用的字段，虽然外键约束使用新的<code class="literal">KEY SHARE</code>锁模式，
这与<code class="literal">NO KEY UPDATE</code>并不冲突。所以这里没有阻塞，除非修改了外键字段。</p></li><li class="listitem"><p>添加配置变量<a class="link" href="runtime-config-client.html#GUC-LOCK-TIMEOUT"><code class="varname">lock_timeout</code></a>，
允许限制一个会话将等待多长时间去请求任何一个锁 (Zoltán Böszörményi)</p></li></ul></div></div><div class="sect4" id="idp69731344"><div class="titlepage"><div><div><h5 class="title">E.57.3.1.2. 索引</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>为范围数据类型添加<a class="link" href="rangetypes.html#RANGETYPES-INDEXING" title="8.17.9. 索引"><acronym class="acronym">SP-GiST</acronym></a>支持 
(Alexander Korotkov)</p></li><li class="listitem"><p>允许不记录<a class="link" href="gist.html" title="第 62 章 GiST 索引"><acronym class="acronym">GiST</acronym></a>索引 (Jeevan Chalke)</p></li><li class="listitem"><p>提高<acronym class="acronym">GiST</acronym>索引插入的性能，通过有多个同样好的选择时随机化选择页面来实现 
(Heikki Linnakangas)</p></li><li class="listitem"><p>改善哈希索引操作的并发性 (Robert Haas)</p></li></ul></div></div><div class="sect4" id="idp69816288"><div class="titlepage"><div><div><h5 class="title">E.57.3.1.3. 优化程序</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>为<a class="link" href="rangetypes.html" title="8.17. 范围类型">范围类型</a>收集并使用上界、下界和范围长度的直方图
(Alexander Korotkov)</p></li><li class="listitem"><p>为索引访问改善优化器的成本估算 (Tom Lane)</p></li><li class="listitem"><p>为通过散列聚合实现<code class="literal">DISTINCT</code>改善优化器的哈希表尺寸估计 (Tom Lane)</p></li><li class="listitem"><p>抑制非操作符结果并限制规划节点 (Kyotaro Horiguchi, Amit Kapila, Tom Lane)</p></li><li class="listitem"><p>当规划器只关心总的开销时，通过没有保持规划在基本的便宜启动成本上减少规划器开销 (Tom Lane)</p></li></ul></div></div><div class="sect4" id="idp69820720"><div class="titlepage"><div><div><h5 class="title">E.57.3.1.4. 一般性能</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加<a class="link" href="sql-copy.html" title="COPY"><code class="command">COPY FREEZE</code></a>选项，
避免稍后标记元组为冻结的开销 (Simon Riggs, Jeff Davis)</p></li><li class="listitem"><p>改善<a class="link" href="datatype-numeric.html" title="8.1. 数字类型"><code class="type">NUMERIC</code></a>计算的性能
(Kyotaro Horiguchi)</p></li><li class="listitem"><p>改善等待<a class="link" href="runtime-config-wal.html#GUC-COMMIT-DELAY"><code class="varname">commit_delay</code></a>
的会话的同步 (Peter Geoghegan)</p><p>这大大的提高了<code class="varname">commit_delay</code>的有效性。</p></li><li class="listitem"><p>通过不要截断还未接触任何临时表的事务中的临时表，提高<a class="link" href="sql-createtable.html" title="CREATE TABLE"><code class="command">CREATE TEMPORARY TABLE ... ON
        COMMIT DELETE ROWS</code></a>选项的性能 (Heikki Linnakangas)</p></li><li class="listitem"><p>让清理在删除过期的元组之后重新检查可见性 (Pavan Deolasee)</p><p>这提高了页面被标记为所有可见的可能性。</p></li><li class="listitem"><p>添加每资源所有者锁缓存 (Jeff Janes)</p><p>这加速了持有多个锁的多语句事务中语句完成时的锁统计；
这对于<span class="application">pg_dump</span>尤其有用。</p></li><li class="listitem"><p>避免在一个创建新的关系的事务提交时扫描整个关系缓存 (Jeff Janes)</p><p>这加速了在连续的小事务中创建许多表的会话，比如运行一个<span class="application">pg_restore</span> 。</p></li><li class="listitem"><p>提高删除许多关系的事务的性能 (Tomas Vondra)</p></li></ul></div></div><div class="sect4" id="idp69832704"><div class="titlepage"><div><div><h5 class="title">E.57.3.1.5. 监视</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加可选的能力到<a class="link" href="app-initdb.html#APP-INITDB-DATA-CHECKSUMS">checksum</a>
数据页并报告损坏 (Simon Riggs, Jeff Davis, Greg Smith, Ants Aasma)</p><p>checksum选项可以在<a class="link" href="app-initdb.html" title="initdb">initdb</a>期间设置。</p></li><li class="listitem"><p>分离<a class="link" href="monitoring-stats.html" title="28.2. 统计收集器">统计收集器</a>的数据文件到独立的全局和每数据库文件
(Tomas Vondra)</p><p>这减少了统计数据追踪的I/O需求。</p></li><li class="listitem"><p>修复统计收集器，以便在系统时钟倒退的情况下正确的操作 (Tom Lane)</p><p>以前，统计收集器会停止，直到时间再次到达最后记录的时间。</p></li><li class="listitem"><p>当我们想要在这里停止记录时，发出一个告知性的消息到主进程标准错误 (Tom Lane)</p><p>这会帮助用户减少在主进程启动期间只记录标准错误的常见配置中，在哪里查看日志输出的混淆。</p></li></ul></div></div><div class="sect4" id="idp69839200"><div class="titlepage"><div><div><h5 class="title">E.57.3.1.6. 认证</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>当发生认证失败时，记录相关的<a class="link" href="auth-pg-hba-conf.html" title="20.1. pg_hba.conf文件"><code class="filename">pg_hba.conf</code></a>行，
简化意外失败的调试 (Magnus Hagander)</p></li><li class="listitem"><p>改进<a class="link" href="auth-methods.html#AUTH-LDAP" title="20.3.7. LDAP 认证"><acronym class="acronym">LDAP</acronym></a>错误报告和文档 (Peter Eisentraut)</p></li><li class="listitem"><p>在<acronym class="acronym">URL</acronym>格式中添加对指定<acronym class="acronym">LDAP</acronym>认证参数的支持，每RFC 4516 (Peter Eisentraut)</p></li><li class="listitem"><p>修改<a class="link" href="runtime-config-connection.html#GUC-SSL-CIPHERS"><code class="varname">ssl_ciphers</code></a>参数，
以<code class="literal">DEFAULT</code>启动，而不是以<code class="literal">ALL</code>启动，
然后删除不安全的密码 (Magnus Hagander)</p><p>这会产生一个更合适的SSL密码设置。</p></li><li class="listitem"><p>分析并加载<a class="link" href="auth-username-maps.html" title="20.2. 用户名映射"><code class="filename">pg_ident.conf</code></a>一次，
而不是在每个连接中 (Amit Kapila)</p><p>这类似于<code class="filename">pg_hba.conf</code>的处理。</p></li></ul></div></div><div class="sect4" id="idp69850032"><div class="titlepage"><div><div><h5 class="title">E.57.3.1.7. 服务器设置</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>大大的减少了System V <a class="link" href="kernel-resources.html#SYSVIPC" title="18.4.1. 共享内存和信号量">共享内存</a>的需求 (Robert Haas)</p><p>在类Unix的系统上，<code class="function">mmap()</code>现在用于大多数<span class="productname">PostgreSQL</span>
的共享内存。对于大多数用户，这将消除任何为共享内存调整内核参数的需要。</p></li><li class="listitem"><p>允许主进程监听多个Unix域套接字 (Honza Horák)</p><p>配置参数<code class="varname">unix_socket_directory</code>被
<a class="link" href="runtime-config-connection.html#GUC-UNIX-SOCKET-DIRECTORIES"><code class="varname">unix_socket_directories</code></a>
取代，它接受一个路径列表。</p></li><li class="listitem"><p>允许配置文件的路径被处理 (Magnus Hagander, Greg Smith, Selena Deckelmann)</p><p>这样一个路径在服务器配置文件中用
<a class="link" href="config-setting.html#CONFIG-INCLUDES" title="19.1.5. 管理配置文件内容"><code class="varname">include_dir</code></a>指定。</p></li><li class="listitem"><p>为<a class="link" href="runtime-config-resource.html#GUC-SHARED-BUFFERS"><code class="varname">shared_buffers</code></a>
增加最大<a class="link" href="app-initdb.html" title="initdb">initdb</a>配置值到128MB (Robert Haas)</p><p>这是initdb打算在<a class="link" href="config-setting.html#CONFIG-SETTING-CONFIGURATION-FILE" title="19.1.2. 通过配置文件影响参数"><code class="filename">postgresql.conf</code></a>
中设置的最大值；以前的最大值是32MB。</p></li><li class="listitem"><p>在主进程退出时，删除<a class="link" href="runtime-config-file-locations.html#GUC-EXTERNAL-PID-FILE">外部<acronym class="acronym">PID</acronym>文件</a>，
如果有 (Peter Eisentraut)</p></li></ul></div></div></div><div class="sect3" id="idp69863568"><div class="titlepage"><div><div><h4 class="title">E.57.3.2. 复制和恢复</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>允许流复制备用<a class="link" href="protocol-replication.html" title="52.4. 流复制协议">遵循时间线切换</a> (Heikki Linnakangas)</p><p>这允许流备用服务器从一个新晋升为主要地位的伺服接受WAL数据。以前，
其他备用会请求重新同步以开始跟随新的主机。</p></li><li class="listitem"><p>添加<acronym class="acronym">SQL</acronym>函数<a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-BACKUP" title="9.26.3. 备份控制函数"><code class="function">pg_is_in_backup()</code></a>
和<a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-BACKUP" title="9.26.3. 备份控制函数"><code class="function">pg_backup_start_time()</code></a> 
(Gilles Darold)</p><p>这些函数报告基础备份的状态。</p></li><li class="listitem"><p>提高<a class="link" href="runtime-config-wal.html#GUC-SYNCHRONOUS-COMMIT"><code class="varname">synchronous_commit</code></a>
禁用时流日志切换的性能 (Andres Freund)</p></li><li class="listitem"><p>允许更快的晋升流备用为主服务器 (Simon Riggs, Kyotaro Horiguchi)</p></li><li class="listitem"><p>添加最后检查点的重做位置到
<a class="link" href="app-pgcontroldata.html" title="pg_controldata"><span class="application">pg_controldata</span></a>
的输出 (Fujii Masao)</p><p>这个信息对于确定恢复需要哪个<acronym class="acronym">WAL</acronym>文件是有帮助的。</p></li><li class="listitem"><p>允许像<a class="link" href="app-pgreceivewal.html" title="pg_receivewal"><span class="application">pg_receivexlog</span></a>
这样的工具用不同的架构在计算机上运行 (Heikki Linnakangas)</p><p>WAL文件仍然只能以原先相同的架构在服务器上重放；但是他们现在可以以任意架构在机器上传输和存储，
因为流复制协议现在是与机器无关的。</p></li><li class="listitem"><p>让<a class="link" href="app-pgbasebackup.html" title="pg_basebackup"><span class="application">pg_basebackup</span></a> 
<code class="option">--write-recovery-conf</code>输出一个最小的<code class="filename">recovery.conf</code>文件
(Zoltán Böszörményi, Magnus Hagander)</p><p>这简化了设置一个备用服务器。</p></li><li class="listitem"><p>允许<a class="link" href="app-pgreceivewal.html" title="pg_receivewal"><span class="application">pg_receivexlog</span></a>
和<a class="link" href="app-pgbasebackup.html" title="pg_basebackup"><span class="application">pg_basebackup</span></a> 
<code class="option">--xlog-method</code>处理流时间线切换 (Heikki Linnakangas)</p></li><li class="listitem"><p>添加<a class="link" href="runtime-config-replication.html#GUC-WAL-RECEIVER-TIMEOUT"><code class="varname">wal_receiver_timeout</code></a>
参数控制<acronym class="acronym">WAL</acronym>接收器的超时 (Amit Kapila)</p><p>这允许更快速的检测连接失败。</p></li><li class="listitem"><p>改变<a class="link" href="wal.html" title="第 30 章 可靠性和预写式日志"><acronym class="acronym">WAL</acronym></a>记录格式，
以允许跨页面分离记录头 (Heikki Linnakangas)</p><p>新的格式更紧凑，并且书写更有效。</p></li></ul></div></div><div class="sect3" id="idp69886784"><div class="titlepage"><div><div><h4 class="title">E.57.3.3. 查询</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>为<code class="literal">FROM</code>子句子查询和函数调用实现<acronym class="acronym">SQL</acronym>标准的
<a class="link" href="queries-table-expressions.html#QUERIES-LATERAL" title="7.2.1.5. LATERAL子查询"><code class="literal">LATERAL</code></a>选项 (Tom Lane)</p><p>这个特性允许<code class="literal">FROM</code>中的子查询和函数从<code class="literal">FROM</code>子句中的其他表中引用字段。
<code class="literal">LATERAL</code>关键字对于函数来说是可选的。</p></li><li class="listitem"><p>添加对输送<a class="link" href="sql-copy.html" title="COPY"><code class="command">COPY</code></a>和
<a class="link" href="app-psql.html" title="psql"><span class="application">psql</span></a> <code class="command">\copy</code>
数据到/从一个外部程序的支持 (Etsuro Fujita)</p></li><li class="listitem"><p>允许规则中的一个多行<a class="link" href="sql-values.html" title="VALUES"><code class="literal">VALUES</code></a>
子句引用<code class="literal">OLD</code>/<code class="literal">NEW</code> (Tom Lane)</p></li></ul></div></div><div class="sect3" id="idp69899312"><div class="titlepage"><div><div><h4 class="title">E.57.3.4. 对象操作</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加对<a class="link" href="event-triggers.html" title="第 39 章 事件触发器">事件触发器</a>的支持 
(Dimitri Fontaine, Robert Haas, Álvaro Herrera)</p><p>这允许DDL命令运行时，以启用事件的语言书写的服务器端的函数被调用。</p></li><li class="listitem"><p>允许<a class="link" href="sql-createforeigndatawrapper.html" title="CREATE FOREIGN DATA WRAPPER">外部数据封装器</a>
支持在外部表上写入（插入/更新/删除） (KaiGai Kohei)</p></li><li class="listitem"><p>添加<a class="link" href="sql-createschema.html" title="CREATE SCHEMA"><code class="command">CREATE SCHEMA ... IF NOT EXISTS</code></a>
子句 (Fabrízio de Royes Mello)</p></li><li class="listitem"><p>让<a class="link" href="sql-reassign-owned.html" title="REASSIGN OWNED"><code class="command">REASSIGN OWNED</code></a>
也修改共享对象的所有权 (Álvaro Herrera)</p></li><li class="listitem"><p>如果给定的初始值字符串对于事务数据类型来说不是有效的输入，
那么让<a class="link" href="sql-createaggregate.html" title="CREATE AGGREGATE"><code class="command">CREATE AGGREGATE</code></a>
投诉 (Tom Lane)</p></li><li class="listitem"><p>抑制<a class="link" href="sql-createtable.html" title="CREATE TABLE"><code class="command">CREATE TABLE</code></a>
关于隐式索引和序列创建的消息 (Robert Haas)</p><p>这些消息现在在<code class="literal">DEBUG1</code>冗长模式中出现，所以它们缺省将不显示。</p></li><li class="listitem"><p>当一个不存在的模式在表名中指定时，允许
<a class="link" href="sql-droptable.html" title="DROP TABLE"><code class="command">DROP TABLE IF EXISTS</code></a>成功 (Bruce Momjian)</p><p>以前，如果该模式不存在，它抛出一个错误。</p></li><li class="listitem"><p>提供带有<a class="link" href="libpq-exec.html#LIBPQ-PQRESULTERRORFIELD">约束违反细节</a>
的客户端作为单独的字段 (Pavel Stehule)</p><p>这允许客户端检索表、字段、数据类型或约束名错误细节。以前这样的信息必须从错误字符串中提取。
客户端库支持需要访问这些字段。</p></li></ul></div><div class="sect4" id="idp69914784"><div class="titlepage"><div><div><h5 class="title">E.57.3.4.1. <code class="command">ALTER</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>在<a class="link" href="sql-altertype.html" title="ALTER TYPE"><code class="command">ALTER TYPE ... ADD VALUE</code></a>
中支持<code class="literal">IF NOT EXISTS</code>选项 (Andrew Dunstan)</p><p>这对于有条件的添加值到枚举类型是有用的。</p></li><li class="listitem"><p>添加<a class="link" href="sql-alterrole.html" title="ALTER ROLE"><code class="command">ALTER ROLE ALL SET</code></a>
为所有用户建立设置 (Peter Eisentraut)</p><p>这允许设置应用到所有数据库中的所有用户。
<a class="link" href="sql-alterdatabase.html" title="ALTER DATABASE"><code class="command">ALTER DATABASE SET</code></a>
早已允许在单个数据库中为所有用户添加设置。<code class="filename">postgresql.conf</code>
也有类似作用。</p></li><li class="listitem"><p>为<a class="link" href="sql-alterrule.html" title="ALTER RULE"><code class="command">ALTER RULE ... RENAME</code></a>
添加支持 (Ali Dar)</p></li></ul></div></div><div class="sect4" id="idp69924240"><div class="titlepage"><div><div><h5 class="title">E.57.3.4.2. <a class="link" href="rules-views.html" title="40.2. 视图和规则系统"><code class="command">VIEWs</code></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加<a class="link" href="sql-creatematerializedview.html" title="CREATE MATERIALIZED VIEW">物化视图</a> (Kevin Grittner)</p><p>不像普通视图，基础表是读取每个访问的，物化视图在创建或刷新时创建物理表。
访问物化视图然后从它的物理表中读取。
现在还没有任何增量刷新物化视图或通过基础表访问自动访问它们的便利。</p></li><li class="listitem"><p>让简单视图<a class="link" href="sql-createview.html#SQL-CREATEVIEW-UPDATABLE-VIEWS" title="可更新视图">自动可更新</a> (Dean Rasheed)</p><p>从一个基础表中引用一些或所有字段的简单视图现在缺省是可更新的。
更复杂的视图可以使用<a class="link" href="sql-createtrigger.html" title="CREATE TRIGGER"><code class="literal">INSTEAD OF</code></a>
触发器或<a class="link" href="sql-createrule.html" title="CREATE RULE"><code class="literal">INSTEAD</code></a>规则使其可更新。</p></li><li class="listitem"><p>添加<a class="link" href="sql-createview.html" title="CREATE VIEW"><code class="command">CREATE RECURSIVE VIEW</code></a>语法 
(Peter Eisentraut)</p><p>内部的，这些翻译为<code class="command">CREATE VIEW ... WITH RECURSIVE ...</code>。</p></li><li class="listitem"><p>改善视图/规则打印代码，以处理引用的表重命名或字段重命名、添加或删除了的情况 (Tom Lane)</p><p>表和字段重命名会产生的情况是：如果我们只是替代新的名称为一个规则或视图的原始文本，
那么结果是有歧义的。这个修改修复了规则转储代码，当需要保存原来的语义时，
插入手动制作的表和字段别名。</p></li></ul></div></div></div><div class="sect3" id="idp69935456"><div class="titlepage"><div><div><h4 class="title">E.57.3.5. 数据类型</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>增加<a class="link" href="largeobjects.html" title="第 34 章 大对象">大对象</a>的最大尺寸从2GB到4TB (Nozomi Anzai, Yugo Nagata)</p><p>这个修改包括添加64位大对象访问功能，在服务器中和libpq中。</p></li><li class="listitem"><p>允许文本的<a class="link" href="datatype-datetime.html#DATATYPE-TIMEZONES" title="8.5.3.  时区">时区名称</a>，比如，
<span class="quote">“<span class="quote">America/Chicago</span>”</span>，在<acronym class="acronym">ISO</acronym>格式的<code class="type">timestamptz</code>
输入的<span class="quote">“<span class="quote">T</span>”</span>字段中 (Bruce Momjian)</p></li></ul></div><div class="sect4" id="idp69940624"><div class="titlepage"><div><div><h5 class="title">E.57.3.5.1. <a class="link" href="datatype-json.html" title="8.14. JSON 类型"><code class="type">JSON</code></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加<a class="link" href="functions-json.html" title="9.15. JSON 函数和操作符">操作符和函数</a>从<code class="type">JSON</code>
值中提取元素 (Andrew Dunstan)</p></li><li class="listitem"><p>允许<code class="type">JSON</code>值被<a class="link" href="functions-json.html" title="9.15. JSON 函数和操作符">转换为记录</a>
(Andrew Dunstan)</p></li><li class="listitem"><p>添加<a class="link" href="functions-json.html" title="9.15. JSON 函数和操作符">函数</a>转换标量、记录和<code class="type">hstore</code>
值为<code class="type">JSON</code> (Andrew Dunstan)</p></li></ul></div></div></div><div class="sect3" id="idp69947424"><div class="titlepage"><div><div><h4 class="title">E.57.3.6. 函数</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加<a class="link" href="functions-array.html#ARRAY-FUNCTIONS-TABLE" title="表 9.49. 数组函数"><code class="function">array_remove()</code></a>
和<a class="link" href="functions-array.html#ARRAY-FUNCTIONS-TABLE" title="表 9.49. 数组函数"><code class="function">array_replace()</code></a>
函数 (Marco Nenciarini, Gabriele Bartolini)</p></li><li class="listitem"><p>允许<a class="link" href="functions-string.html#FUNCTIONS-STRING-OTHER" title="表 9.9. 其他字符串函数"><code class="function">concat()</code></a>
和<a class="link" href="functions-string.html#FUNCTIONS-STRING-FORMAT" title="9.4.1. format"><code class="function">format()</code></a>
正确的扩展<code class="literal">VARIADIC</code>标签的参数 (Pavel Stehule)</p></li><li class="listitem"><p>改进<a class="link" href="functions-string.html#FUNCTIONS-STRING-FORMAT" title="9.4.1. format"><code class="function">format()</code></a>，
提供字段宽度和左/右对齐选项 (Pavel Stehule)</p></li><li class="listitem"><p>让<a class="link" href="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE" title="表 9.23. 格式化函数"><code class="function">to_char()</code></a>,
<a class="link" href="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE" title="表 9.23. 格式化函数"><code class="function">to_date()</code></a>,
和<a class="link" href="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE" title="表 9.23. 格式化函数"><code class="function">to_timestamp()</code></a>
正确的处理负的世纪值(BC) (Bruce Momjian)</p><p>以前，该行为不是错误就是与正的/<acronym class="acronym">AD</acronym>处理不一致，比如，
格式标记<span class="quote">“<span class="quote">IYYY-IW-DY</span>”</span>。</p></li><li class="listitem"><p>让<a class="link" href="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE" title="表 9.23. 格式化函数"><code class="function">to_date()</code></a>
和<a class="link" href="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE" title="表 9.23. 格式化函数"><code class="function">to_timestamp()</code></a>
在混合<acronym class="acronym">ISO</acronym>和Gregorian周/天命名时返回正确的结果 (Bruce Momjian)</p></li><li class="listitem"><p>在每个<code class="literal">SELECT</code>目标列表项和<code class="literal">FROM</code>项之后，
让<a class="link" href="functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE" title="表 9.63. 系统目录信息函数"><code class="function">pg_get_viewdef()</code></a>
缺省开始一个新行 (Marko Tiikkaja)</p><p>这减少了视图打印中的线段长度，例如在<a class="link" href="app-pgdump.html" title="pg_dump"><span class="application">pg_dump</span></a>
的输出中。</p></li><li class="listitem"><p>修复<code class="function">map_sql_value_to_xml_value()</code>，以与基础类型相同的打印方式，
打印域类型的值 (Pavel Stehule)</p><p>对于某些内建类型，比如<code class="type">boolean</code>，有特殊的格式规则；
这些规则现在也应用到这些类型上的域。</p></li></ul></div></div><div class="sect3" id="idp69971984"><div class="titlepage"><div><div><h4 class="title">E.57.3.7. 服务器端的语言</h4></div></div></div><div class="sect4" id="idp69972400"><div class="titlepage"><div><div><h5 class="title">E.57.3.7.1. <a class="link" href="plpgsql.html" title="第 42 章 PL/pgSQL - SQL过程语言">PL/pgSQL</a>服务器端语言</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>允许PL/pgSQL使用带有复合类型表达式的<code class="literal">RETURN</code> (Asif Rehman)</p><p>以前，在一个返回复合类型的函数中，<code class="literal">RETURN</code>只能引用一个复合类型的变量。</p></li><li class="listitem"><p>允许PL/pgSQL作为单独的字段存取<a class="link" href="plpgsql-control-structures.html#PLPGSQL-EXCEPTION-DIAGNOSTICS" title="42.6.6.1. 得到有关一个错误的信息">约束违反细节</a>
 (Pavel Stehule)</p></li><li class="listitem"><p>允许PL/pgSQL访问<a class="link" href="sql-copy.html" title="COPY"><code class="command">COPY</code></a>
处理的行数 (Pavel Stehule)</p><p>PL/pgSQL函数中执行的<code class="command">COPY</code>现在更新通过
<a class="link" href="plpgsql-statements.html#PLPGSQL-STATEMENTS-DIAGNOSTICS" title="42.5.5. 获得结果状态"><code class="command">GET DIAGNOSTICS x = ROW_COUNT</code></a>
恢复的值。</p></li><li class="listitem"><p>允许未保留的关键字用作PL/pgSQL中的标识符 (Tom Lane)</p><p>在PL/pgSQL语法中的某些地方，关键字必须加引号用作标识符，即使它们名义上是未保留的。</p></li></ul></div></div><div class="sect4" id="idp69982048"><div class="titlepage"><div><div><h5 class="title">E.57.3.7.2. <a class="link" href="plpython.html" title="第 45 章 PL/Python - Python 过程语言">PL/Python</a>服务器端语言</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加PL/Python结果对象字符串处理器 (Peter Eisentraut)</p><p>这允许<code class="literal">plpy.debug(rv)</code>输出合理的东西。</p></li><li class="listitem"><p>让PL/Python转化OID值为一个适当的Python数值类型 (Peter Eisentraut)</p></li><li class="listitem"><p>处理和内部<acronym class="acronym">SPI</acronym>错误一样明确发生(用PL/Python的<code class="literal">RAISE</code>)
的<a class="link" href="spi.html" title="第 46 章 服务器编程接口"><acronym class="acronym">SPI</acronym></a>错误 (Oskari Saarenmaa and Jan Urbanski)</p></li></ul></div></div></div><div class="sect3" id="idp69987776"><div class="titlepage"><div><div><h4 class="title">E.57.3.8. 服务器编程接口(<a class="link" href="spi.html" title="第 46 章 服务器编程接口">SPI</a>)</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>阻止<acronym class="acronym">SPI</acronym>元组表在子事务退出期间泄露 (Tom Lane)</p><p>在任何失败的子事务的结尾，内核SPI代码现在释放任何在该子事务期间创建的SPI元组表。
这避免了对使用SPI代码的需要，保持在错误恢复代码中追踪这样的元组表和手动释放它们。
未能这样做会在PL/pgSQL和可能其他SPI客户端中导致一些事物寿命内存泄露问题。
<a class="link" href="spi-spi-freetupletable.html" title="SPI_freetuptable"><code class="function">SPI_freetuptable()</code></a>
现在保护自己免受多次释放请求，所以任何现有代码需要小心清理，
不应该被这个修改破坏。</p></li><li class="listitem"><p>允许<acronym class="acronym">SPI</acronym>函数访问被<a class="link" href="sql-copy.html" title="COPY"><code class="command">COPY</code></a>
处理的行数 (Pavel Stehule)</p></li></ul></div></div><div class="sect3" id="idp69994560"><div class="titlepage"><div><div><h4 class="title">E.57.3.9. 客户端应用</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加命令行工具<a class="link" href="app-pg-isready.html" title="pg_isready"><span class="application">pg_isready</span></a>，
检查服务器是否准备好了接受连接 (Phil Sorber)</p></li><li class="listitem"><p>为<a class="link" href="app-pgrestore.html" title="pg_restore"><span class="application">pg_restore</span></a>,
<a class="link" href="app-clusterdb.html" title="clusterdb"><span class="application">clusterdb</span></a>,
<a class="link" href="app-reindexdb.html" title="reindexdb"><span class="application">reindexdb</span></a>,
和<a class="link" href="app-vacuumdb.html" title="vacuumdb"><span class="application">vacuumdb</span></a>
支持多个<code class="option">--table</code>参数 (Josh Kupershmidt)</p><p>这类似于<a class="link" href="app-pgdump.html" title="pg_dump"><span class="application">pg_dump</span></a>的<code class="option">--table</code>
选项的工作方式。</p></li><li class="listitem"><p>添加<code class="option">--dbname</code>选项到
<a class="link" href="app-pg-dumpall.html" title="pg_dumpall"><span class="application">pg_dumpall</span></a>, 
<a class="link" href="app-pgbasebackup.html" title="pg_basebackup"><span class="application">pg_basebackup</span></a>, 
和<a class="link" href="app-pgreceivewal.html" title="pg_receivewal"><span class="application">pg_receivexlog</span></a>，
允许指定一个连接字符串 (Amit Kapila)</p></li><li class="listitem"><p>添加libpq函数<a class="link" href="libpq-connect.html#LIBPQ-PQCONNINFO"><code class="function">PQconninfo()</code></a>，
返回连接信息 (Zoltán Böszörményi, Magnus Hagander)</p></li></ul></div><div class="sect4" id="idp69854224"><div class="titlepage"><div><div><h5 class="title">E.57.3.9.1. <a class="link" href="app-psql.html" title="psql"><span class="application">psql</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>调整函数开销设置，这样<span class="application">psql</span>选项卡实现和模式搜索更有效 (Tom Lane)</p></li><li class="listitem"><p>提高<span class="application">psql</span>的选项卡实现覆盖(Jeff Janes, Dean Rasheed, 
Peter Eisentraut, Magnus Hagander)</p></li><li class="listitem"><p>允许<span class="application">psql</span> <code class="option">--single-transaction</code>
模式在从标准输入中读取时工作 (Fabien Coelho, Robert Haas)</p><p>以前这个选项只在从一个文件中读取时工作。</p></li><li class="listitem"><p>当连接到一个老的服务器时，删除<span class="application">psql</span>警告 (Peter Eisentraut)</p><p>当连接到一个比<span class="application">psql</span>的主版本更新的服务器时，仍然发出一个警告。</p></li></ul></div><div class="sect5" id="idp70019024"><div class="titlepage"><div><div><h6 class="title">E.57.3.9.1.1. <a class="link" href="app-psql.html#APP-PSQL-META-COMMANDS" title="元命令">反斜杠命令</a></h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加<span class="application">psql</span>命令<code class="command">\watch</code>，重复的执行一个SQL命令 (Will Leinweber)</p></li><li class="listitem"><p>添加<span class="application">psql</span>命令<code class="command">\gset</code>，
在<span class="application">psql</span>变量中存储查询结果 (Pavel Stehule)</p></li><li class="listitem"><p>添加<acronym class="acronym">SSL</acronym>信息到<span class="application">psql</span>的<code class="command">\conninfo</code>命令 (Alastair Turner)</p></li><li class="listitem"><p>添加<span class="quote">“<span class="quote">Security</span>”</span>字段到<span class="application">psql</span>的<code class="command">\df+</code>输出 (Jon Erdman)</p></li><li class="listitem"><p>允许<span class="application">psql</span>命令<code class="command">\l</code>接受一个数据库名字模式 (Peter Eisentraut)</p></li><li class="listitem"><p>在<span class="application">psql</span>中，如果没有活动的连接，则不允许<code class="command">\connect</code>
使用缺省 (Bruce Momjian)</p><p>如果服务器崩溃可能会出现这种情况。</p></li><li class="listitem"><p>在用<span class="application">psql</span>的<code class="literal">\g</code> <em class="replaceable"><code>file</code></em>
SQL命令执行失败之后正确的重置状态 (Tom Lane)</p><p>以前，来自随后的SQL命令的输出会意外的继续进行同一个文件。</p></li></ul></div></div><div class="sect5" id="idp70035984"><div class="titlepage"><div><div><h6 class="title">E.57.3.9.1.2. 输出</h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加一个<code class="literal">latex-longtable</code>输出格式到<span class="application">psql</span> (Bruce Momjian)</p><p>这个格式允许表跨越多个页面。</p></li><li class="listitem"><p>添加<code class="literal">border=3</code>输出模式到<span class="application">psql</span> <code class="literal">latex</code>格式 (Bruce Momjian)</p></li><li class="listitem"><p>在<span class="application">psql</span>的仅元组和扩展输出模式中，不再为零行发出<span class="quote">“<span class="quote">(No rows)</span>”</span> 
(Peter Eisentraut)</p></li><li class="listitem"><p>在<span class="application">psql</span>的未对齐、扩展输出模式中，不再为零行输出一个空行 (Peter Eisentraut)</p></li></ul></div></div></div><div class="sect4" id="idp70044096"><div class="titlepage"><div><div><h5 class="title">E.57.3.9.2. <a class="link" href="app-pgdump.html" title="pg_dump"><span class="application">pg_dump</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加<span class="application">pg_dump</span> <code class="option">--jobs</code>选项并行转储表 (Joachim Wieland)</p></li><li class="listitem"><p>让<span class="application">pg_dump</span>输出函数有一个更加可预见的顺序 (Joel Jacobson)</p></li><li class="listitem"><p>修复<span class="application">pg_dump</span>发出的tar文件，与<acronym class="acronym">POSIX</acronym>一致 (Brian Weaver, Tom Lane)</p></li><li class="listitem"><p>添加<code class="option">--dbname</code>选项到<span class="application">pg_dump</span>，
与其他客户端命令一致 (Heikki Linnakangas)</p><p>最后提供的数据库名可能没有标志。</p></li></ul></div></div><div class="sect4" id="idp70051856"><div class="titlepage"><div><div><h5 class="title">E.57.3.9.3. <a class="link" href="app-initdb.html" title="initdb"><span class="application">initdb</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>让initdb同步最近创建的数据目录 (Jeff Davis)</p><p>这确保了在initdb之后很快系统崩溃情况下的数据完整性。
可以使用<code class="option">--nosync</code>禁用此功能。</p></li><li class="listitem"><p>添加initdb <code class="option">--sync-only</code>选项同步数据目录到持久存储 (Bruce Momjian)</p><p>这是通过<a class="link" href="pgupgrade.html" title="pg_upgrade"><span class="application">pg_upgrade</span></a>使用的。</p></li><li class="listitem"><p>在文件系统的挂载点上放置数据目录时，让initdb发出一个警告 (Bruce Momjian)</p></li></ul></div></div></div><div class="sect3" id="idp70057488"><div class="titlepage"><div><div><h4 class="title">E.57.3.10. 源代码</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加基础设施以允许插件<a class="link" href="bgworker.html" title="第 47 章 后台工作者进程">后端工作进程</a> (Álvaro Herrera)</p></li><li class="listitem"><p>创建一个集中的超时<acronym class="acronym">API</acronym> (Zoltán Böszörményi)</p></li><li class="listitem"><p>创建libpgcommon并删除这里的<code class="function">pg_malloc()</code>和其他函数 
(Álvaro Herrera, Andres Freund)</p><p>这允许libpgport只用于可移植性相关的代码。</p></li><li class="listitem"><p>为嵌入在较大结构内的列表连接添加支持 (Andres Freund)</p></li><li class="listitem"><p>为所有信号使用<code class="literal">SA_RESTART</code>，包括<code class="literal">SIGALRM</code> (Tom Lane)</p></li><li class="listitem"><p>确保在翻译<code class="function">errcontext()</code>消息时使用了正确的文本域 (Heikki Linnakangas)</p></li><li class="listitem"><p>标准化命名客户端侧的内存分配函数 (Tom Lane)</p></li><li class="listitem"><p>如果某些编译时常量条件不符合，那么为<span class="quote">“<span class="quote">静态断言</span>”</span>
提供支持将会在编译时失败 (Andres Freund, Tom Lane)</p></li><li class="listitem"><p>在客户端侧代码中支持<code class="function">Assert()</code> (Andrew Dunstan)</p></li><li class="listitem"><p>添加修饰以通知C编译器一些<code class="function">ereport()</code>和<code class="function">elog()</code>调用不返回
(Peter Eisentraut, Andres Freund, Tom Lane, Heikki Linnakangas)</p></li><li class="listitem"><p>允许选项通过<a class="link" href="regress-evaluation.html" title="32.2. 测试评估"><code class="envar">PG_REGRESS_DIFF_OPTS</code></a>
传递到回归测试输出比较工具中 (Peter Eisentraut)</p></li><li class="listitem"><p>为<a class="link" href="sql-createindex.html" title="CREATE INDEX"><code class="command">CREATE INDEX CONCURRENTLY</code></a>
添加隔离测试 (Abhijit Menon-Sen)</p></li><li class="listitem"><p>删除类型定义<code class="type">int2</code>/<code class="type">int4</code>，因为他们更好的表现为
<code class="type">int16</code>/<code class="type">int32</code> (Peter Eisentraut)</p></li><li class="listitem"><p>修复Mac <span class="productname">OS X</span>上的<a class="link" href="install-procedure.html#INSTALL" title="安装文件">install-strip</a> (Peter Eisentraut)</p></li><li class="listitem"><p>删除<a class="link" href="install-procedure.html#CONFIGURE" title="配置">configure</a>标志<code class="option">--disable-shared</code>，
因为不再支持它了 (Bruce Momjian)</p></li><li class="listitem"><p>在<span class="application">Perl</span>中重写pgindent (Andrew Dunstan)</p></li><li class="listitem"><p>提供Emacs宏设置Perl格式匹配<span class="productname">PostgreSQL</span>的perltidy设置 (Peter Eisentraut)</p></li><li class="listitem"><p>运行工具检查关键字列表，查看何时后端语法发生了改变 (Tom Lane)</p></li><li class="listitem"><p>改变<code class="literal">UESCAPE</code> lex的方式，大大的减少了词法分析程序表的大小 (Heikki Linnakangas)</p></li><li class="listitem"><p>集中<span class="application">flex</span>和<span class="application">bison</span> <span class="application">make</span>规则 (Peter Eisentraut)</p><p>这对于<span class="application">pgxs</span>作者是有用的。</p></li><li class="listitem"><p>修改许多内部后端函数，返回对象<code class="type">OID</code>而不是空 (Dimitri Fontaine)</p><p>这对于事件触发器是有用的。</p></li><li class="listitem"><p>为事务回调构造pre-commit/pre-prepare/pre-subcommit事件 (Tom Lane)</p><p>使用事务回调的可加载模块可能需要修改，以处理这些新的事件类型。</p></li><li class="listitem"><p>添加函数<a class="link" href="functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE" title="表 9.63. 系统目录信息函数"><code class="function">pg_identify_object()</code></a>，
生产一个机器可读的数据库对象的描述 (Álvaro Herrera)</p></li><li class="listitem"><p>添加在<code class="command">ALTER</code>对象之后的服务器挂钩 (KaiGai Kohei)</p></li><li class="listitem"><p>实现一个通用二进制堆并将它用于合并附加操作 (Abhijit Menon-Sen)</p></li><li class="listitem"><p>提供一个工具在更新<code class="filename">src/timezone/data</code>文件时，帮助检测时区缩写改变 (Tom Lane)</p></li><li class="listitem"><p>为<span class="application">libpq</span>和<span class="application">ecpg</span>库添加<span class="application">pkg-config</span>支持
(Peter Eisentraut)</p></li><li class="listitem"><p>删除<code class="filename">src/tools/backend</code>，因为该内容在<span class="productname">PostgreSQL</span> wiki上 
(Bruce Momjian)</p></li><li class="listitem"><p>分离<a class="link" href="wal.html" title="第 30 章 可靠性和预写式日志"><acronym class="acronym">WAL</acronym></a>读取作为一个独立的设施
(Heikki Linnakangas, Andres Freund)</p></li><li class="listitem"><p>使用64位整数表示<a class="link" href="wal.html" title="第 30 章 可靠性和预写式日志"><acronym class="acronym">WAL</acronym></a>位置(<code class="structname">XLogRecPtr</code>)，
替代两个32位的整数 (Heikki Linnakangas)</p><p>通常，需要读取<acronym class="acronym">WAL</acronym>格式的工具将需要调整。</p></li><li class="listitem"><p>允许<a class="link" href="plpython.html" title="第 45 章 PL/Python - Python 过程语言">PL/Python</a>支持平台特定的包含路径 (Peter Eisentraut)</p></li><li class="listitem"><p>允许<span class="productname">OS X</span>上的<a class="link" href="plpython.html" title="第 45 章 PL/Python - Python 过程语言">PL/Python</a>
建立<span class="application">Python</span>的定制版本 (Peter Eisentraut)</p></li></ul></div></div><div class="sect3" id="idp70105616"><div class="titlepage"><div><div><h4 class="title">E.57.3.11. 附加的模块</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加一个<a class="link" href="postgres-fdw.html" title="F.34. postgres_fdw"><span class="productname">Postgres</span>外部数据封装器</a>
贡献模块，以允许访问其他<span class="productname">Postgres</span>服务器 (Shigeru Hanada)</p><p>这个外部数据封装器支持写。</p></li><li class="listitem"><p>添加<a class="link" href="pgwaldump.html" title="pg_waldump"><span class="application">pg_xlogdump</span></a>贡献程序 (Andres Freund)</p></li><li class="listitem"><p>添加对在<a class="link" href="pgtrgm.html" title="F.32. pg_trgm"><span class="productname">pg_trgm</span></a>中索引正则表达式搜索的支持
(Alexander Korotkov)</p></li><li class="listitem"><p>改善<a class="link" href="pgtrgm.html" title="F.32. pg_trgm"><span class="productname">pg_trgm</span></a>对多字节字符的处理 (Tom Lane)</p><p>在一个没有wcstombs()或towlower()库函数的平台上，这会导致<span class="productname">pg_trgm</span>
索引内容中非ASCII数据的不兼容的改变。在这样的情况下，<code class="command">REINDEX</code>
这些索引以确保正确的搜索结果。</p></li><li class="listitem"><p>添加一个<a class="link" href="pgstattuple.html" title="F.31. pgstattuple">pgstattuple</a>函数，报告<acronym class="acronym">GIN</acronym>
索引等待插入的列表的大小 (Fujii Masao)</p></li><li class="listitem"><p>让<a class="link" href="oid2name.html" title="oid2name"><span class="application">oid2name</span></a>,
<a class="link" href="pgbench.html" title="pgbench"><span class="application">pgbench</span></a>,
和<a class="link" href="vacuumlo.html" title="vacuumlo"><span class="application">vacuumlo</span></a>设置
<code class="varname">fallback_application_name</code> (Amit Kapila)</p></li><li class="listitem"><p>改善<a class="link" href="pgtesttiming.html" title="pg_test_timing"><span class="application">pg_test_timing</span></a>的输出 (Bruce Momjian)</p></li><li class="listitem"><p>改善<a class="link" href="pgtestfsync.html" title="pg_test_fsync"><span class="application">pg_test_fsync</span></a> 的输出 (Peter Geoghegan)</p></li><li class="listitem"><p>创建一个专用的外部数据封装器，带有它自己的选项验证器函数，
<a class="link" href="dblink.html" title="F.11. dblink">dblink</a> (Shigeru Hanada)</p><p>当使用这个FDW定义一个<span class="application">dblink</span>连接的目标时，取代使用连接选项的硬连线列表，
咨询底层的<span class="application">libpq</span>库查看支持哪个连接选项。</p></li></ul></div><div class="sect4" id="idp70128912"><div class="titlepage"><div><div><h5 class="title">E.57.3.11.1. <a class="link" href="pgupgrade.html" title="pg_upgrade"><span class="application">pg_upgrade</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>允许<span class="application">pg_upgrade</span>并行转储和恢复 (Bruce Momjian, Andrew Dunstan)</p><p>这允许数据库的并行模式转储/恢复，也允许每个表空间并行拷贝/连接数据文件。
使用<code class="option">--jobs</code>选项指定并行的级别。</p></li><li class="listitem"><p>让<span class="application">pg_upgrade</span>在当前目录中创建Unix域套接字 (Bruce Momjian, Tom Lane)</p><p>这减少了在升级期间某个人意外连接的可能性。</p></li><li class="listitem"><p>让<span class="application">pg_upgrade</span> <code class="option">--check</code>模式正确的检测非缺省套接字目录的位置
(Bruce Momjian, Tom Lane)</p></li><li class="listitem"><p>为拥有许多表的数据库提高<span class="application">pg_upgrade</span>的性能 (Bruce Momjian)</p></li><li class="listitem"><p>通过显示执行的命令改进<span class="application">pg_upgrade</span>的日志 (Álvaro Herrera)</p></li><li class="listitem"><p>改进拷贝/连接期间<span class="application">pg_upgrade</span>的状态显示 (Bruce Momjian)</p></li></ul></div></div><div class="sect4" id="idp70139024"><div class="titlepage"><div><div><h5 class="title">E.57.3.11.2. <a class="link" href="pgbench.html" title="pgbench"><span class="application">pgbench</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>添加<code class="option">--foreign-keys</code>选项到<span class="application">pgbench</span> (Jeff Janes)</p><p>这添加了外键约束到<span class="application">pgbench</span>创建的标准表，用于外键性能测试。</p></li><li class="listitem"><p>允许<span class="application">pgbench</span>集合性能统计和每<code class="option">--aggregate-interval</code>
秒产生输出 (Tomas Vondra)</p></li><li class="listitem"><p>添加<span class="application">pgbench</span> <code class="option">--sampling-rate</code>选项，
控制事务日志的百分比 (Tomas Vondra)</p></li><li class="listitem"><p>减少并改进<span class="application">pgbench</span>的初始化模式的状态消息输出 (Robert Haas, Peter Eisentraut)</p></li><li class="listitem"><p>添加<span class="application">pgbench</span> <code class="option">-q</code>模式，每5秒打印一行输出 (Tomas Vondra)</p></li><li class="listitem"><p>在初始化期间输出<span class="application">pgbench</span>经过和预估的剩余时间 (Tomas Vondra)</p></li><li class="listitem"><p>允许<span class="application">pgbench</span>使用更大的比例系数，当请求的比例系数超过20000时，
改变相关的字段从<code class="type">integer</code>到<code class="type">bigint</code> (Greg Smith)</p></li></ul></div></div></div><div class="sect3" id="idp70152384"><div class="titlepage"><div><div><h4 class="title">E.57.3.12. 文档</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>允许创建<span class="productname">EPUB</span>格式文档 (Peter Eisentraut)</p></li><li class="listitem"><p>更新<span class="productname">FreeBSD</span>内核配置文档 (Brad Davis)</p></li><li class="listitem"><p>改进<a class="link" href="tutorial-window.html" title="3.5. 窗口函数"><code class="literal">WINDOW</code>函数</a>文档
(Bruce Momjian, Florian Pflug)</p></li><li class="listitem"><p>添加<a class="link" href="docguide-toolsets.html" title="J.2. 工具集">使用说明</a>，
在<span class="productname">macOS</span>上建立文档工具链 (Peter Eisentraut)</p></li><li class="listitem"><p>改进<a class="link" href="runtime-config-wal.html#GUC-COMMIT-DELAY"><code class="varname">commit_delay</code></a>
文档 (Peter Geoghegan)</p></li></ul></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-9-3-1.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="release-9-2-24.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">E.56. 版本 9.3.1 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> E.58. 版本 9.2.24</td></tr></table></div></body></html>
