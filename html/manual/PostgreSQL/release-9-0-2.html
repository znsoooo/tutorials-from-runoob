<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.129. 版本 9.0.2</title><link rel="stylesheet" type="text/css" href="../../0/stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-9-0-3.html" title="E.128. 版本 9.0.3" /><link rel="next" href="release-9-0-1.html" title="E.130. 版本 9.0.1" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.129. 版本 9.0.2</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-9-0-3.html" title="E.128. 版本 9.0.3">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="附录 E. 版本说明">上一级</a></td><th width="60%" align="center">附录 E. 版本说明</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.1 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="release-9-0-1.html" title="E.130. 版本 9.0.1">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-9-0-2"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.129. 版本 9.0.2</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-9-0-2.html#idp75476944">E.129.1. 迁移到版本 9.0.2</a></span></dt><dt><span class="sect2"><a href="release-9-0-2.html#idp75477680">E.129.2. 修改列表</a></span></dt></dl></div><p><strong>发布日期：. </strong>2010-12-16</p><p>这个版本包含各种自9.0.1以来的修复。要想获得关于9.0主版本的新特性信息，
请参阅<a class="xref" href="release-9-0.html" title="E.131. 版本 9.0">第 E.131 节</a>。</p><div class="sect2" id="idp75476944"><div class="titlepage"><div><div><h3 class="title">E.129.1. 迁移到版本 9.0.2</h3></div></div></div><p>运行9.0.X版本的用户不需要转储/恢复。</p></div><div class="sect2" id="idp75477680"><div class="titlepage"><div><div><h3 class="title">E.129.2. 修改列表</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>强制缺省<a class="link" href="runtime-config-wal.html#GUC-WAL-SYNC-METHOD"><code class="varname">wal_sync_method</code></a>
在Linux上为<code class="literal">fdatasync</code> (Tom Lane, Marti Raudsepp)</p><p>linux上的缺省实际上已经<code class="literal">fdatasync</code>很多年了，但是最近的内核改变导致
<span class="productname">PostgreSQL</span>选择了<code class="literal">open_datasync</code>。
这个选择不会导致任何性能改进，并且在某些文件系统上导致彻底的失败，
尤其是带有<code class="literal">data=journal</code>接口选项的<code class="literal">ext4</code>。</p></li><li class="listitem"><p>修复热备重放期间的<span class="quote">“<span class="quote">too many KnownAssignedXids</span>”</span>错误 (Heikki Linnakangas)</p></li><li class="listitem"><p>修复热备期间锁捕获中的竞态条件 (Simon Riggs)</p></li><li class="listitem"><p>避免热备期间不必要的冲突 (Simon Riggs)</p><p>这修复了一些认为重放与备用查询相冲突的情况（导致重放延迟或可能取消查询），
但是没有真正的冲突。</p></li><li class="listitem"><p>修复为GIN索引WAL重放逻辑中的各种错误 (Tom Lane)</p><p>这会导致复制期间<span class="quote">“<span class="quote">bad buffer id: 0</span>”</span>失败或索引内容的损坏。</p></li><li class="listitem"><p>修复起始检查点WAL记录和它的重做点不在同一个WAL段中时的从基础备份中恢复 (Jeff Davis)</p></li><li class="listitem"><p>修复在创建主数据库集群之后立即启用流复制时的极端情况错误 (Heikki Linnakangas)</p></li><li class="listitem"><p>修复多个workers持续活跃了很长一段时间时autovacuum workers的持续放缓 (Tom Lane)</p><p>autovacuum worker如果处理了足够的表，那么它有效的<code class="varname">vacuum_cost_limit</code>
可以下降到接近零，导致它运行极其的慢。</p></li><li class="listitem"><p>修复autovacuum启动器中长期的内存泄露 (Alvaro Herrera)</p></li><li class="listitem"><p>避免试图从一个事务外面报告一个迫近的事务概括条件时的失败 (Tom Lane)</p><p>这个监督防止了事务概括太近之后的恢复，因为数据库启动处理会失败。</p></li><li class="listitem"><p>添加支持检测寄存器栈在<code class="literal">IA64</code>上溢出 (Tom Lane)</p><p><code class="literal">IA64</code>体系结构有两个硬件堆栈。全面预防堆栈溢出失败都需要检查。</p></li><li class="listitem"><p>添加一个<code class="function">copyObject()</code>中堆栈溢出的检查 (Tom Lane)</p><p>某些代码路径会由于给出足够复杂的查询堆栈溢出而崩溃。</p></li><li class="listitem"><p>修复临时GiST索引中页面分裂的检测 (Heikki Linnakangas)</p><p>在一个临时索引中有<span class="quote">“<span class="quote">并发的</span>”</span>页分裂是可能的，例如有一个打开的游标在插入时扫描索引。
GiST未能检测这种情况，并且因此可能当游标的执行继续时交付错误的结果。</p></li><li class="listitem"><p>修复早期连接过程期间的错误检查 (Tom Lane)</p><p>太多子进程的检查在某些情况下是跳过的，
可能会导致试图添加新的子进程到固定大小的数组时postmaster崩溃。</p></li><li class="listitem"><p>提高窗口函数的效率 (Tom Lane)</p><p>某些情况需要提前读取大量的元组，但是<code class="varname">work_mem</code>足够大的允许它们都在内存中进行，
这会出乎意料的慢。尤其是<code class="function">percent_rank()</code>, <code class="function">cume_dist()</code> 和 
<code class="function">ntile()</code>有这个问题。</p></li><li class="listitem"><p>避免<code class="command">ANALYZE</code>复杂的索引表达式时的内存泄露 (Tom Lane)</p></li><li class="listitem"><p>确保使用整行Var的索引依赖于它的表 (Tom Lane)</p><p>一个像<code class="literal">create index i on t (foo(t.*))</code>这样声明的索引，
当它的表被删除时它不会自动被删除。</p></li><li class="listitem"><p>在<code class="command">DROP OWNED BY</code>中为删除属于一个用户的外部数据封装/服务器权限添加缺失支持 (Heikki Linnakangas)</p></li><li class="listitem"><p>不要用多个<code class="literal">OUT</code>参数<span class="quote">“<span class="quote">inline</span>”</span>一个SQL函数 (Tom Lane)</p><p>这避免了由于丢失关于预期的结果行类型的信息而引起的可能的崩溃。</p></li><li class="listitem"><p>修复内联一个参数列表包含一个引用可内联的用户函数的设置返回函数时的崩溃 (Tom Lane)</p></li><li class="listitem"><p>如果<code class="literal">ORDER BY</code>, <code class="literal">LIMIT</code>, <code class="literal">FOR UPDATE</code>, 或 
<code class="literal">WITH</code>附属于<code class="literal">INSERT ... VALUES</code>的<code class="literal">VALUES</code>部分则行为正确 (Tom Lane)</p></li><li class="listitem"><p>使<code class="literal">OFF</code>关键字无限制 (Heikki Linnakangas)</p><p>这阻止了在<span class="application">PL/pgSQL</span>中使用<code class="literal">off</code>作为变量名的问题。
在9.0之前是好用的，但是现在打破了，因为<span class="application">PL/pgSQL</span>
现在将所有的内核保留字作为保留的。</p></li><li class="listitem"><p>修复<code class="literal">COALESCE()</code>表达式的常量部分 (Tom Lane)</p><p>规划器有时试图计算子表达式，实际上从未达成，可能导致预想不到的错误。</p></li><li class="listitem"><p>修复<span class="quote">“<span class="quote">could not find pathkey item to sort</span>”</span>规划器带有整行Vars比较失败 (Tom Lane)</p></li><li class="listitem"><p>修复连接接受（<code class="function">accept()</code>或在它之后立即做的调用中的一个）失败时的postmaster崩溃，
并且postmaster是用GSSAPI支持编译的 (Alexander Chernikov)</p></li><li class="listitem"><p>在从RADIUS认证服务器接收到一个无效的响应包之后重试 (Magnus Hagander)</p><p>这修复了一个低风险潜在拒绝服务的情况。</p></li><li class="listitem"><p>修复了<code class="varname">log_temp_files</code>活跃时错过了删除临时文件 (Tom Lane)</p><p>如果在试图发出日志消息时发生错误，删除文件没有做，导致临时文件的积累。</p></li><li class="listitem"><p>为<code class="structname">InhRelation</code>节点添加打印功能 (Tom Lane)</p><p>这避免了启动<code class="varname">debug_print_parse</code>和执行确定类型的查询时的失败。</p></li><li class="listitem"><p>修复了从一个点到一个水平线段的距离的不正确的计算 (Tom Lane)</p><p>这个错误影响几个不同的几何距离测量操作。</p></li><li class="listitem"><p>修复<span class="application">ecpg</span>中交易状态的不正确的计算 (Itagaki Takahiro)</p></li><li class="listitem"><p>修复<span class="application">psql</span>的Unicode转义支持中的错误 (Tom Lane)</p></li><li class="listitem"><p>当归档包含许多大对象（blobs）时加速并行的<span class="application">pg_restore</span> (Tom Lane)</p></li><li class="listitem"><p>修复<span class="application">PL/pgSQL</span>处理<span class="quote">“<span class="quote">简单的</span>”</span>表达式，以不在递归或错误恢复的情况下失败 (Tom Lane)</p></li><li class="listitem"><p>修复<span class="application">PL/pgSQL</span>错误报告no-such-column的情况 (Tom Lane)</p><p>截止到9.0，有时会报告<span class="quote">“<span class="quote">missing FROM-clause entry for table foo</span>”</span>，
而此时<span class="quote">“<span class="quote">record foo has no field bar</span>”</span>将会更合适。</p></li><li class="listitem"><p>修复分配到元组字段时<span class="application">PL/Python</span>遵从typmod（也就是，长度或精度限制） (Tom Lane)</p><p>这修复了从8.4的回归。</p></li><li class="listitem"><p>修复<span class="application">PL/Python</span>处理设置返回函数 (Jan Urbanski)</p><p>试图在迭代器中调用SPI函数生成一个设置结果将会失败。</p></li><li class="listitem"><p>修复<code class="filename">contrib/cube</code>的GiST picksplit算法中的错误 (Alexander Korotkov)</p><p>这可能会导致大量的低效，尽管不是实际上错误的答案，在<code class="type">cube</code>字段上的GiST索引中。
如果你有这样的一个索引，那么考虑在安装这个更新之后<code class="command">REINDEX</code>它。</p></li><li class="listitem"><p>不要在<code class="filename">contrib/dblink</code>中发出<span class="quote">“<span class="quote">identifier will be truncated</span>”</span>通知，
除非创建新的连接时 (Itagaki Takahiro)</p></li><li class="listitem"><p>修复<code class="filename">contrib/pgcrypto</code>中丢失公钥潜在的内核转储 (Marti Raudsepp)</p></li><li class="listitem"><p>修复<code class="filename">contrib/pg_upgrade</code>中的缓冲区溢出 (Hernan Gonzalez)</p></li><li class="listitem"><p>修复<code class="filename">contrib/xml2</code>的XPath查询函数中的内存泄露 (Tom Lane)</p></li><li class="listitem"><p>更新失去数据文件为<span class="application">tzdata</span>版本2010o，因为DST规律在Fiji和Samoa发生了改变；
还有Hong Kong的历史修正。</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-9-0-3.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="release-9-0-1.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">E.128. 版本 9.0.3 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> E.130. 版本 9.0.1</td></tr></table></div></body></html>
