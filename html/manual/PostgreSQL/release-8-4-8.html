<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.146. 版本8.4.8</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-8-4-9.html" title="E.145. 版本8.4.9" /><link rel="next" href="release-8-4-7.html" title="E.147. 版本8.4.7" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.146. 版本8.4.8</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-8-4-9.html" title="E.145. 版本8.4.9">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="附录 E. 版本说明">上一级</a></td><th width="60%" align="center">附录 E. 版本说明</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.1 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="release-8-4-7.html" title="E.147. 版本8.4.7">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-8-4-8"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.146. 版本8.4.8</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-8-4-8.html#idp76853312">E.146.1. 迁移到版本8.4.8</a></span></dt><dt><span class="sect2"><a href="release-8-4-8.html#idp76858688">E.146.2. 变化</a></span></dt></dl></div><p><strong>发布日期：. </strong>2011-04-18</p><p>    该发布包含来自8.4.7的各种修复，
关于8.4主要发布的新功能信息，
参阅<a class="xref" href="release-8-4.html" title="E.154. 版本8.4">第 E.154 节</a>。</p><div class="sect2" id="idp76853312"><div class="titlepage"><div><div><h3 class="title">E.146.1. 迁移到版本8.4.8</h3></div></div></div><p>      运行8.4.X不需要备份/恢复。</p><p>    然而，如果你的安装是通过运行<span class="application">pg_upgrade</span>从
原先主要发布中更新，你应该采取措施避免
由于<span class="application">pg_upgrade</span>中现在修复错误
可能的数据丢失。建议方法是在所有TOAST表上运行<code class="command">VACUUM FREEZE</code>。
<a class="ulink" href="http://wiki.postgresql.org/wiki/20110408pg_upgrade_fix" target="_top">http://wiki.postgresql.org/wiki/20110408pg_upgrade_fix</a>中更多信息可用。
</p><p>     另外，如果你从8.4.2更早版本更新，参阅<a class="xref" href="release-8-4-2.html" title="E.152. 版本8.4.2">第 E.152 节</a>。</p></div><div class="sect2" id="idp76858688"><div class="titlepage"><div><div><h3 class="title">E.146.2. 变化</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    修复<span class="application">pg_upgrade</span>的TOAST表处理(Bruce Momjian)</p><p>     TOAST表的<code class="structname">pg_class</code>.<code class="structfield">relfrozenxid</code>值
 不能被正确拷贝到<span class="application">pg_upgrade</span>中的新安装中。
 当它们仍然需要验证TOAST表中的元组时，这可能会导致丢弃<code class="literal">pg_clog</code>，
 导致<span class="quote">“<span class="quote">无法访问事务状态</span>”</span>错误。</p><p>      这个错误引起使用<span class="application">pg_upgrade</span>更新的安装中数据丢失的显著风险。
  该补丁校对<span class="application">pg_upgrade</span>未来使用中的错误，
  但是自身并不能解决已被<span class="application">pg_upgrade</span>旧版本处理的安装中的问题。</p></li><li class="listitem"><p>    抑制不正确的<span class="quote">“<span class="quote">PD_ALL_VISIBLE标记被不正确地设置</span>”</span>警告(Heikki Linnakangas)</p><p>    <code class="command">VACUUM</code>有时在实际有效的情况下发出警告。</p></li><li class="listitem"><p>    不允许完全包含复合类型(Tom Lane)</p><p>   当处理复合类型的时候，这可以避免服务器无限地重现的情况。虽然有些可能
   用这种结构，它们似乎不足以证明可以确保安全工作。</p></li><li class="listitem"><p>    避免目录缓存初始化期间潜在死锁(Nikhil Sontakke)</p><p>      在某些情况下，缓存加载代码会在锁定索引的目录之前的系统索引上获取共享锁。 
      这可能停顿过程以试图获取排他锁，采用更多的标准顺序。</p></li><li class="listitem"><p>   当有一个并发更新到目标元组时，修复<code class="literal">BEFORE ROW UPDATE</code>触发器处理中的
   悬挂指针问题(Tom Lane)</p><p>      当尝试执行<code class="literal">UPDATE RETURNING ctid</code>的时候，
  已被观察到的这个错误导致间歇性<span class="quote">“<span class="quote">无法从虚拟元组提取系统属性</span>”</span>错误。
  对于更严重的错误有一个非常小的概率，如为更新的元组产生不正确的索引项。</p></li><li class="listitem"><p>   当有表的等待延迟触发器事件时，不允许<code class="command">DROP TABLE</code>(Tom Lane)</p><p>    以前<code class="command">DROP</code>可以通过，当触发器最终被唤起时，
导致<span class="quote">“<span class="quote">无法打开OID nnn关系</span>”</span>的错误。
</p></li><li class="listitem"><p>  在GEQO优化期间，避免通过常量错误WHERE条件触发崩溃(Tom Lane)</p></li><li class="listitem"><p>    提高半连接和反连接情况中规划器的处理(Tom Lane)</p></li><li class="listitem"><p>    修复解释空的原因的文本搜索的选择性估计(Jesper Krogh)</p></li><li class="listitem"><p>    提高处理已删除列行类型的PL/pgSQL的能力(Pavel Stehule)</p><p>    这是在9.0之前修复后补丁。</p></li><li class="listitem"><p>    修复涉及到数组片段的PL/Python内存泄露(Daniel Popowich) </p></li><li class="listitem"><p>    修复<span class="application">pg_restore</span>处理TOC文件中长线(超过1KB) (Tom Lane)</p></li><li class="listitem"><p>      采取更多防御措施阻止崩溃，由于使用过度热情的编译器优化除以零(Aurelien Jarno)</p></li><li class="listitem"><p>    支持MIPS上FreeBSD和OpenBSD中dlopen()的使用(Tom Lane)</p><p>    有一个硬连线假设，即该系统函数
在这些系统上的MIPS硬件上不可用。代替使用编译测试，
因为最新版本中存在。</p></li><li class="listitem"><p>    修复HP-UX上编译失败(Heikki Linnakangas)</p></li><li class="listitem"><p>    解决Windows上与<span class="application">libintl</span>版本不兼容问题(Hiroshi Inoue)</p></li><li class="listitem"><p>    修复Windows编译脚本中<span class="application">xcopy</span>的使用
以便在Windows 7中正常工作(Andrew Dunstan)</p><p>   这只影响到编译脚本，没有安装或者使用。</p></li><li class="listitem"><p>     修复Cygwin上的<span class="application">pg_regress</span>使用的路径分隔符(Andrew Dunstan)</p></li><li class="listitem"><p>    为了Chile, Cuba, Falkland Islands, Morocco, Samoa,
    和Turkey中DST变化规律更新时区数据文件到<span class="application">tzdata</span>发布2011f；
同时为South Australia, Alaska和Hawaii进行历史修正。</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-8-4-9.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="release-8-4-7.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">E.145. 版本8.4.9 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> E.147. 版本8.4.7</td></tr></table></div></body></html>
