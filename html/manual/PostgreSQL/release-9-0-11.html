<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.120. 版本 9.0.11</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-9-0-12.html" title="E.119. 版本 9.0.12" /><link rel="next" href="release-9-0-10.html" title="E.121. 版本 9.0.10" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.120. 版本 9.0.11</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-9-0-12.html" title="E.119. 版本 9.0.12">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="附录 E. 版本说明">上一级</a></td><th width="60%" align="center">附录 E. 版本说明</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.1 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="release-9-0-10.html" title="E.121. 版本 9.0.10">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-9-0-11"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.120. 版本 9.0.11</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-9-0-11.html#idp74977088">E.120.1. 迁移到版本 9.0.11</a></span></dt><dt><span class="sect2"><a href="release-9-0-11.html#idp74978848">E.120.2. 修改列表</a></span></dt></dl></div><p><strong>发布日期：. </strong>2012-12-06</p><p>这个版本包含各种自9.0.10以来的修复。想要获得关于9.0主版本的新特性信息，
请参阅<a class="xref" href="release-9-0.html" title="E.131. 版本 9.0">第 E.131 节</a>。</p><div class="sect2" id="idp74977088"><div class="titlepage"><div><div><h3 class="title">E.120.1. 迁移到版本 9.0.11</h3></div></div></div><p>运行9.0.X的系统不需要转储/恢复。</p><p>另外，如果你是从一个早于9.0.6的版本升级而来，请参阅<a class="xref" href="release-9-0-6.html" title="E.125. 版本 9.0.6">第 E.125 节</a>。</p></div><div class="sect2" id="idp74978848"><div class="titlepage"><div><div><h3 class="title">E.120.2. 修改列表</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>修复了多个与<code class="command">CREATE INDEX CONCURRENTLY</code>相关的错误 (Andres Freund, Tom Lane)</p><p>修复<code class="command">CREATE INDEX CONCURRENTLY</code>以在改变一个索引的<code class="structname">pg_index</code>
行的状态时使用按照地点的更新。这阻止了会导致并发会话错过更新目标索引的竞态条件，
因此导致损坏并发创建的索引。</p><p>另外，修复了各种其他操作，以保证它们忽略失败的<code class="command">CREATE INDEX CONCURRENTLY</code>
命令产生的无效的索引。最重要的是<code class="command">VACUUM</code>，
因为在采取正确的动作修复或删除无效的索引之前，一个auto-vacuum可以很容易的在一个表上发起。</p></li><li class="listitem"><p>修复WAL重放期间的缓冲区锁定 (Tom Lane)</p><p>当重放WAL记录影响多于一页时，WAL重放代码关于锁定缓冲区不够小心。
这会导致热备份查询短暂的看到不一致的状态，导致错误响应或意外的失败。</p></li><li class="listitem"><p>修复在GIN索引的WAL生产逻辑中的一个错误 (Tom Lane)</p><p>如果发生页撕裂错误，这会导致索引损坏。</p></li><li class="listitem"><p>当推进热备份服务器正常运行时，适当的删除启动进程的虚拟XID锁 (Simon Riggs)</p><p>这个监管可以阻止特定操作（如<code class="command">CREATE INDEX CONCURRENTLY</code>）的连续执行。</p></li><li class="listitem"><p>避免备用模式中虚假的<span class="quote">“<span class="quote">out-of-sequence timeline ID</span>”</span>错误 (Heikki Linnakangas)</p></li><li class="listitem"><p>阻止postmaster在收到关闭信号后发起新的子进程 (Tom Lane)</p><p>这个错误能引起关闭的时间更长，甚至在没有额外的用户动作下永不完成。</p></li><li class="listitem"><p>避免内存溢出时内部哈希表的损坏 (Hitoshi Harada)</p></li><li class="listitem"><p>修复外连接上非绝对相等子句的规划 (Tom Lane)</p><p>该规划会导致不正确的约束：一个子句等于一个其他非绝对构造，例如
<code class="literal">WHERE COALESCE(foo, 0) = 0</code>，当<code class="literal">foo</code>
来自一个外连接的可为null方时。</p></li><li class="listitem"><p>改善规划的能力，检验来自相等子句的排他约束 (Tom Lane)</p></li><li class="listitem"><p>修复散列的子规划中的部分行匹配，正确的处理交叉类型情况 (Tom Lane)</p><p>这个影响多字段<code class="literal">NOT IN</code>子规划，如<code class="literal">WHERE (a, b) NOT IN (SELECT x, y FROM ...)</code>
中<code class="literal">b</code>和<code class="literal">y</code>分别是<code class="type">int4</code>和<code class="type">int8</code>的情况。
这个错误导致错误响应或崩溃依赖于特定包含的数据类型。</p></li><li class="listitem"><p>当为一个<code class="literal">AFTER ROW UPDATE/DELETE</code>触发器重新抓取老的元组时获得缓冲区锁 (Andres Freund)</p><p>在不寻常的情况下，这个疏忽会导致外键强制触发器传送不正确的数据到预先检查逻辑。
这样会导致一个崩溃，或一个关于是否触发该触发器的不正确的决定。</p></li><li class="listitem"><p>修复<code class="command">ALTER COLUMN TYPE</code>正确的处理非继承的检查约束 (Pavan Deolasee)</p><p>这在8.4之前的版本中运行正确，现在在8.4和之后的版本中也正确运行了。</p></li><li class="listitem"><p>修复<code class="command">REASSIGN OWNED</code>处理表空间上的授权 (Álvaro Herrera)</p></li><li class="listitem"><p>为视图系统字段忽略不正确的<code class="structname">pg_attribute</code>条目 (Tom Lane)</p><p>视图没有任何系统字段。不过，我们在转换一个表到一个视图时忘记删除这样的条目。
这在9.3和之后的版本中适当的修复了，但是，在之前的分支中我们需要防卫现存的错误转换的视图。</p></li><li class="listitem"><p>修复规则打印以正确的转储<code class="literal">INSERT INTO <em class="replaceable"><code>table</code></em>
      DEFAULT VALUES</code> (Tom Lane)</p></li><li class="listitem"><p>当在一个查询中有太多<code class="literal">UNION</code>/<code class="literal">INTERSECT</code>/<code class="literal">EXCEPT</code>
子句时，防止堆栈溢出 (Tom Lane)</p></li><li class="listitem"><p>当用-1除最小可能的整数时，阻止依赖于平台的失败 (Xi Wang, Tom Lane)</p></li><li class="listitem"><p>修复日期解析中可能的以字符串结束的存取经过 (Hitoshi Harada)</p></li><li class="listitem"><p>修复在检查点和<code class="varname">wal_level</code>是<code class="literal">hot_standby</code>期间，
如果发生XID打包未能提前XID纪元的错误 (Tom Lane, Andres Freund)</p><p>这个错误对<span class="productname">PostgreSQL</span>本身没有特别的影响，
不利于依赖于<code class="function">txid_current()</code>和相关函数的应用：
TXID值将会看起来向后退了。</p></li><li class="listitem"><p>如果一个Unix域套接字的路径名长度超出平台特定的限制，则产生一个可以理解的错误消息 (Tom Lane, Andrew Dunstan)</p><p>以前，这会产生相当没有帮助的事物，如<span class="quote">“<span class="quote">Non-recoverable failure in name resolution</span>”</span>。</p></li><li class="listitem"><p>修复发送复合字段值到客户端时的内存泄露 (Tom Lane)</p></li><li class="listitem"><p>使<span class="application">pg_ctl</span>读取<code class="filename">postmaster.pid</code>文件更强健 (Heikki Linnakangas)</p><p>修复竞态条件和可能的文件描述符泄露。</p></li><li class="listitem"><p>修复<span class="application">psql</span>中可能的崩溃，如果提出了不正确编码的数据和
<code class="varname">client_encoding</code>设置是一个客户端唯一编码（如 SJIS） (Jiang Guiqing)</p></li><li class="listitem"><p>修复<code class="filename">restore.sql</code>脚本中的错误，该脚本由<span class="application">pg_dump</span>
以<code class="literal">tar</code>输出格式发出 (Tom Lane)</p><p>该脚本在名字包含大写字母的表上将会完全的失败。另外，
使得该脚本可以在<code class="option">--inserts</code>模式和定期的COPY模式中存储数据。</p></li><li class="listitem"><p>修复<span class="application">pg_restore</span>接受符合POSIX的<code class="literal">tar</code>文件 (Brian Weaver, Tom Lane)</p><p><span class="application">pg_dump</span>的<code class="literal">tar</code>输出模式的原始编码产生的文件并不完全符合POSIX标准。
这在版本9.3中已经纠正了。这个补丁更新之前的分支，所以它们将接受正确和不正确的格式，
希望9.3出来时避免兼容性问题。</p></li><li class="listitem"><p>修复<span class="application">pg_resetxlog</span>以正确的定位<code class="filename">postmaster.pid</code>，
当给出一个相关的路径到数据目录时 (Tom Lane)</p><p>这个错误会导致<span class="application">pg_resetxlog</span>不注意这里有一个活动的postmaster使用该数据目录。</p></li><li class="listitem"><p>修复<span class="application">libpq</span>的<code class="function">lo_import()</code>和<code class="function">lo_export()</code>
函数以适当的报告文件I/O错误 (Tom Lane)</p></li><li class="listitem"><p>修复<span class="application">ecpg</span>嵌套结构指针变量的流程 (Muhammad Usama)</p></li><li class="listitem"><p>修复<span class="application">ecpg</span>的<code class="function">ecpg_get_data</code>函数正确的处理数组 (Michael Meskes)</p></li><li class="listitem"><p>使<code class="filename">contrib/pageinspect</code>的btree页面检查函数在检查页面时获得缓冲区锁 (Tom Lane)</p></li><li class="listitem"><p>修复<span class="application">pgxs</span>支持以在AIX上建立可加载的模块 (Tom Lane)</p><p>在不在AIX上运行的原始源代码树之外建立模块。</p></li><li class="listitem"><p>更新时区数据文件到<span class="application">tzdata</span>版本2012j，因为DST规律在下列地区改变了：
Cuba, Israel, Jordan, Libya, Palestine, Western Samoa, 还有部分 Brazil。</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-9-0-12.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="release-9-0-10.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">E.119. 版本 9.0.12 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> E.121. 版本 9.0.10</td></tr></table></div></body></html>
