<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.154. 版本8.4</title><link rel="stylesheet" type="text/css" href="../../0/stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-8-4-1.html" title="E.153. 版本8.4.1" /><link rel="next" href="release-8-3-23.html" title="E.155. 版本8.3.23" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.154. 版本8.4</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-8-4-1.html" title="E.153. 版本8.4.1">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="附录 E. 版本说明">上一级</a></td><th width="60%" align="center">附录 E. 版本说明</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.1 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="release-8-3-23.html" title="E.155. 版本8.3.23">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-8-4"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.154. 版本8.4</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-8-4.html#idp77318864">E.154.1. 概要</a></span></dt><dt><span class="sect2"><a href="release-8-4.html#idp77330000">E.154.2. 迁移到版本8.4</a></span></dt><dt><span class="sect2"><a href="release-8-4.html#idp77405760">E.154.3. 变化</a></span></dt></dl></div><p><strong>发布日期：. </strong>2009-07-01</p><div class="sect2" id="idp77318864"><div class="titlepage"><div><div><h3 class="title">E.154.1. 概要</h3></div></div></div><p>    经过多年研发后，<span class="productname">PostgreSQL</span>已经在许多领域特性比较完整。
该发布显示一个针对性方法来添加特性（比如，认证，监测，空间重利用），
并且添加在以后SQL标准中定义的能力。增强的主要方面是：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    窗口函数</p></li><li class="listitem"><p>   通用表表达式和递归查询</p></li><li class="listitem"><p>    函数缺省和可变参数</p></li><li class="listitem"><p>    并行恢复</p></li><li class="listitem"><p>    列权限</p></li><li class="listitem"><p>   每个数据库本地设置</p></li><li class="listitem"><p>    改进的哈希索引</p></li><li class="listitem"><p>    改进<code class="literal">EXISTS</code>和<code class="literal">NOT EXISTS</code>查询连接性能</p></li><li class="listitem"><p>    容易使用热备份</p></li><li class="listitem"><p>    空闲空间映射的自动大小</p></li><li class="listitem"><p>   可见映射（大大降低了缓慢变化表的清理开销）</p></li><li class="listitem"><p>    版本感知psql(旧服务器之前使用反斜杠命令)</p></li><li class="listitem"><p>    支持用户认证的SSL证书</p></li><li class="listitem"><p>   每个函数运行时统计</p></li><li class="listitem"><p>     psql中函数简单编辑</p></li><li class="listitem"><p>    新的contrib模块：pg_stat_statements, auto_explain, citext, btree_gin</p></li></ul></div><p>     在下面章节中将详细解释以上所列项。</p></div><div class="sect2" id="idp77330000"><div class="titlepage"><div><div><h3 class="title">E.154.2. 迁移到版本8.4</h3></div></div></div><p>    对于那些希望从任何以前发布中迁移数据是需要使用<span class="application">pg_dump</span>备份/恢复。</p><p>    观察下面的不兼容：</p><div class="sect3" id="idp77331888"><div class="titlepage"><div><div><h4 class="title">E.154.2.1. 普遍的</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    缺省使用64位整数日期时间(Neil Conway)</p><p>    以前通过<span class="application">configure</span>的<code class="option">--enable-integer-datetimes</code>选项进行选择。为保留旧操作，
与<code class="option">--disable-integer-datetimes</code>一起编译。</p></li><li class="listitem"><p>     删除<span class="application">ipcclean</span>实用命令(Bruce)</p><p>    该功能仅仅工作于几个平台上。用户应该使用他们的操作系统工具。</p></li></ul></div></div><div class="sect3" id="idp77336528"><div class="titlepage"><div><div><h4 class="title">E.154.2.2. 服务器设置</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>   为<code class="literal">log_min_messages</code>更改缺省设置为<code class="literal">warning</code>（以前为<code class="literal">notice</code>）
   以减少日志文件数量(Tom)</p></li><li class="listitem"><p>    为<code class="literal">max_prepared_transactions</code>改变缺省设置为零（以前为5）(Tom)</p></li><li class="listitem"><p>    使得<code class="literal">debug_print_parse</code>, <code class="literal">debug_print_rewritten</code>,
    和<code class="literal">debug_print_plan</code>在<code class="literal">LOG</code>消息级别输出，而不是像从前的<code class="literal">DEBUG1</code>(Tom)</p></li><li class="listitem"><p>    <code class="literal">debug_pretty_print</code>缺省为<code class="literal">on</code> (Tom)</p></li><li class="listitem"><p>     删除<code class="varname">explain_pretty_print</code>参数（不再需要的）(Tom)</p></li><li class="listitem"><p>     通过超级用户使得<code class="varname">log_temp_files</code>可定位，像其它日志选项(Simon Riggs)</p></li><li class="listitem"><p>    当没有<code class="literal">%</code>转义出现在<code class="literal">log_filename</code>中的时候，删除epoch时间戳的自动追加(Robert Haas)
</p><p>    该变化是因为有些用户想要一个已修复的日志文件名，用于外部日志轮换工具。</p></li><li class="listitem"><p>     从<code class="filename">recovery.conf</code>删除中删除<code class="varname">log_restartpoints</code>；
 代替使用<code class="varname">log_checkpoints</code> (Simon)</p></li><li class="listitem"><p>      删除<code class="varname">krb_realm</code>和<code class="varname">krb_server_hostname</code>;
  而是在<code class="filename">pg_hba.conf</code>中设置(Magnus)</p></li><li class="listitem"><p>    在<a class="link" href="release-8-4.html#RELEASE-8-4-PG-HBA-CONF" title="E.154.3.2.3. pg_hba.conf"><code class="filename">pg_hba.conf</code></a>中有显著变化，如下所述。</p></li></ul></div></div><div class="sect3" id="idp77356768"><div class="titlepage"><div><div><h4 class="title">E.154.2.3. 查询</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>     改变<code class="command">TRUNCATE</code>和<code class="command">LOCK</code>以适用于指定表的子表(Peter)</p><p>    这些命令现在接受避免处理子表的<code class="literal">ONLY</code>选项；如果需要旧操作，必须使用该选项。</p></li><li class="listitem"><p>    <code class="command">SELECT DISTINCT</code>和<code class="literal">UNION</code>/<code class="literal">INTERSECT</code>/<code class="literal">EXCEPT</code>
不再总是产生有序输出(Tom)</p><p>      之前，这些类型的查询总是通过排序/唯一的处理方式（即排序然后删除相邻重复）去除重复行。
  现在，他们可以通过哈希来实现，这不会生成有序输出。如果应用程序依赖于按照排序顺序的输出，
??????那么推荐解决方法是添加一个<code class="literal">ORDER BY</code>子句。作为一个短期解决方法，
      之前的操作可以通过禁用<code class="literal">enable_hashagg</code>被恢复，但是这是一个性能昂贵的修复。
  <code class="literal">SELECT DISTINCT ON</code>从不使用散列，然而，因此，其操作不改变。</p></li><li class="listitem"><p>     强迫子表继承父表<code class="literal">CHECK</code>约束(Alex Hunsaker, Nikhil Sontakke, Tom)</p><p>    以前可能从子表中删除该约束，当扫描父表的时候，允许违背该约束的行可见。
这被认为是不一致的，也违背了SQL标准。</p></li><li class="listitem"><p>    禁止负的<code class="literal">LIMIT</code>或者<code class="literal">OFFSET</code>值，而不是将它们视为零(Simon) </p></li><li class="listitem"><p>    禁止事务块外的<code class="command">LOCK TABLE</code>(Tom)</p><p>    这样的操作是无效的，因为该锁将被立即释放。</p></li><li class="listitem"><p>    现在序列包含一个额外的<code class="structfield">start_value</code>列(Zoltan Boszormenyi)</p><p>     支持<code class="command">ALTER SEQUENCE ... RESTART</code>。</p></li></ul></div></div><div class="sect3" id="idp77374048"><div class="titlepage"><div><div><h4 class="title">E.154.2.4. 函数和操作符</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    采用<code class="type">numeric</code>零放到分数幂上返回<code class="literal">0</code>，而不是抛出错误，
并且采用<code class="type">numeric</code>零放到零幂上返回<code class="literal">1</code>，而不是错误(Bruce)</p><p>     这匹配长期的<code class="type">float8</code>操作。</p></li><li class="listitem"><p>     允许浮点值的一元负号产生负零(Tom)</p><p>     修改后操作更加遵循<acronym class="acronym">IEEE</acronym>-标准。</p></li><li class="listitem"><p>    如果转义字符是<code class="literal">LIKE</code>模式中的最后一个字符，抛出一个错误（即它没有任何转义）(Tom)</p><p>   此前，这样的转义字符被默默忽略掉，从而可能掩盖应用程序逻辑错误。</p></li><li class="listitem"><p>     删除以前用于<code class="literal">LIKE</code>索引比较的<code class="literal">~=~</code> and <code class="literal">~&lt;&gt;~</code>操作符(Tom)</p><p>    模式索引目前使用规则平等操作符。</p></li><li class="listitem"><p>     <code class="function">xpath()</code>现在将参数传递给<span class="application">libxml</span>没有任何变化(Andrew)</p><p>     这意味着XML参数必须是一个良好的XML文档。先前编码试图允许XML片段，
 但它并没有很好地工作。</p></li><li class="listitem"><p>    让<code class="function">xmlelement()</code>格式属性值就好像目录值(Peter) </p><p>       此前，属性值是按照正常的SQL输出操作被格式化，有时不符合XML规则。</p></li><li class="listitem"><p>    为<span class="application">libxml</span>-使用函数重写内存管理(Tom)</p><p>     这种变化应该避免在PL/Perl中使用<span class="application">libxml</span>和其他附加代码的一些兼容性问题。</p></li><li class="listitem"><p>    为哈希函数采取更快速算法(Kenneth Marshall,依据Bob Jenkins的工作)</p><p>     许多内置哈希函数现在在小端和大端平台上提供不同的结果。</p></li></ul></div><div class="sect4" id="idp77391520"><div class="titlepage"><div><div><h5 class="title">E.154.2.4.1. 时间函数和操作符</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>     <code class="varname">DateStyle</code>不再控制<code class="type">interval</code>输出格式；
 反而有一个新变量<code class="varname">IntervalStyle</code>(Ron Mayer)</p></li><li class="listitem"><p>    提高<code class="type">timestamp</code>和<code class="type">interval</code>输出中小数秒处理的一致性(Ron Mayer)</p><p>     这可能导致比以前显示不同数量的小数位，或者四舍五入而不是截断。</p></li><li class="listitem"><p>    使得<code class="function">to_char()</code>的本地的月份/日期名字依赖于<code class="varname">LC_TIME</code>，
而不是<code class="varname">LC_MESSAGES</code> (Euler Taveira de Oliveira)</p></li><li class="listitem"><p>     导致<code class="function">to_date()</code>和<code class="function">to_timestamp()</code>更加一致报告无效输入错误(Brendan Jurd)</p><p>        以前的版本中会常常忽略或默默地误读不匹配格式字符串的输入。
这种情况下将导致错误。</p></li><li class="listitem"><p>    为了子午线(<code class="literal">AM</code>/<code class="literal">PM</code>)和纪元
   (<code class="literal">BC</code>/<code class="literal">AD</code>)格式名称修复<code class="function">to_timestamp()</code>而不需要大写/小写匹配(Brendan Jurd)</p><p>    比如，输入值<code class="literal">ad</code>匹配格式字符串<code class="literal">AD</code>。</p></li></ul></div></div></div></div><div class="sect2" id="idp77405760"><div class="titlepage"><div><div><h3 class="title">E.154.3. 变化</h3></div></div></div><p>    下面你会发现在<span class="productname">PostgreSQL</span> 8.4和之前主要发布之间变化的详细说明。</p><div class="sect3" id="idp77407312"><div class="titlepage"><div><div><h4 class="title">E.154.3.1. 性能</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    完善优化统计计算(Jan Urbanski, Tom)</p><p>    尤其是，估计全文搜索操作符被大幅度提高。</p></li><li class="listitem"><p>     允许<code class="command">SELECT DISTINCT</code>和<code class="literal">UNION</code>/<code class="literal">INTERSECT</code>/<code class="literal">EXCEPT</code>可以使用哈希(Tom)</p><p>     这意味着这些类型的查询不再自动生成有序输出。</p></li><li class="listitem"><p>      创建半连接和反连接明确概念(Tom)</p><p>       这项工作正规化<code class="literal">IN(SELECT ...)</code>子句之前的点对点处理，   
   并延伸到<code class="literal">EXISTS</code>和<code class="literal">NOT EXISTS</code>子句中。   
   它可能导致<code class="literal">EXISTS</code>和<code class="literal">NOT EXISTS</code>查询更好地规划。
   一般情况下，逻辑上相同的<code class="literal">IN</code>和<code class="literal">EXISTS</code>子句有类似性能，
   而此前的<code class="literal">IN</code>获胜。  </p></li><li class="listitem"><p>   提高外部链接下子选择优化(Tom)</p><p>      以前，一个子选择或视图不能被很好的优化，
  如果它出现在外连接可空端并且在结果列中包含非严格表达式（比如，常量）。</p></li><li class="listitem"><p>    通过使用Boyer-Moore-Horspool搜索提高<code class="function">text_position()</code>和相关函数的性能(David Rowley)</p><p>   这对长期搜索模式特别有帮助。</p></li><li class="listitem"><p>    当需要的时候，通过写文件降低写入统计收集文件I/O负载(Martin Pihlak)</p></li><li class="listitem"><p>    提高批量插入性能(Robert Haas, Simon)</p></li><li class="listitem"><p>    从<code class="literal">10</code>到<code class="literal">100</code>增加<code class="varname">default_statistics_target</code>缺省值(Greg Sabino Mullane,Tom)</p><p>    最大值从<code class="literal">1000</code>增加到<code class="literal">10000</code>。 </p></li><li class="listitem"><p>    在涉及继承或者<code class="literal">UNION ALL</code>的查询中缺省执行<code class="varname">constraint_exclusion</code>检查(Tom)</p><p>    新的<code class="varname">constraint_exclusion</code>设置，<code class="literal">分区</code>被添加以指定该操作。</p></li><li class="listitem"><p>   允许I/O预读取位图索引扫描(Greg Stark)</p><p>    通过<code class="varname">effective_io_concurrency</code>控制预读数量。
只有内核有<code class="function">posix_fadvise()</code>支持时该功能可用。
</p></li><li class="listitem"><p>     内置<code class="literal">FROM</code>子句中简单集合返回<acronym class="acronym">SQL</acronym>函数(Richard Rowell)</p></li><li class="listitem"><p>     通过为连接密钥值提供一种特殊情况来优化多批次哈希连接性能，
 这种情况在外部关系中特别常见(Bryce Cutt, Ramon Lawrence) </p></li><li class="listitem"><p>     通过抑制<span class="quote">“<span class="quote">physical tlist</span>”</span>优化减少多批次哈希连接中临时数据量 
 (Michael Henderson, Ramon Lawrence) </p></li><li class="listitem"><p>   避免<code class="command">CREATE INDEX CONCURRENTLY</code>中等待空闲事务会话(Simon)</p></li><li class="listitem"><p>     改进共享缓存无效性能(Tom)</p></li></ul></div></div><div class="sect3" id="idp77436896"><div class="titlepage"><div><div><h4 class="title">E.154.3.2. 服务器</h4></div></div></div><div class="sect4" id="idp77437312"><div class="titlepage"><div><div><h5 class="title">E.154.3.2.1. 设置</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    转换许多<code class="filename">postgresql.conf</code>设置以枚举值，使得<code class="literal">pg_settings</code>
可以显示有效值(Magnus)</p></li><li class="listitem"><p>    添加<code class="varname">cursor_tuple_fraction</code>参数以控制规划器假设被抓取的游标行(Robert Hell)
</p></li><li class="listitem"><p>    允许<code class="filename">postgresql.conf</code>中自定义变量类下的下划线(Tom)</p></li></ul></div></div><div class="sect4" id="idp77441872"><div class="titlepage"><div><div><h5 class="title">E.154.3.2.2. 身份验证和安全</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    删除支持(不安全) <code class="literal">crypt</code>认证方法(Magnus)</p><p>     这有效地淘汰了先前<span class="productname">PostgreSQL</span>7.2客户端库，
 因为不再有他们可以使用的任何非明文口令方法。</p></li><li class="listitem"><p>     支持<code class="filename">pg_ident.conf</code>中正则表达式(Magnus)</p></li><li class="listitem"><p>    允许无需重启postmaster改变<span class="productname">Kerberos</span>/<acronym class="acronym">GSSAPI</acronym>参数(Magnus)</p></li><li class="listitem"><p>    支持服务器证书文件中<acronym class="acronym">SSL</acronym>证书链(Andrew Gierth)</p><p>     包括完整证书链使客户能够验证证书，
 而不需要存在于本地存储中的所有中间CA证书，这是商业CA的常见情况。</p></li><li class="listitem"><p>    报告连接<code class="literal">MD5</code>认证和<code class="varname">db_user_namespace</code>启动的相应错误消息(Bruce)</p></li></ul></div></div><div class="sect4" id="RELEASE-8-4-PG-HBA-CONF"><div class="titlepage"><div><div><h5 class="title">E.154.3.2.3. <code class="filename">pg_hba.conf</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    改变所有身份验证选项使用<code class="literal">name=value</code>语法(Magnus)</p><p>     这使得不兼容变化到<code class="literal">ldap</code>,<code class="literal">pam</code>和<code class="literal">ident</code>身份验证方法。
 所有使用这些方法的<code class="filename">pg_hba.conf</code>项需要使用新的格式被重写。</p></li><li class="listitem"><p>    删除<code class="literal">ident sameuser</code>选项，如果没有指定usermap，而不是使得该操作缺省(Magnus)</p></li><li class="listitem"><p>     允许为所有外部身份验证方法的usermap参数(Magnus)</p><p>     之前usermap只支持<code class="literal">ident</code>认证。</p></li><li class="listitem"><p>      添加<code class="literal">clientcert</code>选项以控制客户端证书请求(Magnus)</p><p>    以前这是通过服务器的数据目录中根证书文件被控制。</p></li><li class="listitem"><p>    添加<code class="literal">cert</code>认证方法以允许<span class="emphasis"><em>user</em></span>认证通过<acronym class="acronym">SSL</acronym>证书(Magnus)</p><p>    此前<acronym class="acronym">SSL</acronym>证书只能验证客户端可以使用一个证书，而不是验证用户。</p></li><li class="listitem"><p>    允许在<code class="filename">pg_hba.conf</code>中指定<code class="literal">krb5</code>, <code class="literal">gssapi</code>和<code class="literal">sspi</code>
    字段和<code class="literal">krb5</code>主机设置(Magnus)</p><p>      这些覆盖了<code class="filename">postgresql.conf</code>中设置。</p></li><li class="listitem"><p>    为<code class="literal">krb5</code>，<code class="literal">gssapi</code>和<code class="literal">sspi</code>方法添加<code class="varname">include_realm</code>参数(Magnus)</p><p>      这允许来自不同领域的相同用户名被认证为使用用户映射的不同数据库用户。</p></li><li class="listitem"><p>     当它被加载的时候，完整解析<code class="filename">pg_hba.conf</code>，以致于
 可以立即报告错误(Magnus)</p><p>      此前，文件中的大多数错误直到客户端试图连接时才会被检测到，所以一个错误的文件可能导致系统
无法使用。随着新的操作，如果在重载时检测到错误，那么坏文件被拒绝，并且postmaster继续使用其旧副本。</p></li><li class="listitem"><p>     显示<code class="filename">pg_hba.conf</code>中所有解析错误
 而不是在第一个之后终止(Selena Deckelmann) </p></li><li class="listitem"><p>     支持<span class="productname">Solaris</span>上Unix域套接字上的<code class="literal">ident</code>认证(Garick Hamlin)</p></li></ul></div></div><div class="sect4" id="idp77477248"><div class="titlepage"><div><div><h5 class="title">E.154.3.2.4. 连续归档</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    提供一个选项到<code class="function">pg_start_backup()</code>以强制尽快完成的隐含检查点(Tom)</p><p>     缺省操作避免过多I/O消耗，但是如果没有并发查询活动，这是毫无意义的。</p></li><li class="listitem"><p>    让<code class="function">pg_stop_backup()</code>等待修改的<acronym class="acronym">WAL</acronym>文件被归档(Simon)</p><p>     这保证备份在<code class="function">pg_stop_backup()</code>完成时是有效的。</p></li><li class="listitem"><p>     当启用归档时，在关闭时交替最后WAL段以致于所有事务可以立即被归档(Guillaume Smet, Heikki)</p></li><li class="listitem"><p>     当连续归档基础备份在进展中时，延迟<span class="quote">“<span class="quote">smart</span>”</span>关机(Laurenz Albe)</p></li><li class="listitem"><p>    如果请求<span class="quote">“<span class="quote">fast</span>”</span>关机，那么取消连续归档基础备份(Laurenz Albe)</p></li><li class="listitem"><p>     允许<code class="filename">recovery.conf</code>布尔变量采取同一范围字符串值作为<code class="filename">postgresql.conf</code>布尔值(Bruce)</p></li></ul></div></div><div class="sect4" id="idp77486496"><div class="titlepage"><div><div><h5 class="title">E.154.3.2.5. 监控</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>      当最后加载<span class="productname">PostgreSQL</span>配置文件的时候，添加<code class="function">pg_conf_load_time()</code>以报告(George Gensure)</p></li><li class="listitem"><p>     添加<code class="function">pg_terminate_backend()</code>以安全终止后台（<code class="literal">SIGTERM</code>信号也如此）(Tom, Bruce)</p><p>     虽然它一直可能<code class="literal">SIGTERM</code>单一后端，
 这个以前被认为是不支持的；
 并且测试的情况下发现了一些被修复的错误。</p></li><li class="listitem"><p>     添加跟踪用户定义函数的调用计数以及运行时间能力(Martin Pihlak)</p><p>     函数统计出现在新的系统视图，<code class="literal">pg_stat_user_functions</code>中。
 通过新的参数<code class="varname">track_functions</code>控制跟踪。</p></li><li class="listitem"><p>     在<code class="literal">pg_stat_activity</code>中通过新的<code class="varname">track_activity_query_size</code>参数
 允许声明最大查询字符串大小(Thomas Lee)</p></li><li class="listitem"><p>    增大最大线长度发送到<span class="application">syslog</span>，希望优化性能(Tom)</p></li><li class="listitem"><p>     添加只读配置变量<code class="varname">segment_size</code>,<code class="varname">wal_block_size</code>和<code class="varname">wal_segment_size</code>
     (Bernd Helmle)</p></li><li class="listitem"><p>     当报告死锁时，报告死锁服务器日志中涉及的所有查询文本(Itagaki Takahiro)</p></li><li class="listitem"><p>     添加<code class="function">pg_stat_get_activity(pid)</code>函数以返回关于指定进程id的信息(Magnus)</p></li><li class="listitem"><p>     允许通过<code class="varname">stats_temp_directory</code>指定服务器的统计文件的位置(Magnus)</p><p>    这允许统计文件被放置在<acronym class="acronym">RAM</acronym>固有目录中以减少I/O需求。
在启动/关闭时，文件被拷贝到它的传统位置(<code class="literal">$PGDATA/global/</code>)下，
所以重新启动时被保留。</p></li></ul></div></div></div><div class="sect3" id="idp77503072"><div class="titlepage"><div><div><h4 class="title">E.154.3.3. 查询</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>     添加支持<code class="literal">WINDOW</code>函数(Hitoshi Harada)</p></li><li class="listitem"><p>   添加支持<code class="literal">WITH</code>子句(CTEs)，包含<code class="literal">WITH RECURSIVE</code> (Yoshiyuki Asaba, Tatsuo Ishii, Tom)</p></li><li class="listitem"><p>   添加<code class="command">TABLE</code>命令(Peter)</p><p>    <code class="literal">TABLE tablename</code>是<code class="literal">SELECT * FROM tablename</code>的一个SQL标准简写。</p></li><li class="listitem"><p>    当声明<code class="command">SELECT</code> (或者<code class="literal">RETURNING</code>)列输出标签的时候，允许
<code class="literal">AS</code>为可选的(Hiroshi Saito) </p><p>    该操作只要列标签没有任何<span class="productname">PostgreSQL</span>关键字，否则仍然需要<code class="literal">AS</code>。</p></li><li class="listitem"><p>     支持在<code class="command">SELECT</code>结果列表中设置返回函数，
 即使对于通过tuplestore返回其结果的函数(Tom)</p><p>    特别是，这意味着用PL/pgSQL和其它PL/pgSQL语言书写的函数可以这样被调用。</p></li><li class="listitem"><p>   在聚合和分组查询输出中支持设置返回函数(Tom)</p></li><li class="listitem"><p>    允许<code class="command">SELECT FOR UPDATE</code>/<code class="literal">SHARE</code>在继承树上进行操作(Tom)</p></li><li class="listitem"><p>    为<acronym class="acronym">SQL/MED</acronym>添加基础设施(Martin Pihlak, Peter)</p><p>      然而没有远程或外部<acronym class="acronym">SQL/MED</acronym>功能，
  但这种变化提供了一个标准化的，面向未来系统，
  用于管理类似模块<code class="filename">dblink</code>和<code class="filename">plproxy</code>连接信息。</p></li><li class="listitem"><p>     当引用的模式，函数，操作符或者操作符类被修改的时候，使缓存计划无效(Martin Pihlak, Tom)</p><p>     这提高了系统对反应传输中DDL变化的能力。</p></li><li class="listitem"><p>    允许复合类型比较以及匿名复合类型的数组(Tom)</p><p>   这允许构造比如<code class="literal">row(1, 1.1) = any (array[row(7, 7.7), row(1, 1.0)])</code>。
   在递归查询中特别有用。</p></li><li class="listitem"><p>   添加使用代码点支持Unicode字符串文本和标识符规范，
   比如<code class="literal">U&amp;'d\0061t\+000061'</code>(Peter)</p></li><li class="listitem"><p>   拒绝字符串文本中<code class="literal">\000</code>和<code class="command">COPY</code>数据(Tom)</p><p>    之前，这被接受但是有终止字符串内容的影响。</p></li><li class="listitem"><p>   提高解析器报告错误位置的能力(Tom)</p><p>    为许多语义错误报道一个错误位置，
比如不匹配的数据类型，这在以前不可能被本地化。</p></li></ul></div><div class="sect4" id="idp77528496"><div class="titlepage"><div><div><h5 class="title">E.154.3.3.1. <code class="command">TRUNCATE</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>     支持语句级别<code class="literal">ON TRUNCATE</code>触发器(Simon)</p></li><li class="listitem"><p>    为了<code class="command">TRUNCATE TABLE</code>添加<code class="literal">RESTART</code>/<code class="literal">CONTINUE IDENTITY</code>选项(Zoltan Boszormenyi)</p><p>    序列的起始值可以通过<code class="command">ALTER SEQUENCE START WITH</code>被改变。</p></li><li class="listitem"><p>    允许<code class="command">TRUNCATE tab1, tab1</code>成功(Bruce)</p></li><li class="listitem"><p>    添加单独<code class="command">TRUNCATE</code>许可(Robert Haas)</p></li></ul></div></div><div class="sect4" id="idp77536528"><div class="titlepage"><div><div><h5 class="title">E.154.3.3.2. <code class="command">EXPLAIN</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>     采用<code class="command">EXPLAIN VERBOSE</code>显示每个规划节点的输出列(Tom)</p><p>    此前<code class="command">EXPLAIN VERBOSE</code>输出查询规划的内部表示。 
（该操作通过<code class="varname">debug_print_plan</code>是可用的。）</p></li><li class="listitem"><p>    采用<code class="command">EXPLAIN</code>标识子计划以及单一标签的初始计划(Tom)</p></li><li class="listitem"><p>     为了<code class="varname">debug_print_plan</code>采用<code class="command">EXPLAIN</code>(Tom)</p></li><li class="listitem"><p>    允许在<code class="command">CREATE TABLE AS</code>上进行<code class="command">EXPLAIN</code>(Peter)</p></li></ul></div></div><div class="sect4" id="idp77544768"><div class="titlepage"><div><div><h5 class="title">E.154.3.3.3. <code class="literal">LIMIT</code>/<code class="literal">OFFSET</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    允许<code class="literal">LIMIT</code>和<code class="literal">OFFSET</code>中子选择(Tom)</p></li><li class="listitem"><p>    为了<code class="literal">LIMIT</code>/<code class="literal">OFFSET</code>性能添加<acronym class="acronym">SQL</acronym>标准语法(Peter)</p><p>   也就是说，<code class="literal">OFFSET num {ROW|ROWS} FETCH {FIRST|NEXT} [num] {ROW|ROWS} ONLY</code>。</p></li></ul></div></div></div><div class="sect3" id="idp77551568"><div class="titlepage"><div><div><h4 class="title">E.154.3.4. 对象操作</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>     添加列级权限支持(Stephen Frost, KaiGai Kohei)</p></li><li class="listitem"><p>    重构多目标<code class="command">DROP</code>操作以减少<code class="literal">CASCADE</code>的需要(Alex Hunsaker)</p><p>   比如，如果表<code class="literal">B</code>在表<code class="literal">A</code>上有依赖物，那么
   命令<code class="literal">DROP TABLE A, B</code>不再需要<code class="literal">CASCADE</code>选项。</p></li><li class="listitem"><p>      通过确保在开始删除对象依赖之前采取锁定，修复各种并发<code class="command">DROP</code>命令问题(Tom)</p></li><li class="listitem"><p>     改善<code class="command">DROP</code>命令中依赖性报告(Tom)</p></li><li class="listitem"><p>   添加<code class="literal">WITH [NO] DATA</code>子句给<code class="command">CREATE TABLE AS</code>，按照<acronym class="acronym">SQL</acronym>标准(Peter, Tom)</p></li><li class="listitem"><p>    添加支持用户自定义I/O转换模型(Heikki)</p></li><li class="listitem"><p>     允许<code class="command">CREATE AGGREGATE</code>使用<code class="type">internal</code>转换数据类型(Tom)</p></li><li class="listitem"><p>     添加<code class="literal">LIKE</code>子句到<code class="command">CREATE TYPE</code> (Tom)</p><p>     这简化了使用作为已存在类型同一内部表示形式的数据类型的创建。</p></li><li class="listitem"><p>    允许类型类别指定以及用户定义的基础类型<span class="quote">“<span class="quote">首选</span>”</span>状态(Tom) </p><p>    这允许控制用户定义类型的强制操作。</p></li><li class="listitem"><p>    允许<code class="command">CREATE OR REPLACE VIEW</code>添加列到视图结尾(Robert Haas)</p></li></ul></div><div class="sect4" id="idp77569312"><div class="titlepage"><div><div><h5 class="title">E.154.3.4.1. <code class="command">ALTER</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>     添加<code class="command">ALTER TYPE RENAME</code> (Petr Jelinek)</p></li><li class="listitem"><p>    添加<code class="command">ALTER SEQUENCE ... RESTART</code>（无参数）以重置序列到其初始值(Zoltan Boszormenyi)</p></li><li class="listitem"><p>     修改<code class="command">ALTER TABLE</code>语法以允许表，索引，序列以及视图合理组合(Tom) </p><p>这种变化允许下面新语法：

        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>           <code class="command">ALTER SEQUENCE OWNER TO</code>
          </p></li><li class="listitem"><p>           <code class="command">ALTER VIEW ALTER COLUMN SET/DROP DEFAULT</code>
          </p></li><li class="listitem"><p>           <code class="command">ALTER VIEW OWNER TO</code>
          </p></li><li class="listitem"><p>           <code class="command">ALTER VIEW SET SCHEMA</code>
          </p></li></ul></div><p>

这里没有实际的新功能，
但之前你不得不表明<code class="command">ALTER TABLE</code>可以做这些事情，使其混淆。

       </p></li><li class="listitem"><p>    添加支持语法<code class="command">ALTER TABLE ... ALTER COLUMN... SET DATA TYPE</code> (Peter)</p><p>     这是已经支持的功能性<acronym class="acronym">SQL</acronym>标准语法。  </p></li><li class="listitem"><p>    采用<code class="command">ALTER TABLE SET WITHOUT OIDS</code>重写表以物理删除<code class="type">OID</code>值(Tom)</p><p>     同时添加<code class="command">ALTER TABLE SET WITH OIDS</code>重写表添加<code class="type">OID</code>。</p></li></ul></div></div><div class="sect4" id="idp77584560"><div class="titlepage"><div><div><h5 class="title">E.154.3.4.2. 数据库操作</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>   当未提交预备事务的时候，改善<code class="command">CREATE</code>/<code class="command">DROP</code>/<code class="command">RENAME DATABASE</code>错误报告(Tom)</p></li><li class="listitem"><p>    每个数据库设置采用<code class="varname">LC_COLLATE</code>和<code class="varname">LC_CTYPE</code>(Radek Strnad, Heikki)</p><p>    整理类似编码，总是配置每个数据库。</p></li><li class="listitem"><p>    完善检查数据库编码，整理(<code class="varname">LC_COLLATE</code>), 以及字符类(<code class="varname">LC_CTYPE</code>)匹配(Heikki, Tom)</p><p>     特别注意，当从<code class="literal">template0</code>拷贝的时候，一个新的数据库编码和语言环境设置被改变。
这避免了可能拷贝的数据不匹配该设置。</p></li><li class="listitem"><p>    添加<code class="command">ALTER DATABASE SET TABLESPACE</code>移动数据库到一个新的表空间(Guillaume Lelarge, Bernd Helmle)</p></li></ul></div></div></div><div class="sect3" id="idp77593232"><div class="titlepage"><div><div><h4 class="title">E.154.3.5. 实用操作</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>     添加<code class="literal">VERBOSE</code>选项到<code class="command">CLUSTER</code>命令和<span class="application">clusterdb</span>中(Jim Cox)</p></li><li class="listitem"><p>     为记录待定的触发器事件减少内存需求(Tom)</p></li></ul></div><div class="sect4" id="idp77596880"><div class="titlepage"><div><div><h5 class="title">E.154.3.5.1. 索引</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>     大幅提高建立并且访问哈希索引速度(Tom Raney, Shreya Bhargava)</p><p>      这使得散列索引有时比btree索引的速度更快。
  然而，哈希索引仍然没有碰撞安全。</p></li><li class="listitem"><p>     使得哈希索引只存储哈希码，而不是索引列的完整值(Xiao Meng)</p><p>     这大大减少了为长索引值的散列索引的大小，从而提高了性能。</p></li><li class="listitem"><p>     实现GIN索引的快速更新选项(Teodor, Oleg)</p><p>       此选项大大提高了在搜索速度中小的不利后果上的更新速度。</p></li><li class="listitem"><p>      <code class="literal">xxx_pattern_ops</code>索引可以用于简单平等比较，而不仅仅为<code class="literal">LIKE</code> (Tom)</p></li></ul></div></div><div class="sect4" id="idp77602336"><div class="titlepage"><div><div><h5 class="title">E.154.3.5.2. 全文索引</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    当在全文索引中执行<acronym class="acronym">GIN</acronym>加权查找时，删除该需求而使用<code class="literal">@@@</code>(Tom, Teodor)</p><p>   可以使用正常的<code class="literal">@@</code>文本搜索操作符。</p></li><li class="listitem"><p>    为<code class="literal">@@</code>文本搜索操作添加优化选择函数(Jan Urbanski)</p></li><li class="listitem"><p>    允许全文搜索中前缀匹配(Teodor Sigaev,Oleg Bartunov)</p></li><li class="listitem"><p>     支持多列<acronym class="acronym">GIN</acronym>索引(Teodor Sigaev)</p></li><li class="listitem"><p>    改善支持Nepali语言和Devanagari字母(Teodor)</p></li></ul></div></div><div class="sect4" id="idp77608544"><div class="titlepage"><div><div><h5 class="title">E.154.3.5.3. <code class="command">VACUUM</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>   在单独每个关系<span class="quote">“<span class="quote">fork</span>”</span>文件中跟踪自由空间(Heikki)</p><p>     通过<code class="command">VACUUM</code>发现的自由空间在<code class="filename">*_fsm</code>文件中被记录，
 而不是在一个固定大小的共享存储器区域中。
 <code class="varname">max_fsm_pages</code>和<code class="varname">max_fsm_relations</code>设置已被移除，
 从而大大简化了自由空间管理。 </p></li><li class="listitem"><p>    添加可见视图以跟踪不需要清理页面(Heikki)</p><p>     这允许<code class="command">VACUUM</code>以避免扫描所有表，
 只有表中的一部分需要清理的时候。可见视图被存储在每个关系<span class="quote">“<span class="quote">fork</span>”</span>文件。</p></li><li class="listitem"><p>      添加<code class="varname">vacuum_freeze_table_age</code>参数以控制
  当<code class="command">VACUUM</code>忽略可见视图并且执行全表扫描以冻结元组。</p></li><li class="listitem"><p>      更仔细追踪事务快照(Alvaro)</p><p>     这提高了<code class="command">VACUUM</code>在长时间运行的事务中回收空间能力。</p></li><li class="listitem"><p>    添加指定每个关系autovacuum以及<code class="command">CREATE TABLE</code>中<acronym class="acronym">TOAST</acronym>参数的能力(Alvaro, Euler Taveira de Oliveira)</p><p>   自动清理选项存储在系统表中。</p></li><li class="listitem"><p>   添加<code class="literal">--freeze</code>选项到<span class="application">vacuumdb</span>(Bruce)</p></li></ul></div></div></div><div class="sect3" id="idp77622352"><div class="titlepage"><div><div><h4 class="title">E.154.3.6. 数据类型</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    为文本搜索同义词词典添加<code class="literal">CaseSensitive</code>选项(Simon)</p></li><li class="listitem"><p>    完善<code class="type">NUMERIC</code>划分精度(Tom)</p></li><li class="listitem"><p>    为<code class="type">int2</code>与<code class="type">int8</code>添加基础算术操作符(Tom)</p><p>    这消除了在某些情况中显式投射需求。</p></li><li class="listitem"><p>     允许<code class="type">UUID</code>输入在每四位后面接受可选的连字符(Robert Haas)</p></li><li class="listitem"><p>    允许<code class="literal">on</code>/<code class="literal">off</code>作为布尔数据类型的输入(Itagaki Takahiro)</p></li><li class="listitem"><p>   为类型<code class="type">numeric</code>在输入字符串中<code class="literal">NaN</code>周围允许空格(Sam Mason)</p></li></ul></div><div class="sect4" id="idp77630960"><div class="titlepage"><div><div><h5 class="title">E.154.3.6.1. 时间数据类型</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    拒绝年<code class="literal">0 BC</code>以及<code class="literal">000</code>和<code class="literal">0000</code>(Tom)</p><p>    以前这些被解释为<code class="literal">1 BC</code>。（注意：年<code class="literal">0</code>和<code class="literal">00</code>仍然假定为2000。）</p></li><li class="listitem"><p>     在已知时区缩写缺省列表中包含<code class="literal">SGT</code> (Singapore时间)</p></li><li class="listitem"><p>     支持<code class="literal">infinity</code>和<code class="literal">-infinity</code>作为类型<code class="type">date</code>的值(Tom)</p></li><li class="listitem"><p>    使得<code class="type">interval</code>文本解析更加遵循标准(Tom, Ron Mayer)</p><p>     比如，<code class="literal">INTERVAL '1' YEAR</code>目前执行应该做的内容。</p></li><li class="listitem"><p>    在<code class="literal">second</code>关键字之后，按照<acronym class="acronym">SQL</acronym>标准允许指定<code class="type">interval</code>分数秒精度(Tom)</p><p>        之前在关键字<code class="type">interval</code>之后指定精度。（为了向后兼容，这种语法仍
       支持，但不建议使用。）数据类型定义现在使用标准格式被输出。</p></li><li class="listitem"><p>     支持 <acronym class="acronym">IS0 8601</acronym> <code class="type">interval</code>语法(Ron Mayer, Kevin Grittner)</p><p>   比如，现在支持<code class="literal">INTERVAL 'P1Y2M3DT4H5M6.7S'</code>。</p></li><li class="listitem"><p>   添加<code class="varname">IntervalStyle</code>参数以控制<code class="type">interval</code>值如何输出(Ron Mayer)</p><p>    有效值是：<code class="literal">postgres</code>, <code class="literal">postgres_verbose</code>,
    <code class="literal">sql_standard</code>, <code class="literal">iso_8601</code>。
只有当一些字段有正/负名称的时候，该设置也控制负<code class="type">interval</code>输入的处理。 
</p></li><li class="listitem"><p>    在<code class="type">timestamp</code>和<code class="type">interval</code>输入中优化小数秒处理的一致性(Ron Mayer)</p></li></ul></div></div><div class="sect4" id="idp77653648"><div class="titlepage"><div><div><h5 class="title">E.154.3.6.2. 数组</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    优化适用于<code class="literal">ARRAY[]</code>结构映射处理，
比如<code class="literal">ARRAY[...]::integer[]</code>(Brendan Jurd)</p><p>        之前<span class="productname">PostgreSQL</span>试图为<code class="literal">ARRAY[]</code>结构而不引用随后计算确定一个数据类型。
这在许多情况下可能失败，特别是当<code class="literal">ARRAY[]</code>构造是空的或仅包含不明确项如<code class="literal">NULL</code>的时候。
        现在协商该计算以确定该数组元素类型。</p></li><li class="listitem"><p>    使得<acronym class="acronym">SQL</acronym>语法<code class="type">ARRAY</code>尺寸可选以匹配<acronym class="acronym">SQL</acronym>标准(Peter)</p></li><li class="listitem"><p>    添加<code class="function">array_ndims()</code>以返回数组维数(Robert Haas)</p></li><li class="listitem"><p>     添加<code class="function">array_length()</code>以返回指定维数数组长度(Jim Nasby, Robert Haas, Peter Eisentraut)</p></li><li class="listitem"><p>    添加聚合函数<code class="function">array_agg()</code>作为一个数组返回所有聚合值(Robert Haas,Jeff Davis, Peter)</p></li><li class="listitem"><p>    添加<code class="function">unnest()</code>将一个数组转换为各行值(Tom)</p><p>    这是<code class="function">array_agg()</code>的反面。</p></li><li class="listitem"><p>    添加<code class="function">array_fill()</code>以创建初始化值数组(Pavel Stehule)</p></li><li class="listitem"><p>    添加<code class="function">generate_subscripts()</code>以简化生成数组下标范围(Pavel Stehule)</p></li></ul></div></div><div class="sect4" id="idp77669216"><div class="titlepage"><div><div><h5 class="title">E.154.3.6.3. 宽值存储(<acronym class="acronym">TOAST</acronym>)</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    认为<acronym class="acronym">TOAST</acronym>压缩值和32字节一样短（之前256字节）(Greg Stark)</p></li><li class="listitem"><p>     使用<acronym class="acronym">TOAST</acronym>压缩之前要求最低25％的空间节省，（之前20％为小值并且任何存储为大值）(Greg)</p></li><li class="listitem"><p>        优化具有较大和较小toastable字段混合行的<acronym class="acronym">TOAST</acronym>启发式，
使我们更愿意使得较大值超出范围并且不压缩较小值(Greg, Tom)</p></li></ul></div></div></div><div class="sect3" id="idp77673104"><div class="titlepage"><div><div><h4 class="title">E.154.3.7. 函数</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    <code class="function">setseed()</code>文件允许从<code class="literal">-1</code>到<code class="literal">1</code>的值（不只是<code class="literal">0</code>到<code class="literal">1</code>），
并且执行有效范围(Kris Jurka)</p></li><li class="listitem"><p>    添加服务器端函数<code class="function">lo_import(filename, oid)</code>(Tatsuo)</p></li><li class="listitem"><p>    添加<code class="function">quote_nullable()</code>其操作类似于
<code class="function">quote_literal()</code>但为空参数返回字符串<code class="literal">NULL</code>(Brendan Jurd)</p></li><li class="listitem"><p>    优化全文本搜索<code class="function">headline()</code>函数以允许提取文本若干片段(Sushant Sinha)</p></li><li class="listitem"><p>     添加<code class="function">suppress_redundant_updates_trigger()</code>触发器函数以避免
 无数据变化更新开销(Andrew)</p></li><li class="listitem"><p>    添加<code class="function">div(numeric, numeric)</code>执行<code class="type">numeric</code>除法而没有四舍五入(Tom)</p></li><li class="listitem"><p>     添加<code class="function">generate_series()</code>的<code class="type">timestamp</code>和<code class="type">timestamptz</code>版本(Hitoshi Harada)</p></li></ul></div><div class="sect4" id="idp77687360"><div class="titlepage"><div><div><h5 class="title">E.154.3.7.1. 对象信息函数</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    通过需要知道当前正在运行的查询的函数实现<code class="function">current_query()</code>的使用(Tomas Doran)</p></li><li class="listitem"><p>    添加<code class="function">pg_get_keywords()</code>返回解析关键字列表(Dave Page)</p></li><li class="listitem"><p>    添加<code class="function">pg_get_functiondef()</code>查看函数的定义(Abhijit Menon-Sen)</p></li><li class="listitem"><p>     当解析不包含变量的表达式时，允许<code class="function">pg_get_expr()</code>第二个参数为零(Tom)</p></li><li class="listitem"><p>    修改<code class="function">pg_relation_size()</code>以使用<code class="literal">regclass</code>(Heikki)</p><p>    <code class="function">pg_relation_size(data_type_name)</code>不再起作用。</p></li><li class="listitem"><p>    添加<code class="literal">boot_val</code>和<code class="literal">reset_val</code>列到<code class="literal">pg_settings</code>输出(Greg Smith)</p></li><li class="listitem"><p>    为配置文件中变量设置添加源文件名和行号列到<code class="literal">pg_settings</code>输出(Magnus, Alvaro)</p><p>     出于安全原因，这些列只对超级用户可见。</p></li><li class="listitem"><p>    添加支持<code class="varname">CURRENT_CATALOG</code>,<code class="varname">CURRENT_SCHEMA</code>, <code class="varname">SET CATALOG</code>,
<code class="varname">SET SCHEMA</code>(Peter)</p><p>    为存在特性提供<acronym class="acronym">SQL</acronym>标准语法。</p></li><li class="listitem"><p>     添加<code class="function">pg_typeof()</code>返回任何值的数据类型(Brendan Jurd)</p></li><li class="listitem"><p>    采取<code class="function">version()</code>返回有关服务器是否是32或者64位二进制信息(Bruce)</p></li><li class="listitem"><p>    修复信息模式列<code class="structfield">is_insertable_into</code>和<code class="structfield">is_updatable</code>操作是一致的(Peter)</p></li><li class="listitem"><p>    改善信息模式<code class="structfield">datetime_precision</code>列的操作(Peter)  </p><p>这些列为<code class="type">date</code>列显示为零并且<code class="type">time</code>，<code class="type">timestamp</code>以及
没有声明精度的<code class="type">interval</code>显示为6（默认精度），而不如以前一样显示为空。</p></li><li class="listitem"><p>    转换剩余内置集合返回函数使用<code class="literal">OUT</code>参数(Jaime Casanova)</p><p>    这使得它可以调用没有指定列表的函数：<code class="function">pg_show_all_settings()</code>,
        <code class="function">pg_lock_status()</code>, <code class="function">pg_prepared_xact()</code>,
        <code class="function">pg_prepared_statement()</code>, <code class="function">pg_cursor()</code></p></li><li class="listitem"><p>   采用<code class="function">pg_*_is_visible()</code>和<code class="function">has_*_privilege()</code>为无效OID返回<code class="literal">NULL</code>，而不是抛出错误(Tom)</p></li><li class="listitem"><p>   扩展<code class="function">has_*_privilege()</code>函数以允许查询一个调用中多特权的OR(Stephen Frost, Tom)</p></li><li class="listitem"><p>    添加<code class="function">has_column_privilege()</code>和<code class="function">has_any_column_privilege()</code>函数(Stephen Frost, Tom)</p></li></ul></div></div><div class="sect4" id="idp77720016"><div class="titlepage"><div><div><h5 class="title">E.154.3.7.2. 函数创建</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>     支持可变参数的函数（带有参数可变数量的函数）(Pavel Stehule)</p><p>     只有尾随参数是可选的，它们都必须是相同的数据类型。</p></li><li class="listitem"><p>    支持函数参数的缺省值(Pavel Stehule)</p></li><li class="listitem"><p>     添加<code class="command">CREATE FUNCTION ... RETURNS TABLE</code>子句(Pavel Stehule)</p></li><li class="listitem"><p>    允许<acronym class="acronym">SQL</acronym>语言函数返回<code class="command">INSERT</code>/<code class="command">UPDATE</code>/<code class="command">DELETE</code>
<code class="literal">RETURNING</code>子句的输出(Tom)</p></li></ul></div></div><div class="sect4" id="idp77726832"><div class="titlepage"><div><div><h5 class="title">E.154.3.7.3. PL/pgSQL服务器端语言</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    为了更容易地将数据值插入到动态查询字符串中支持<code class="literal">EXECUTE USING</code>(Pavel Stehule)</p></li><li class="listitem"><p>     允许循环使用<code class="literal">FOR</code>循环游标结果(Pavel Stehule)</p></li><li class="listitem"><p>       支持<code class="literal">RETURN QUERY EXECUTE</code> (Pavel Stehule)</p></li><li class="listitem"><p>    优化<code class="literal">RAISE</code>命令(Pavel Stehule)
   
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>   支持<code class="literal">DETAIL</code>和<code class="literal">HINT</code>字段
          </p></li><li class="listitem"><p>     支持<code class="literal">SQLSTATE</code>错误代码规范</p></li><li class="listitem"><p>      支持异常名字参数</p></li><li class="listitem"><p>      允许异常块中无参数<code class="literal">RAISE</code>重新抛出当前错误</p></li></ul></div><p>
       </p></li><li class="listitem"><p>     允许<code class="literal">EXCEPTION</code>列表中<code class="varname">SQLSTATE</code>代码规范(Pavel Stehule)</p><p>     这对于处理自定义<code class="varname">SQLSTATE</code>代码非常有用。</p></li><li class="listitem"><p>     支持<code class="literal">CASE</code>语句(Pavel Stehule)</p></li><li class="listitem"><p>    使用<code class="command">RETURN QUERY</code>设置特殊的<code class="literal">FOUND</code>和
    <code class="command">GET DIAGNOSTICS</code> <code class="literal">ROW_COUNT</code>变量(Pavel Stehule)</p></li><li class="listitem"><p>     使用<code class="command">FETCH</code>和<code class="command">MOVE</code>设置
        <code class="command">GET DIAGNOSTICS</code> <code class="literal">ROW_COUNT</code>变量(Andrew Gierth)</p></li><li class="listitem"><p>    使用没有标签的<code class="command">EXIT</code>总是退出最内层循环(Tom)</p><p>       之前，如果有一个<code class="literal">BEGIN</code>块比任何环路更加紧密的嵌套，
将退出该块。新的操作匹配Oracle(TM)并且也正如通过自身文档所讲述的。</p></li><li class="listitem"><p>   使得字符串文本处理和嵌套块注释匹配主SQL解析器的处理(Tom)</p><p>   特别是，在<code class="command">RAISE</code>中格式字符串执行与任何其他字符串文本一样的操作，
   包含从属于<code class="varname">standard_conforming_strings</code>。当<code class="varname">standard_conforming_strings</code>为on的时候，
   这种变化也修复了有效命令失败的情况。 
   </p></li><li class="listitem"><p>     当在不同异常块嵌套深度中调用同一函数的时候，避免内存泄露(Tom)</p></li></ul></div></div></div><div class="sect3" id="idp77752704"><div class="titlepage"><div><div><h4 class="title">E.154.3.8. 客户端应用</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>     修复<code class="literal">pg_ctl restart</code>保存命令行参数(Bruce)</p></li><li class="listitem"><p>     添加<code class="literal">-w</code>/<code class="literal">--no-password</code>选项防止在具有<code class="literal">-W</code>/<code class="literal">--password</code>
 选项实用程序中的密码提示(Peter)</p></li><li class="listitem"><p>       删除<span class="application">createdb</span>,
       <span class="application">createuser</span>, <span class="application">dropdb</span>,
       <span class="application">dropuser</span>中的<code class="option">-q</code> (默默的)选项(Peter)</p><p>     这些选项不起作用因为<span class="productname">PostgreSQL</span> 8.3。</p></li></ul></div><div class="sect4" id="idp77762432"><div class="titlepage"><div><div><h5 class="title">E.154.3.8.1. <span class="application">psql</span></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>     删除详细的启动标志，目前建议<code class="literal">help</code>(Joshua Drake)</p></li><li class="listitem"><p>   使用<code class="literal">help</code>显示常见的反斜杠命令(Greg Sabino Mullane)</p></li><li class="listitem"><p>    添加<code class="literal">\pset格式包</code>模式来包装输出到屏幕宽度，
或者文件/管道输出，如果设置<code class="literal">\pset列</code>(Bryce Nesbitt)</p></li><li class="listitem"><p>     允许<code class="command">\pset</code>中布尔值的所有支持的拼写，而不仅仅<code class="literal">on</code>和<code class="literal">off</code> (Bruce)</p><p>    之前，除了<span class="quote">“<span class="quote">off</span>”</span>外的任何字符串默默地认为<code class="literal">true</code>。
<span class="application">psql</span>抱怨无法识别的拼写（但是仍然认为<code class="literal">true</code>）。 </p></li><li class="listitem"><p>    使用宽输出分页程序(Bruce)</p></li><li class="listitem"><p>   在一个字母反斜杠命令和它的第一个参数之间需要一个空格(Bernd Helmle)</p><p>     这消除了有歧义的历史渊源。</p></li><li class="listitem"><p>    改善标签完整支持模式修饰以及带引号标识符(Greg Sabino Mullane) </p></li><li class="listitem"><p>    为<code class="command">\timing</code>添加可选的<code class="literal">on</code>/<code class="literal">off</code>参数(David Fetter)</p></li><li class="listitem"><p>     显示多行上的访问控制权(Brendan Jurd, Andreas Scherbaum)</p></li><li class="listitem"><p>     使用<code class="command">\l</code>显示数据库访问权限(Andrew Gilligan)</p></li><li class="listitem"><p>    使用<code class="command">\l+</code>显示数据库大小，如果权限允许(Andrew Gilligan)</p></li><li class="listitem"><p>    添加<code class="command">\ef</code>命令编辑函数定义(Abhijit Menon-Sen)</p></li></ul></div></div><div class="sect4" id="idp77781680"><div class="titlepage"><div><div><h5 class="title">E.154.3.8.2. <span class="application">psql</span> \d* 命令</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>   使得没有模式参数的<code class="command">\d*</code>命令显示系统对象，
   只有当指定<code class="literal">S</code>修饰语的时候(Greg Sabino Mullane, Bruce)</p><p>    前者操作与<code class="command">\d</code>不同形式不一致，并且在大多数情况下它没有提供简单方法查看
用户对象。</p></li><li class="listitem"><p>     完善与旧的<span class="productname">PostgreSQL</span>服务器版本一起执行（追溯到7.4）的<code class="command">\d*</code>命令，
 而不仅仅是当前服务器版本(Guillaume Lelarge)</p></li><li class="listitem"><p>     使用<code class="command">\d</code>显示引用已选择表的外键约束(Kenneth D'Souza)</p></li><li class="listitem"><p>    在序列上使用<code class="command">\d</code>显示列值(Euler Taveira de Oliveira)</p></li><li class="listitem"><p>    添加列存储类型和其他关系选项到<code class="command">\d+</code>显示中(Gregory Stark, Euler Taveira de Oliveira)</p></li><li class="listitem"><p>   显示<code class="command">\dt+</code>输出中关系大小(Dickson S. Guedes)</p></li><li class="listitem"><p>   显示<code class="command">\dT+</code>中<code class="literal">enum</code>类型可能值(David Fetter)</p></li><li class="listitem"><p>    允许<code class="command">\dC</code>接受通配符模式，这可以匹配涉及到投射的数据类型(Tom)</p></li><li class="listitem"><p>     添加函数类型列到<code class="command">\df</code>的输出，并且添加选项只列出函数所选类型(David Fetter)</p></li><li class="listitem"><p>   <code class="command">\df</code>不隐藏使用或者返回类型<code class="type">cstring</code>的函数(Tom)</p><p>     此前，这种函数被隐藏，因为他们大多是数据类型I/O函数，这被认为是没有意义的。
 默认情况下有关隐藏系统函数的新策略使得该缺点不必要的。 </p></li></ul></div></div><div class="sect4" id="idp77798928"><div class="titlepage"><div><div><h5 class="title">E.154.3.8.3. <span class="application">pg_dump</span></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    添加<code class="literal">--no-tablespaces</code>选项到<span class="application">pg_dump</span>/<span class="application">pg_dumpall</span>/<span class="application">pg_restore</span>
这样转储可以恢复到具有非匹配表空间层次的集群中(Gavin Roy)</p></li><li class="listitem"><p>    从<span class="application">pg_dump</span>和<span class="application">pg_dumpall</span>中删除<code class="option">-d</code>和<code class="option">-D</code>选项(Tom) </p><p>    这些选项不应该过于频繁地与在其它<span class="productname">PostgreSQL</span>客户端应用程序中选择数据库名称的选项混淆。
该功能仍然可用，
但你现在必须拼写出长选项名称<code class="option">--inserts</code>或者<code class="option">--column-inserts</code>。
</p></li><li class="listitem"><p>    从<span class="application">pg_dump</span>和<span class="application">pg_dumpall</span>中删除<code class="option">-i</code>/<code class="option">--ignore-version</code>选项(Tom)</p><p>     使用此选项不会抛出一个错误，但它没有效果。
 该选项被移除，因为版本检查对安全性是必要的。</p></li><li class="listitem"><p>    在转储和恢复中禁用<code class="varname">statement_timeout</code>(Joshua Drake) </p></li><li class="listitem"><p>     添加<span class="application">pg_dump</span>/<span class="application">pg_dumpall</span>选项<code class="option">--lock-wait-timeout</code> (David Gould)</p><p>    如果在指定时间内无法获取共享锁，那么转储失败。</p></li><li class="listitem"><p>    重新排序<span class="application">pg_dump</span> <code class="literal">--data-only</code>输出
用来转储在引用表之前通过外键参考的表(Tom) </p><p>     当外键存在的时候，允许数据加载。如果循环引用采用一个不可能的安全排序，
 发出<code class="literal">NOTICE</code>。  </p></li><li class="listitem"><p>    允许<span class="application">pg_dump</span>, <span class="application">pg_dumpall</span>和<span class="application">pg_restore</span>使用指定用户(Benedek László)</p></li><li class="listitem"><p>     允许<span class="application">pg_restore</span>使用多个并发连接执行恢复(Andrew)</p><p>    通过选项<code class="literal">--jobs</code>来控制连接数。这仅仅支持自定义格式归档。</p></li></ul></div></div></div><div class="sect3" id="idp77822832"><div class="titlepage"><div><div><h4 class="title">E.154.3.9. 编程工具</h4></div></div></div><div class="sect4" id="idp77823248"><div class="titlepage"><div><div><h5 class="title">E.154.3.9.1. <span class="application">libpq</span></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>     当通过新函数<code class="function">lo_import_with_oid()</code>导入大对象的时候，允许指定<code class="type">OID</code>(Tatsuo)</p></li><li class="listitem"><p>     添加<span class="quote">“<span class="quote">events</span>”</span>支持(Andrew Chernow, Merlin Moncure)</p><p>    这添加了注册回调能力来管理联系<code class="structname">PGconn</code>和<code class="structname">PGresult</code>对象的私有数据。</p></li><li class="listitem"><p>     优化错误处理以允许多个错误消息的返回作为多行错误报告(Magnus)</p></li><li class="listitem"><p>     采用<code class="function">PQexecParams()</code>和相关函数为空查询返回<code class="varname">PGRES_EMPTY_QUERY</code>(Tom)</p><p>     之前返回<code class="varname">PGRES_COMMAND_OK</code>。</p></li><li class="listitem"><p>      记录Windows上如何避免<code class="function">WSACleanup()</code>的开销(Andrew Chernow)</p></li><li class="listitem"><p>    不依赖于Kerberos来决定缺省数据库用户名(Magnus)</p><p>    之前，libpq的Kerberos编译将使用从任何可用的Kerberos标签作为缺省数据库用户名的主体名称，
即使连接没有使用Kerberos认证。
这被认为是不一致而且混乱的。
有或没有Kerberos同样的方式决定缺省用户名。  
然而，当使用Kerberos身份验证的时候，需要注意的是数据库用户名必须匹配该标签。 </p></li></ul></div></div><div class="sect4" id="idp77833440"><div class="titlepage"><div><div><h5 class="title">E.154.3.9.2. <span class="application">libpq</span> <acronym class="acronym">SSL</acronym> (安全套接层)支持</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    修复<acronym class="acronym">SSL</acronym>连接的证书验证(Magnus)</p><p>     <span class="application">libpq</span>现在支持验证两种证书
和<acronym class="acronym">SSL</acronym>连接时服务器的名称。
如果根证书不可用于验证，那么<acronym class="acronym">SSL</acronym>连接失败。
<code class="literal">sslmode</code>参数用于启用证书验证，并设置检查水平。
默认值还没有做任何验证，允许连接到不需要客户端根证书的SSL启用服务器中。
????????</p></li><li class="listitem"><p>     支持通配符服务器证书(Magnus)</p><p>     如果证书<acronym class="acronym">CN</acronym>以<code class="literal">*</code>开头，它将被视为一个通配符，当匹配hostname的时候，
 允许多个服务器同一证书的使用。</p></li><li class="listitem"><p>     允许文件位置指定客户端证书(Mark Woodward, Alvaro, Magnus)  </p></li><li class="listitem"><p>     增加<code class="function">PQinitOpenSSL</code>函数允许更大控制OpenSSL/libcrypto初始化(Andrew Chernow)</p></li><li class="listitem"><p>    当没有数据库连接保持打开的时候，
使用<span class="application">libpq</span>注销它的<span class="application">OpenSSL</span>回调(Bruce, Magnus, Russell Smith)</p><p>      卸载libpq库的应用程序是必须的，否则无效的<span class="application">OpenSSL</span>回调将保持不变。</p></li></ul></div></div><div class="sect4" id="idp77845456"><div class="titlepage"><div><div><h5 class="title">E.154.3.9.3. <span class="application">ecpg</span></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>   添加信息本地化支持(Euler Taveira de Oliveira)</p></li><li class="listitem"><p>    从服务器解析器自动生成ecpg解析器(Michael)</p><p> 
    之前ecpg解析器手动维护。</p></li></ul></div></div><div class="sect4" id="idp77847776"><div class="titlepage"><div><div><h5 class="title">E.154.3.9.4. 服务器编程接口(<acronym class="acronym">SPI</acronym>)</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>    添加超出行参数的单一使用规划(Tom)</p></li><li class="listitem"><p>   添加新的<code class="varname">SPI_OK_REWRITTEN</code>返回<code class="function">SPI_execute()</code>代码(Heikki)</p><p>   当命令被重写为命令的另一种类型的时候使用它。</p></li><li class="listitem"><p>   从<code class="filename">executor/spi.h</code>中删除不必要内含物(Tom)</p><p>   如果它们依赖<code class="filename">spi.h</code>包含它们需要的东西，
   SPI使用模块可能需要添加一些<code class="literal">#include</code>行。   
   </p></li></ul></div></div></div><div class="sect3" id="idp77854192"><div class="titlepage"><div><div><h4 class="title">E.154.3.10. 编译选项</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>   使用<span class="productname">Autoconf</span> 2.61更新编译系统(Peter)</p></li><li class="listitem"><p>    源码编译需要<span class="productname">GNU bison</span>(Peter) </p><p>  这个有效的使用了许多年，但是现在没有基础设施声明支持其它解析工具。</p></li><li class="listitem"><p>  添加<span class="application">pg_config</span> <code class="literal">--htmldir</code>选项(Peter)</p></li><li class="listitem"><p>   通过内部服务器传递<code class="type">float4</code>值(Zoltan Boszormenyi) </p><p>     添加<span class="application">configure</span>选项<code class="literal">--disable-float4-byval</code>以使用旧操作。
使用旧式（版本0）的外部C函数调用约定
并通过这个改变打破传递或者返回<code class="type">float4</code>值，
如果你具有这样的函数，并且不想更新它们，
所以你可能需要<span class="application">configure</span>选项。 </p></li><li class="listitem"><p>  通过64位平台上内部服务器传递<code class="type">float8</code>, <code class="type">int8</code>和相关数据类型值(Zoltan Boszormenyi) </p><p>   添加<span class="application">configure</span>选项<code class="literal">--disable-float8-byval</code>用来使用旧的操作。如上所述，
   该变化可能打破旧形式外部C函数。</p></li><li class="listitem"><p>  添加配置选项<code class="literal">--with-segsize</code>,
  <code class="literal">--with-blocksize</code>, <code class="literal">--with-wal-blocksize</code>,
  <code class="literal">--with-wal-segsize</code> (Zdenek Kotala, Tom)</p><p>    这简化了编译时控制之前只能通过编辑<code class="filename">pg_config_manual.h</code>来改变的几个常数。</p></li><li class="listitem"><p>允许在<span class="productname">Solaris</span> 2.5上线程编译(Bruce)</p></li><li class="listitem"><p>    在<span class="productname">Solaris</span>上使用系统的<code class="function">getopt_long()</code>(Zdenek Kotala, Tom)</p><p>  这使得选项处理与Solaris用户期望的更加一致。</p></li><li class="listitem"><p>   添加<span class="productname">Linux</span>上<span class="productname">Sun Studio</span>编译器支持(Julius Stroffek)</p></li><li class="listitem"><p>追加主版本号到后端<span class="application">gettext</span>域，而<code class="literal">soname</code>主版本号
到库的<span class="application">gettext</span>域(Peter)</p><p>    这简化了多个版本并行安装。</p></li><li class="listitem"><p>    允许支持<span class="application">gcov</span>代码覆盖测试(Michelle Caisse)</p></li><li class="listitem"><p>   允许在<span class="productname">Mingw</span>和<span class="productname">Cygwin</span>上树外编译(Richard Evans)</p></li><li class="listitem"><p>   修复作为交叉编译源平台<span class="productname">Mingw</span>的使用(Peter)</p></li></ul></div></div><div class="sect3" id="idp77883504"><div class="titlepage"><div><div><h4 class="title">E.154.3.11. 源代码</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>   支持64位时区数据文件(Heikki)</p><p>    这添加支持超出2038年夏令时(<acronym class="acronym">DST</acronym>)计算。</p></li><li class="listitem"><p>     不赞成平台的<code class="type">time_t</code>数据类型的使用(Tom)</p><p>有些平台已经迁移到64位<code class="type">time_t</code>，
有些不能，Windows无法下定决心它在做什么。
定义<code class="type">pg_time_t</code>和<code class="type">time_t</code>具有相同的含义，
但始终是64位（除非该平台不具有64位整数类型），
并且使用所有模块API中的类型和磁盘上的数据格式。</p></li><li class="listitem"><p>    当交叉编译的时候，修复时区数据库处理中错误(Richard Evans)</p></li><li class="listitem"><p>    在一个步骤中连接后端对象文件，而不是一个阶段中(Peter)</p></li><li class="listitem"><p>   完善<span class="application">gettext</span>支持以便复数的更好转化(Peter)</p></li><li class="listitem"><p>    添加PL语言的信息翻译支持(Alvaro, Peter)</p></li><li class="listitem"><p>    添加更多<span class="application">DTrace</span>探测(Robert Lor)</p></li><li class="listitem"><p>    启用<span class="application">macOS Leopard</span>以及其它非Solaris平台上的<span class="application">DTrace</span>支持(Robert Lor) </p></li><li class="listitem"><p>    简化并且标准化C字符串和<code class="type">text</code>数据之间转换，出于此目的提供普通函数(Brendan Jurd, Tom)</p></li><li class="listitem"><p>     清理<code class="filename">include/catalog/</code>头文件以致于前端程序包含它们而不包含<code class="filename">postgres.h</code>(Zdenek Kotala)</p></li><li class="listitem"><p>    采取<code class="type">name</code>字符对齐，并且抑制索引中<code class="type">name</code>项的零填充(Tom)</p></li><li class="listitem"><p>    如果动态加载代码执行<code class="function">exit()</code>更好恢复(Tom)</p></li><li class="listitem"><p>   添加连接让插件监控执行者(Itagaki Takahiro)</p></li><li class="listitem"><p>    添加连接允许规划器的统计查找操作被覆盖(Simon Riggs)</p></li><li class="listitem"><p>    为自定义共享内存需求添加<code class="function">shmem_startup_hook()</code>(Tom)</p></li><li class="listitem"><p>    使用<code class="function">amgetbitmap</code>替换索引访问方法<code class="function">amgetmulti</code>切入点，
并且为<code class="function">amgettuple</code>扩展API可以支持操作符丢失的运行时计算(Heikki, Tom, Teodor) </p><p>   为GIN和GiST opclass <code class="function">consistent</code>函数的API已经被扩展。</p></li><li class="listitem"><p>   添加支持<acronym class="acronym">GIN</acronym>索引中局部匹配搜索(Teodor Sigaev, Oleg Bartunov)</p></li><li class="listitem"><p>    使用布尔<code class="structfield">relhastriggers</code>替换<code class="structname">pg_class</code>列<code class="structfield">reltriggers</code>(Simon) </p><p>    同时删除未使用的<code class="structname">pg_class</code>列
       <code class="structfield">relukeys</code>, <code class="structfield">relfkeys</code>和
       <code class="structfield">relrefs</code>。</p></li><li class="listitem"><p>    添加<code class="structfield">relistemp</code>列到<code class="structname">pg_class</code>解除临时表识别(Tom)</p></li><li class="listitem"><p>    将平台<acronym class="acronym">FAQ</acronym>放到主文档中(Peter)</p></li><li class="listitem"><p>     防止解析器输入文件编译冲突(Peter)</p></li><li class="listitem"><p>    添加<code class="literal">KOI8U</code> (Ukrainian)编码(Peter) </p></li><li class="listitem"><p>    添加Japanese信息转化(Japan PostgreSQL用户组)</p><p>    这用于作为单一项目被维护。</p></li><li class="listitem"><p>     当在<span class="application">MSVC</span>编译系统上设置<code class="varname">LC_MESSAGES</code>的时候，
 修复该问题(Hiroshi Inoue, Hiroshi Saito, Magnus)</p></li></ul></div></div><div class="sect3" id="idp77916352"><div class="titlepage"><div><div><h4 class="title">E.154.3.12. Contrib</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>     添加<code class="filename">contrib/auto_explain</code>在查询超过指定时间上自动运行<code class="command">EXPLAIN</code>(Itagaki Takahiro, Tom)</p></li><li class="listitem"><p>    添加<code class="filename">contrib/btree_gin</code>允许GIN索引处理更多数据类型(Oleg, Teodor)</p></li><li class="listitem"><p>   添加<code class="filename">contrib/citext</code>提供不区分大小写，多字节文本数据类型(David Wheeler)</p></li><li class="listitem"><p>   为语句执行统计的服务器范围追踪添加<code class="filename">contrib/pg_stat_statements</code>(Itagaki Takahiro)</p></li><li class="listitem"><p>    添加时间和查询模式选项到<code class="filename">contrib/pgbench</code>(Itagaki Takahiro)</p></li><li class="listitem"><p>    <code class="filename">contrib/pgbench</code>使用表名<code class="structname">pgbench_accounts</code>, <code class="structname">pgbench_branches</code>,
       <code class="structname">pgbench_history</code>和<code class="structname">pgbench_tellers</code>,
   而不仅仅<code class="structname">accounts</code>, <code class="structname">branches</code>,
       <code class="structname">history</code>和<code class="structname">tellers</code> (Tom)</p><p>   通过运行<span class="application">pgbench</span>以降低意外破坏真实数据的风险。</p></li><li class="listitem"><p>   修复<code class="filename">contrib/pgstattuple</code>处理表和超过20亿页面的索引(Tatsuhito Kasahara)</p></li><li class="listitem"><p>    在<code class="filename">contrib/fuzzystrmatch</code>中，添加Levenshtein字符串距离函数版本允许
用户声明插入，删除和替换成本(Volkan Yazici)  </p></li><li class="listitem"><p>    采用<code class="filename">contrib/ltree</code>支持多字节编码(laser)</p></li><li class="listitem"><p>    启用<code class="filename">contrib/dblink</code>使用存储在SQL/MED目录中的连接信息(Joe Conway)</p></li><li class="listitem"><p>    完善来自远程服务器错误的<code class="filename">contrib/dblink</code>的报告(Joe Conway)</p></li><li class="listitem"><p>    使用<code class="filename">contrib/dblink</code>设置<code class="varname">client_encoding</code>以
匹配本地数据库的编码(Joe Conway)</p><p>    当与使用不同编码的远程数据库通信时，这可以避免编码问题。</p></li><li class="listitem"><p>    确保<code class="filename">contrib/dblink</code>使用用户提供的密码，
并且不是意外地采取服务器的<code class="filename">.pgpass</code>文件(Joe Conway)
</p><p>    有一个小的安全增强功能。</p></li><li class="listitem"><p>     添加<code class="function">fsm_page_contents()</code>到<code class="filename">contrib/pageinspect</code> (Heikki)</p></li><li class="listitem"><p>    修改<code class="function">get_raw_page()</code>支持自由空间映射(<code class="filename">*_fsm</code>)文件。
同时更新<code class="filename">contrib/pg_freespacemap</code>。</p></li><li class="listitem"><p>    添加支持多字节编码到<code class="filename">contrib/pg_trgm</code>(Teodor)</p></li><li class="listitem"><p>      改写<code class="filename">contrib/intagg</code>使用新的函数<code class="function">array_agg()</code>和<code class="function">unnest()</code>(Tom)</p></li><li class="listitem"><p>     故障转移之前使用<code class="filename">contrib/pg_standby</code>回收所有可用WAL(Fujii Masao, Simon, Heikki)</p><p>       为了使这项工作安全，您现在需要设置<code class="filename">recovery.conf</code>中新的
<code class="literal">recovery_end_command</code>选项用来清理故障转移后的触发器文件。
<span class="application">pg_standby</span>将不再删除触发器文件本身。
</p></li><li class="listitem"><p>    <code class="filename">contrib/pg_standby</code>的<code class="option">-l</code>选项现在是一个空操作，  
因为它使用符号链接不安全(Simon) </p></li></ul></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-8-4-1.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="release-8-3-23.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">E.153. 版本8.4.1 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> E.155. 版本8.3.23</td></tr></table></div></body></html>
