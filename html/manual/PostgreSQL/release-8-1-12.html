<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.214. 版本 8.1.12</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-8-1-13.html" title="E.213. 版本 8.1.13" /><link rel="next" href="release-8-1-11.html" title="E.215. 版本 8.1.11" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.214. 版本 8.1.12</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-8-1-13.html" title="E.213. 版本 8.1.13">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="附录 E. 版本说明">上一级</a></td><th width="60%" align="center">附录 E. 版本说明</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.1 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="release-8-1-11.html" title="E.215. 版本 8.1.11">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-8-1-12"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.214. 版本 8.1.12</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-8-1-12.html#idp80875152">E.214.1. 迁移到版本 8.1.12</a></span></dt><dt><span class="sect2"><a href="release-8-1-12.html#idp80876640">E.214.2. 修改列表</a></span></dt></dl></div><p><strong>发布日期：. </strong>从未发布</p><p>这个版本包含各种自8.1.11以来的修复。关于8.1主版本的新特性信息，
请查看<a class="xref" href="release-8-1.html" title="E.226. 版本 8.1">第 E.226 节</a>。</p><div class="sect2" id="idp80875152"><div class="titlepage"><div><div><h3 class="title">E.214.1. 迁移到版本 8.1.12</h3></div></div></div><p>运行8.1.X的用户不需要转储/恢复。不过，如果你是从一个早于8.1.2的版本升级而来，
那么请查看<a class="xref" href="release-8-1-2.html" title="E.224. 版本 8.1.2">第 E.224 节</a>。</p></div><div class="sect2" id="idp80876640"><div class="titlepage"><div><div><h3 class="title">E.214.2. 修改列表</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>修复<code class="command">ALTER TABLE ADD COLUMN ... PRIMARY KEY</code>，
这样新的字段正确的检查是否它被初始化为所有都是非空 (Brendan Jurd)</p><p>以前的版本完全忽略了检查这个要求。</p></li><li class="listitem"><p>修复从多个继承自同一个祖先的约束的父关系中继承<span class="quote">“<span class="quote">相同的</span>”</span>约束时，
可能的<code class="command">CREATE TABLE</code>失败 (Tom)</p></li><li class="listitem"><p>修复ISO-8859-5和其他编码之间的转换，以处理Cyrillic <span class="quote">“<span class="quote">Yo</span>”</span>字符
（<code class="literal">e</code>和<code class="literal">E</code>带有两个句点） (Sergey Burladyan)</p></li><li class="listitem"><p>修复一个新的日期类型输入函数，
允许未使用的字节在它们的结果中包含未初始化的、不可预测的值 (Tom)</p><p>这会导致两个表面上相同的文字值不被看做相等的失败，
导致解析器抱怨不匹配的<code class="literal">ORDER BY</code>和<code class="literal">DISTINCT</code>表达式。</p></li><li class="listitem"><p>修复正则表达式子串匹配中的一个极端情况(<code class="literal">substring(<em class="replaceable"><code>string</code></em> from
      <em class="replaceable"><code>pattern</code></em>)</code>) (Tom)</p><p>当有一个到模式的完全匹配，但是用户已经指定了一个加上括号的子表达式，
并且该子表达式没有获得一个匹配时会发生这个问题。一个例子是
<code class="literal">substring('foo' from 'foo(bar)?')</code>。这个应该返回NULL，
因为<code class="literal">(bar)</code>没有匹配，但是它错误的返回了整个模式匹配
（也就是<code class="literal">foo</code>）。</p></li><li class="listitem"><p>更新时区数据文件到<span class="application">tzdata</span>版本2008c
（因为DST规律在Morocco、Iraq、Choibalsan、Pakistan、Syria、Cuba、
Argentina/San_Luis和Chile发生了改变）</p></li><li class="listitem"><p>修复<span class="application">ecpg</span>的<code class="function">PGTYPEStimestamp_sub()</code>
函数中的不正确的结果 (Michael)</p></li><li class="listitem"><p>当输入查询返回一个NULL值时，修复<code class="filename">contrib/xml2</code>的
<code class="function">xpath_table()</code>函数中的内核转储 (Tom)</p></li><li class="listitem"><p>修复<code class="filename">contrib/xml2</code>的makefile，不要覆盖<code class="literal">CFLAGS</code> (Tom)</p></li><li class="listitem"><p>修复<code class="literal">DatumGetBool</code>宏，不要在使用<span class="application">gcc</span> 4.3时失败 (Tom)</p><p>这个问题影响返回布尔的<span class="quote">“<span class="quote">老式的</span>”</span> (V0) C函数。
这个修复在8.3中已经有了，但是后向修复它的需要在当时没有意识到。</p></li><li class="listitem"><p>修复长期存在的<code class="command">LISTEN</code>/<code class="command">NOTIFY</code>竞态条件 (Tom)</p><p>在罕见的情况下，刚刚执行了<code class="command">LISTEN</code>的会话可能不会获得一个通知，
即使预期应该有一个通知，因为并发事务执行<code class="command">NOTIFY</code>是在提交之后能观察到。</p><p>该修复的一个副作用是一个刚刚执行了暂未提交的<code class="command">LISTEN</code>命令的事务将不会看到
该<code class="command">LISTEN</code>的<code class="structname">pg_listener</code>中的任何行，而它应该能看到的；
以前它是能够看到的。这个行为不管怎样都没有记录过，但是有可能一些应用依赖于老的行为。</p></li><li class="listitem"><p>不允许<code class="command">LISTEN</code>和<code class="command">UNLISTEN</code>在一个准备事务中 (Tom)</p><p>这在以前是允许的，但是尝试这样做会有各种不愉快的后果，
尤其是只要<code class="command">UNLISTEN</code>保持未提交，原始的后端就不能退出。</p></li><li class="listitem"><p>修复在查询使用哈希索引期间发生错误时的罕见的崩溃 (Heikki)</p></li><li class="listitem"><p>修复公元前的年中二月29的日期时间值的输入 (Tom)</p><p>以前的代码弄错了哪一年是闰年。</p></li><li class="listitem"><p>修复在某些<code class="command">ALTER OWNER</code>的变体中的<span class="quote">“<span class="quote">未识别的节点类型</span>”</span>错误 (Tom)</p></li><li class="listitem"><p>修复<span class="application">pg_ctl</span>，正确的从命令行选项中提取主进程的端口号 (Itagaki Takahiro, Tom)</p><p>以前，<code class="literal">pg_ctl start -w</code>尝试在错误的端口连接主进程，
导致启动失败的虚假的报告。</p></li><li class="listitem"><p>使用<code class="option">-fwrapv</code>防卫在最近的<span class="application">gcc</span>版本中可能的错误最优化 (Tom)</p><p>这在用<span class="application">gcc</span> 4.3或更新的版本建立<span class="productname">PostgreSQL</span>时是必需的。</p></li><li class="listitem"><p>修复<code class="literal">ORDER BY</code>和<code class="literal">GROUP BY</code>中常量表达式的显示 (Tom)</p><p>一个显示转换的常量将会不正确的显示。这会导致例如转储和重载期间视图定义的损坏。</p></li><li class="listitem"><p>修复<span class="application">libpq</span>，以在COPY OUT期间正确的处理NOTICE消息 (Tom)</p><p>只有当用户定义的数据类型的输出例程发出一个NOTICE时，这个失败才能观察到，
但是不保证它不会因为其他原因发生。</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-8-1-13.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="release-8-1-11.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">E.213. 版本 8.1.13 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> E.215. 版本 8.1.11</td></tr></table></div></body></html>
